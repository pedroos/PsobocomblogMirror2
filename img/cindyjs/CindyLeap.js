(function(){
'use strict';var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.checkEs6ConformanceViaProxy=function(){try{var a={},c=Object.create(new $jscomp.global.Proxy(a,{get:function(l,k,e){return l==a&&"q"==k&&e==c}}));return!0===c.q}catch(l){return!1}};$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;
$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,l){a!=Array.prototype&&a!=Object.prototype&&(a[c]=l.value)};$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var a=0;return function(c){return $jscomp.SYMBOL_PREFIX+(c||"")+a++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var c=0;return $jscomp.iteratorPrototype(function(){return c<a.length?{done:!1,value:a[c++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();var c=a[Symbol.iterator];return c?c.call(a):$jscomp.arrayIterator(a)};$jscomp.owns=function(a,c){return Object.prototype.hasOwnProperty.call(a,c)};
$jscomp.polyfill=function(a,c,l,k){if(c){l=$jscomp.global;a=a.split(".");for(k=0;k<a.length-1;k++){var e=a[k];e in l||(l[e]={});l=l[e]}a=a[a.length-1];k=l[a];c=c(k);c!=k&&null!=c&&$jscomp.defineProperty(l,a,{configurable:!0,writable:!0,value:c})}};
$jscomp.polyfill("WeakMap",function(a){function c(){if(!a||!Object.seal)return!1;try{var c=Object.seal({}),e=Object.seal({}),h=new a([[c,2],[e,3]]);if(2!=h.get(c)||3!=h.get(e))return!1;h.delete(c);h.set(e,4);return!h.has(c)&&4==h.get(e)}catch(w){return!1}}function l(a){$jscomp.owns(a,e)||$jscomp.defineProperty(a,e,{value:{}})}function k(a){var c=Object[a];c&&(Object[a]=function(a){l(a);return c(a)})}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(c())return a;
var e="$jscomp_hidden_"+Math.random();k("freeze");k("preventExtensions");k("seal");var h=0,n=function(a){this.id_=(h+=Math.random()+1).toString();if(a){$jscomp.initSymbol();$jscomp.initSymbolIterator();a=$jscomp.makeIterator(a);for(var c;!(c=a.next()).done;)c=c.value,this.set(c[0],c[1])}};n.prototype.set=function(a,c){l(a);if(!$jscomp.owns(a,e))throw Error("WeakMap key fail: "+a);a[e][this.id_]=c;return this};n.prototype.get=function(a){return $jscomp.owns(a,e)?a[e][this.id_]:void 0};n.prototype.has=
function(a){return $jscomp.owns(a,e)&&$jscomp.owns(a[e],this.id_)};n.prototype.delete=function(a){return $jscomp.owns(a,e)&&$jscomp.owns(a[e],this.id_)?delete a[e][this.id_]:!1};return n},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(a){function c(){if($jscomp.ASSUME_NO_NATIVE_MAP||!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var c=Object.seal({x:4}),e=new a($jscomp.makeIterator([[c,"s"]]));if("s"!=e.get(c)||1!=e.size||e.get({x:4})||e.set({x:4},"t")!=e||2!=e.size)return!1;var h=e.entries(),n=h.next();if(n.done||n.value[0]!=c||"s"!=n.value[1])return!1;n=h.next();return n.done||4!=n.value[0].x||"t"!=n.value[1]||!h.next().done?!1:!0}catch(q){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(c())return a;$jscomp.initSymbol();$jscomp.initSymbolIterator();var l=new WeakMap,k=function(a){this.data_={};this.head_=n();this.size=0;if(a){a=$jscomp.makeIterator(a);for(var c;!(c=a.next()).done;)c=c.value,this.set(c[0],c[1])}};k.prototype.set=function(a,c){a=0===a?0:a;var h=e(this,a);h.list||(h.list=this.data_[h.id]=[]);h.entry?h.entry.value=c:(h.entry={next:this.head_,previous:this.head_.previous,head:this.head_,
key:a,value:c},h.list.push(h.entry),this.head_.previous.next=h.entry,this.head_.previous=h.entry,this.size++);return this};k.prototype.delete=function(a){a=e(this,a);return a.entry&&a.list?(a.list.splice(a.index,1),a.list.length||delete this.data_[a.id],a.entry.previous.next=a.entry.next,a.entry.next.previous=a.entry.previous,a.entry.head=null,this.size--,!0):!1};k.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=n();this.size=0};k.prototype.has=function(a){return!!e(this,a).entry};
k.prototype.get=function(a){return(a=e(this,a).entry)&&a.value};k.prototype.entries=function(){return h(this,function(a){return[a.key,a.value]})};k.prototype.keys=function(){return h(this,function(a){return a.key})};k.prototype.values=function(){return h(this,function(a){return a.value})};k.prototype.forEach=function(a,c){for(var e=this.entries(),h;!(h=e.next()).done;)h=h.value,a.call(c,h[1],h[0],this)};k.prototype[Symbol.iterator]=k.prototype.entries;var e=function(a,c){var e=c&&typeof c;"object"==
e||"function"==e?l.has(c)?e=l.get(c):(e=""+ ++B,l.set(c,e)):e="p_"+c;var h=a.data_[e];if(h&&$jscomp.owns(a.data_,e))for(a=0;a<h.length;a++){var n=h[a];if(c!==c&&n.key!==n.key||c===n.key)return{id:e,list:h,index:a,entry:n}}return{id:e,list:h,index:-1,entry:void 0}},h=function(a,c){var e=a.head_;return $jscomp.iteratorPrototype(function(){if(e){for(;e.head!=a.head_;)e=e.previous;for(;e.next!=e.head;)return e=e.next,{done:!1,value:c(e)};e=null}return{done:!0,value:void 0}})},n=function(){var a={};return a.previous=
a.next=a.head=a},B=0;return k},"es6","es3");$jscomp.iteratorFromArray=function(a,c){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var l=0,k={next:function(){if(l<a.length){var e=l++;return{value:c(e,a[e]),done:!1}}k.next=function(){return{done:!0,value:void 0}};return k.next()}};k[Symbol.iterator]=function(){return k};return k};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");
$jscomp.polyfill("Object.getOwnPropertySymbols",function(a){return a?a:function(){return[]}},"es6","es5");$jscomp.polyfill("Reflect.ownKeys",function(a){return a?a:function(a){var c=[],k=Object.getOwnPropertyNames(a);a=Object.getOwnPropertySymbols(a);for(var e=0;e<k.length;e++)("jscomp_symbol_"==k[e].substring(0,14)?a:c).push(k[e]);return c.concat(a)}},"es6","es5");
$jscomp.polyfill("Set",function(a){function c(){if($jscomp.ASSUME_NO_NATIVE_SET||!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var c=Object.seal({x:4}),e=new a($jscomp.makeIterator([c]));if(!e.has(c)||1!=e.size||e.add(c)!=e||1!=e.size||e.add({x:4})!=e||2!=e.size)return!1;var h=e.entries(),n=h.next();if(n.done||n.value[0]!=c||n.value[1]!=c)return!1;n=h.next();return n.done||n.value[0]==c||4!=n.value[0].x||n.value[1]!=n.value[0]?!1:h.next().done}catch(B){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(c())return a;$jscomp.initSymbol();$jscomp.initSymbolIterator();var l=function(a){this.map_=new Map;if(a){a=$jscomp.makeIterator(a);for(var c;!(c=a.next()).done;)this.add(c.value)}this.size=this.map_.size};l.prototype.add=function(a){a=0===a?0:a;this.map_.set(a,a);this.size=this.map_.size;return this};l.prototype.delete=function(a){a=this.map_.delete(a);this.size=this.map_.size;return a};l.prototype.clear=
function(){this.map_.clear();this.size=0};l.prototype.has=function(a){return this.map_.has(a)};l.prototype.entries=function(){return this.map_.entries()};l.prototype.values=function(){return this.map_.values()};l.prototype.keys=l.prototype.values;l.prototype[Symbol.iterator]=l.prototype.values;l.prototype.forEach=function(a,c){var e=this;this.map_.forEach(function(h){return a.call(c,h,h,e)})};return l},"es6","es3");
$jscomp.polyfill("Array.prototype.values",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a,l){return l})}},"es8","es3");
var coerce={toList:function(a,c){c=void 0===c?null:c;return"list"!==a.ctype?(console.log("argument is not a list"),c):a.value},toHomog:function(a,c,l){c=void 0===c?[0,0,0,0]:c;l=void 0===l?3:l;a=coerce.toList(a);if(null===a)return c;c=a.map(coerce.toReal);c.length>l+1&&(console.log("Coordinate vector too long."),c=c.slice(0,l+1));for(;c.length<l;)c.push(0);c.length===l&&c.push(1);return c},toDirection:function(a,c){c=void 0===c?[0,0,0]:c;a=coerce.toList(a);if(null===a)return c;c=a.map(coerce.toReal);
3<c.length&&(console.log("Coordinate vector too long."),c=c.slice(0,3));for(;3>c.length;)c.push(0);return c},toDirectionPoint:function(a,c){c=void 0===c?[0,0,0,0]:c;a=coerce.toDirection(a,c);a!==c&&(a[3]=0);return a},toColor:function(a,c){c=void 0===c?[.5,.5,.5]:c;if("number"===a.ctype){var l=coerce.toInterval(0,1,a);if(!isNaN(l))return[l,l,l]}a=coerce.toList(a);return null===a?c:3!=a.length?(console.log("Not an RGB color vector"),c):a.map(function(a){return coerce.toInterval(0,1,a)})},toReal:function(a,
c){c=void 0===c?Number.NaN:c;if("number"!==a.ctype)return console.log("argument is not a number"),c;a=a.value;c=a.real;0!==a.imag&&console.log("complex number is not real");return c},toInt:function(a,c){c=void 0===c?Number.NaN:c;if("number"!==a.ctype)return console.log("argument is not a number"),c;c=a.value;a=c.real;c=c.imag;0!==c&&console.log("complex number is not real");c=Math.round(a);c!==a&&console.log("number is not an integer");return c},clamp:function(a,c,l){return l<a?a:l>c?c:l},toInterval:function(a,
c,l,k){k=void 0===k?Number.NaN:k;return coerce.clamp(a,c,coerce.toReal(l,k))},toString:function(a,c){c=void 0===c?null:c;if("string"===a.ctype)return a.value;console.log("argument is not a string");return c},toEnum:function(a,c,l){l=void 0===l?null:l;c=coerce.toString(c,l);if(c!==l&&-1!==a.indexOf(c))return c;console.log("argument is not one of "+a.join(", "));return l},toBool:function(a,c){if("boolean"===a.ctype)return a.value;console.log("argument is not boolean");return c}};function norm3(a){var c=a[0],l=a[1];a=a[2];return Math.sqrt(c*c+l*l+a*a)}function normalized3(a){var c=a[0],l=a[1];a=a[2];var k=1/Math.sqrt(c*c+l*l+a*a);return[k*c,k*l,k*a]}function dehom3(a){var c=1/a[3];return[c*a[0],c*a[1],c*a[2]]}function scale3(a,c){return[a*c[0],a*c[1],a*c[2]]}function transpose3(a){return[a[0],a[3],a[6],a[1],a[4],a[7],a[2],a[5],a[8]]}function transpose4(a){return[a[0],a[4],a[8],a[12],a[1],a[5],a[9],a[13],a[2],a[6],a[10],a[14],a[3],a[7],a[11],a[15]]}
function adj3(a){return[a[4]*a[8]-a[5]*a[7],a[2]*a[7]-a[1]*a[8],a[1]*a[5]-a[2]*a[4],a[5]*a[6]-a[3]*a[8],a[0]*a[8]-a[2]*a[6],a[2]*a[3]-a[0]*a[5],a[3]*a[7]-a[4]*a[6],a[1]*a[6]-a[0]*a[7],a[0]*a[4]-a[1]*a[3]]}function sub3(a,c){return[a[0]-c[0],a[1]-c[1],a[2]-c[2]]}function add3(a,c){return[a[0]+c[0],a[1]+c[1],a[2]+c[2]]}function add4(a,c){return[a[0]+c[0],a[1]+c[1],a[2]+c[2],a[3]+c[3]]}function cross3(a,c){return[a[1]*c[2]-a[2]*c[1],a[2]*c[0]-a[0]*c[2],a[0]*c[1]-a[1]*c[0]]}
function mul4mm(a,c){return[a[0]*c[0]+a[1]*c[4]+a[2]*c[8]+a[3]*c[12],a[0]*c[1]+a[1]*c[5]+a[2]*c[9]+a[3]*c[13],a[0]*c[2]+a[1]*c[6]+a[2]*c[10]+a[3]*c[14],a[0]*c[3]+a[1]*c[7]+a[2]*c[11]+a[3]*c[15],a[4]*c[0]+a[5]*c[4]+a[6]*c[8]+a[7]*c[12],a[4]*c[1]+a[5]*c[5]+a[6]*c[9]+a[7]*c[13],a[4]*c[2]+a[5]*c[6]+a[6]*c[10]+a[7]*c[14],a[4]*c[3]+a[5]*c[7]+a[6]*c[11]+a[7]*c[15],a[8]*c[0]+a[9]*c[4]+a[10]*c[8]+a[11]*c[12],a[8]*c[1]+a[9]*c[5]+a[10]*c[9]+a[11]*c[13],a[8]*c[2]+a[9]*c[6]+a[10]*c[10]+a[11]*c[14],a[8]*c[3]+a[9]*
c[7]+a[10]*c[11]+a[11]*c[15],a[12]*c[0]+a[13]*c[4]+a[14]*c[8]+a[15]*c[12],a[12]*c[1]+a[13]*c[5]+a[14]*c[9]+a[15]*c[13],a[12]*c[2]+a[13]*c[6]+a[14]*c[10]+a[15]*c[14],a[12]*c[3]+a[13]*c[7]+a[14]*c[11]+a[15]*c[15]]}function mul3mv(a,c){return[a[0]*c[0]+a[1]*c[1]+a[2]*c[2],a[3]*c[0]+a[4]*c[1]+a[5]*c[2],a[6]*c[0]+a[7]*c[1]+a[8]*c[2]]}
function mul4mv(a,c){return[a[0]*c[0]+a[1]*c[1]+a[2]*c[2]+a[3]*c[3],a[4]*c[0]+a[5]*c[1]+a[6]*c[2]+a[7]*c[3],a[8]*c[0]+a[9]*c[1]+a[10]*c[2]+a[11]*c[3],a[12]*c[0]+a[13]*c[1]+a[14]*c[2]+a[15]*c[3]]}function transform4to3(a,c){var l=1/(a[12]*c[0]+a[13]*c[1]+a[14]*c[2]+a[15]*c[3]);return[(a[0]*c[0]+a[1]*c[1]+a[2]*c[2]+a[3]*c[3])*l,(a[4]*c[0]+a[5]*c[1]+a[6]*c[2]+a[7]*c[3])*l,(a[8]*c[0]+a[9]*c[1]+a[10]*c[2]+a[11]*c[3])*l]}
function triangleNormal(a,c,l){a=dehom3(a);c=sub3(dehom3(c),a);l=sub3(dehom3(l),a);return normalized3(cross3(c,l))};function nestedArrayToCSList(a){return Array.isArray(a)?{ctype:"list",value:a.map(function(a){return nestedArrayToCSList(a)})}:{ctype:"number",value:{real:a,imag:0}}}
function convertObjectToCindyDict(a,c,l){if(a instanceof Object&&l.has(a))return l.get(a);if(Array.isArray(a)){var k=[];a.forEach(function(a){a=convertObjectToCindyDict(a,c,l);null!=a&&k.push(a)});return{ctype:"list",value:k}}if("string"===typeof a||a instanceof String)return{ctype:"string",value:a};if("number"===typeof a&&isFinite(a))return{ctype:"number",value:{real:a,imag:0}};if("boolean"===typeof a)return{ctype:"boolean",value:a};if(null===a||"undefined"===typeof a||"function"===typeof a)return null;
var e={},h=new Map(l);h.set(a,e);for(var n in a)if(!c.has(n)&&a.hasOwnProperty(n)){var B=convertObjectToCindyDict(a[n],c,h);e[n]=B}return{ctype:"JSON",value:e}};(function(a){"object"===typeof exports&&"undefined"!==typeof module?module.exports=a():"function"===typeof define&&define.amd?define([],a):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).Leap=a()})(function(){return function(){function a(c,l,k){function e(n,v){if(!l[n]){if(!c[n]){var B="function"==typeof require&&require;if(!v&&B)return B(n,!0);if(h)return h(n,!0);v=Error("Cannot find module '"+n+"'");throw v.code="MODULE_NOT_FOUND",v;}v=
l[n]={exports:{}};c[n][0].call(v.exports,function(a){return e(c[n][1][a]||a)},v,v.exports,a,c,l,k)}return l[n].exports}for(var h="function"==typeof require&&require,n=0;n<k.length;n++)e(k[n]);return e}return a}()({1:[function(a,c,l){function k(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=t(null),this._eventsCount=0);this._maxListeners=this._maxListeners||void 0}function e(b,f,a,D){var d;if("function"!==typeof a)throw new TypeError('"listener" argument must be a function');
if(d=b._events){d.newListener&&(b.emit("newListener",f,a.listener?a.listener:a),d=b._events);var g=d[f]}else d=b._events=t(null),b._eventsCount=0;g?("function"===typeof g?g=d[f]=D?[a,g]:[g,a]:D?g.unshift(a):g.push(a),g.warned||(a=void 0===b._maxListeners?k.defaultMaxListeners:b._maxListeners)&&0<a&&g.length>a&&(g.warned=!0,a=Error("Possible EventEmitter memory leak detected. "+g.length+' "'+String(f)+'" listeners added. Use emitter.setMaxListeners() to increase limit.'),a.name="MaxListenersExceededWarning",
a.emitter=b,a.type=f,a.count=g.length,"object"===typeof console&&console.warn&&console.warn("%s: %s",a.name,a.message))):(d[f]=a,++b._eventsCount);return b}function h(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],
arguments[1],arguments[2]);default:for(var b=Array(arguments.length),f=0;f<b.length;++f)b[f]=arguments[f];this.listener.apply(this.target,b)}}function n(b,f,a){b={fired:!1,wrapFn:void 0,target:b,type:f,listener:a};f=A.call(h,b);f.listener=a;return b.wrapFn=f}function B(b,f,a){b=b._events;if(!b)return[];f=b[f];if(!f)return[];if("function"===typeof f)return a?[f.listener||f]:[f];if(a)for(a=Array(f.length),b=0;b<a.length;++b)a[b]=f[b].listener||f[b];else a=C(f,f.length);return a}function v(b){var d=
this._events;if(d){b=d[b];if("function"===typeof b)return 1;if(b)return b.length}return 0}function C(b,f){for(var d=Array(f),g=0;g<f;++g)d[g]=b[g];return d}function w(b){var d=function(){};d.prototype=b;return new d}function p(b){var d=[],f;for(f in b)Object.prototype.hasOwnProperty.call(b,f)&&d.push(f);return f}function q(b){var d=this;return function(){return d.apply(b,arguments)}}var t=Object.create||w,r=Object.keys||p,A=Function.prototype.bind||q;c.exports=k;k.EventEmitter=k;k.prototype._events=
void 0;k.prototype._maxListeners=void 0;var f=10;try{a={};Object.defineProperty&&Object.defineProperty(a,"x",{value:0});var b=0===a.x}catch(d){b=!1}b?Object.defineProperty(k,"defaultMaxListeners",{enumerable:!0,get:function(){return f},set:function(b){if("number"!==typeof b||0>b||b!==b)throw new TypeError('"defaultMaxListeners" must be a positive number');f=b}}):k.defaultMaxListeners=f;k.prototype.setMaxListeners=function(b){if("number"!==typeof b||0>b||isNaN(b))throw new TypeError('"n" argument must be a positive number');
this._maxListeners=b;return this};k.prototype.getMaxListeners=function(){return void 0===this._maxListeners?k.defaultMaxListeners:this._maxListeners};k.prototype.emit=function(b){var d,f,a;var c="error"===b;if(a=this._events)c=c&&null==a.error;else if(!c)return!1;if(c){1<arguments.length&&(d=arguments[1]);if(d instanceof Error)throw d;a=Error('Unhandled "error" event. ('+d+")");a.context=d;throw a;}d=a[b];if(!d)return!1;a="function"===typeof d;var e=arguments.length;switch(e){case 1:if(a)d.call(this);
else for(a=d.length,d=C(d,a),c=0;c<a;++c)d[c].call(this);break;case 2:c=arguments[1];if(a)d.call(this,c);else for(a=d.length,d=C(d,a),e=0;e<a;++e)d[e].call(this,c);break;case 3:c=arguments[1];e=arguments[2];if(a)d.call(this,c,e);else for(a=d.length,d=C(d,a),f=0;f<a;++f)d[f].call(this,c,e);break;case 4:c=arguments[1];e=arguments[2];f=arguments[3];if(a)d.call(this,c,e,f);else{a=d.length;d=C(d,a);for(var m=0;m<a;++m)d[m].call(this,c,e,f)}break;default:c=Array(e-1);for(f=1;f<e;f++)c[f-1]=arguments[f];
if(a)d.apply(this,c);else for(a=d.length,d=C(d,a),e=0;e<a;++e)d[e].apply(this,c)}return!0};k.prototype.addListener=function(b,f){return e(this,b,f,!1)};k.prototype.on=k.prototype.addListener;k.prototype.prependListener=function(b,f){return e(this,b,f,!0)};k.prototype.once=function(b,f){if("function"!==typeof f)throw new TypeError('"listener" argument must be a function');this.on(b,n(this,b,f));return this};k.prototype.prependOnceListener=function(b,f){if("function"!==typeof f)throw new TypeError('"listener" argument must be a function');
this.prependListener(b,n(this,b,f));return this};k.prototype.removeListener=function(b,f){var d;if("function"!==typeof f)throw new TypeError('"listener" argument must be a function');var g=this._events;if(!g)return this;var a=g[b];if(!a)return this;if(a===f||a.listener===f)0===--this._eventsCount?this._events=t(null):(delete g[b],g.removeListener&&this.emit("removeListener",b,a.listener||f));else if("function"!==typeof a){var c=-1;for(d=a.length-1;0<=d;d--)if(a[d]===f||a[d].listener===f){var m=a[d].listener;
c=d;break}if(0>c)return this;if(0===c)a.shift();else{d=c+1;for(var e=a.length;d<e;c+=1,d+=1)a[c]=a[d];a.pop()}1===a.length&&(g[b]=a[0]);g.removeListener&&this.emit("removeListener",b,m||f)}return this};k.prototype.removeAllListeners=function(b){var d=this._events;if(!d)return this;if(!d.removeListener)return 0===arguments.length?(this._events=t(null),this._eventsCount=0):d[b]&&(0===--this._eventsCount?this._events=t(null):delete d[b]),this;if(0===arguments.length){var f=r(d);for(d=0;d<f.length;++d){var a=
f[d];"removeListener"!==a&&this.removeAllListeners(a)}this.removeAllListeners("removeListener");this._events=t(null);this._eventsCount=0;return this}f=d[b];if("function"===typeof f)this.removeListener(b,f);else if(f)for(d=f.length-1;0<=d;d--)this.removeListener(b,f[d]);return this};k.prototype.listeners=function(b){return B(this,b,!0)};k.prototype.rawListeners=function(b){return B(this,b,!1)};k.listenerCount=function(b,f){return"function"===typeof b.listenerCount?b.listenerCount(f):v.call(b,f)};k.prototype.listenerCount=
v;k.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]}},{}],2:[function(a,c,l){a("./pointable");l=a("gl-matrix");var k=l.vec3,e=l.mat3,h=l.mat4;a("underscore");a=c.exports=function(a,c){this.finger=a;this._matrix=this._center=null;this.type=c.type;this.prevJoint=c.prevJoint;this.nextJoint=c.nextJoint;this.width=c.width;a=Array(3);k.sub(a,c.nextJoint,c.prevJoint);this.length=k.length(a);this.basis=c.basis};a.prototype.left=function(){return this._left?this._left:
this._left=0>e.determinant(this.basis[0].concat(this.basis[1]).concat(this.basis[2]))};a.prototype.matrix=function(){if(this._matrix)return this._matrix;var a=this.basis,c=this._matrix=h.create();c[0]=a[0][0];c[1]=a[0][1];c[2]=a[0][2];c[4]=a[1][0];c[5]=a[1][1];c[6]=a[1][2];c[8]=a[2][0];c[9]=a[2][1];c[10]=a[2][2];c[3]=this.center()[0];c[7]=this.center()[1];c[11]=this.center()[2];this.left()&&(c[0]*=-1,c[1]*=-1,c[2]*=-1);return this._matrix};a.prototype.lerp=function(a,c){k.lerp(a,this.prevJoint,this.nextJoint,
c)};a.prototype.center=function(){if(this._center)return this._center;var a=k.create();this.lerp(a,.5);return this._center=a};a.prototype.direction=function(){return[-1*this.basis[2][0],-1*this.basis[2][1],-1*this.basis[2][2]]}},{"./pointable":15,"gl-matrix":21,underscore:24}],3:[function(a,c,l){a=c.exports=function(a){this.pos=0;this._buf=[];this.size=a};a.prototype.get=function(a){void 0==a&&(a=0);if(!(a>=this.size||a>=this._buf.length))return this._buf[(this.pos-a-1)%this.size]};a.prototype.push=
function(a){this._buf[this.pos%this.size]=a;return this.pos++}},{}],4:[function(a,c,l){var k=a("../protocol").chooseProtocol;l=a("events").EventEmitter;var e=a("underscore"),h=c.exports=function(a){this.opts=e.defaults(a||{},{host:"127.0.0.1",enableGestures:!1,scheme:this.getScheme(),port:this.getPort(),background:!1,optimizeHMD:!1,requestProtocolVersion:h.defaultProtocolVersion});this.host=this.opts.host;this.port=this.opts.port;this.scheme=this.opts.scheme;this.protocolVersionVerified=!1;this.optimizeHMD=
this.background=null;this.on("ready",function(){this.enableGestures(this.opts.enableGestures);this.setBackground(this.opts.background);this.setOptimizeHMD(this.opts.optimizeHMD);this.opts.optimizeHMD?console.log("Optimized for head mounted display usage."):console.log("Optimized for desktop usage.")})};h.defaultProtocolVersion=6;h.prototype.getUrl=function(){return this.scheme+"//"+this.host+":"+this.port+"/v"+this.opts.requestProtocolVersion+".json"};h.prototype.getScheme=function(){return"ws:"};
h.prototype.getPort=function(){return 6437};h.prototype.setBackground=function(a){this.opts.background=a;this.protocol&&this.protocol.sendBackground&&this.background!==this.opts.background&&(this.background=this.opts.background,this.protocol.sendBackground(this,this.opts.background))};h.prototype.setOptimizeHMD=function(a){this.opts.optimizeHMD=a;this.protocol&&this.protocol.sendOptimizeHMD&&this.optimizeHMD!==this.opts.optimizeHMD&&(this.optimizeHMD=this.opts.optimizeHMD,this.protocol.sendOptimizeHMD(this,
this.opts.optimizeHMD))};h.prototype.handleOpen=function(){this.connected||(this.connected=!0,this.emit("connect"))};h.prototype.enableGestures=function(a){this.gesturesEnabled=a?!0:!1;this.send(this.protocol.encode({enableGestures:this.gesturesEnabled}))};h.prototype.handleClose=function(a,c){this.connected&&(this.disconnect(),1001===a&&1<this.opts.requestProtocolVersion&&(this.protocolVersionVerified?this.protocolVersionVerified=!1:this.opts.requestProtocolVersion--),this.startReconnection())};
h.prototype.startReconnection=function(){var a=this;this.reconnectionTimer||(this.reconnectionTimer=setInterval(function(){a.reconnect()},500))};h.prototype.stopReconnection=function(){this.reconnectionTimer=clearInterval(this.reconnectionTimer)};h.prototype.disconnect=function(a){a||this.stopReconnection();if(this.socket)return this.socket.close(),delete this.socket,delete this.protocol,delete this.background,delete this.optimizeHMD,delete this.focusedState,this.connected&&(this.connected=!1,this.emit("disconnect")),
!0};h.prototype.reconnect=function(){this.connected?this.stopReconnection():(this.disconnect(!0),this.connect())};h.prototype.handleData=function(a){a=JSON.parse(a);void 0===this.protocol?(a=this.protocol=k(a),this.protocolVersionVerified=!0,this.emit("ready")):a=this.protocol(a);this.emit(a.type,a)};h.prototype.connect=function(){if(!this.socket)return this.socket=this.setupSocket(),!0};h.prototype.send=function(a){this.socket.send(a)};h.prototype.reportFocus=function(a){this.connected&&this.focusedState!==
a&&(this.focusedState=a,this.emit(this.focusedState?"focus":"blur"),this.protocol&&this.protocol.sendFocused&&this.protocol.sendFocused(this,this.focusedState))};e.extend(h.prototype,l.prototype)},{"../protocol":16,events:1,underscore:24}],5:[function(a,c,l){var k=c.exports=a("./base");a=a("underscore");c=c.exports=function(a){k.call(this,a);var c=this;this.on("ready",function(){c.startFocusLoop()});this.on("disconnect",function(){c.stopFocusLoop()})};a.extend(c.prototype,k.prototype);c.__proto__=
k;c.prototype.useSecure=function(){return"https:"===location.protocol};c.prototype.getScheme=function(){return this.useSecure()?"wss:":"ws:"};c.prototype.getPort=function(){return this.useSecure()?6436:6437};c.prototype.setupSocket=function(){var a=this,c=new WebSocket(this.getUrl());c.onopen=function(){a.handleOpen()};c.onclose=function(c){a.handleClose(c.code,c.reason)};c.onmessage=function(c){a.handleData(c.data)};c.onerror=function(c){a.useSecure()&&"wss:"===a.scheme&&(a.scheme="ws:",a.port=6437,
a.disconnect(),a.connect())};return c};c.prototype.startFocusLoop=function(){if(!this.focusDetectorTimer){var a=this,c=null;c="undefined"!==typeof document.hidden?"hidden":"undefined"!==typeof document.mozHidden?"mozHidden":"undefined"!==typeof document.msHidden?"msHidden":"undefined"!==typeof document.webkitHidden?"webkitHidden":void 0;void 0===a.windowVisible&&(a.windowVisible=void 0===c?!0:!1===document[c]);var n=window.addEventListener("focus",function(c){a.windowVisible=!0;v()}),k=window.addEventListener("blur",
function(c){a.windowVisible=!1;v()});this.on("disconnect",function(){window.removeEventListener("focus",n);window.removeEventListener("blur",k)});var v=function(){a.reportFocus((void 0===c?!0:!1===document[c])&&a.windowVisible)};v();this.focusDetectorTimer=setInterval(v,100)}};c.prototype.stopFocusLoop=function(){this.focusDetectorTimer&&(clearTimeout(this.focusDetectorTimer),delete this.focusDetectorTimer)}},{"./base":4,underscore:24}],6:[function(a,c,l){var k=a("ws"),e=a("./base");a=a("underscore");
c=c.exports=function(a){e.call(this,a);var c=this;this.on("ready",function(){c.reportFocus(!0)})};a.extend(c.prototype,e.prototype);c.__proto__=e;c.prototype.setupSocket=function(){var a=this,c=new k(this.getUrl());c.on("open",function(){a.handleOpen()});c.on("message",function(c){a.handleData(c)});c.on("close",function(c,e){a.handleClose(c,e)});c.on("error",function(){a.startReconnection()});return c}},{"./base":4,underscore:24,ws:22}],7:[function(a,c,l){(function(k){(function(){var e=a("./frame"),
h=a("./hand"),n=a("./pointable"),l=a("./finger"),v=a("./circular_buffer"),C=a("./pipeline"),w=a("events").EventEmitter,p=a("./gesture").gestureListener,q=a("./dialog"),t=a("underscore"),r=c.exports=function(c){var f=this;c=t.defaults(c||{},{inNode:"undefined"!==typeof k&&k.versions&&k.versions.node});this.inNode=c.inNode;c=t.defaults(c||{},{frameEventName:this.useAnimationLoop()?"animationFrame":"deviceFrame",suppressAnimationLoop:!this.useAnimationLoop(),loopWhileDisconnected:!0,useAllPlugins:!1,
checkVersion:!0});this.animationFrameRequested=!1;this.onAnimationFrame=function(b){f.lastConnectionFrame.valid&&f.emit("animationFrame",f.lastConnectionFrame);f.emit("frameEnd",b);f.loopWhileDisconnected&&(!1!==f.connection.focusedState||f.connection.opts.background)?window.requestAnimationFrame(f.onAnimationFrame):f.animationFrameRequested=!1};this.suppressAnimationLoop=c.suppressAnimationLoop;this.loopWhileDisconnected=c.loopWhileDisconnected;this.frameEventName=c.frameEventName;this.useAllPlugins=
c.useAllPlugins;this.history=new v(200);this.lastConnectionFrame=this.lastValidFrame=this.lastFrame=e.Invalid;this.accumulatedGestures=[];this.checkVersion=c.checkVersion;this.connectionType=void 0===c.connectionType?this.inBrowser()?a("./connection/browser"):a("./connection/node"):c.connectionType;this.connection=new this.connectionType(c);this.streamingCount=0;this.devices={};this.plugins={};this._pluginPipelineSteps={};this._pluginExtendedMethods={};c.useAllPlugins&&this.useRegisteredPlugins();
this.setupFrameEvents(c);this.setupConnectionEvents();this.startAnimationLoop()};r.prototype.gesture=function(a,f){a=p(this,a);void 0!==f&&a.stop(f);return a};r.prototype.setBackground=function(a){this.connection.setBackground(a);return this};r.prototype.setOptimizeHMD=function(a){this.connection.setOptimizeHMD(a);return this};r.prototype.inBrowser=function(){return!this.inNode};r.prototype.useAnimationLoop=function(){return this.inBrowser()&&!this.inBackgroundPage()};r.prototype.inBackgroundPage=
function(){return"undefined"!==typeof chrome&&chrome.extension&&chrome.extension.getBackgroundPage&&chrome.extension.getBackgroundPage()===window};r.prototype.connect=function(){this.connection.connect();return this};r.prototype.streaming=function(){return 0<this.streamingCount};r.prototype.connected=function(){return!!this.connection.connected};r.prototype.startAnimationLoop=function(){this.suppressAnimationLoop||this.animationFrameRequested||(this.animationFrameRequested=!0,window.requestAnimationFrame(this.onAnimationFrame))};
r.prototype.disconnect=function(){this.connection.disconnect();return this};r.prototype.frame=function(a){return this.history.get(a)||e.Invalid};r.prototype.loop=function(a){if(a)if("function"===typeof a)this.on(this.frameEventName,a);else this.setupFrameEvents(a);return this.connect()};r.prototype.addStep=function(a){this.pipeline||(this.pipeline=new C(this));this.pipeline.addStep(a)};r.prototype.processFrame=function(a){a.gestures&&(this.accumulatedGestures=this.accumulatedGestures.concat(a.gestures));
this.lastConnectionFrame=a;this.startAnimationLoop();this.emit("deviceFrame",a)};r.prototype.processFinishedFrame=function(a){this.lastFrame=a;a.valid&&(this.lastValidFrame=a);a.controller=this;a.historyIdx=this.history.push(a);if(a.gestures){a.gestures=this.accumulatedGestures;this.accumulatedGestures=[];for(var f=0;f!=a.gestures.length;f++)this.emit("gesture",a.gestures[f],a)}this.pipeline&&(a=this.pipeline.run(a),a||(a=e.Invalid));this.emit("frame",a);this.emitHandEvents(a)};r.prototype.emitHandEvents=
function(a){for(var f=0;f<a.hands.length;f++)this.emit("hand",a.hands[f])};r.prototype.setupFrameEvents=function(a){if(a.frame)this.on("frame",a.frame);if(a.hand)this.on("hand",a.hand)};r.prototype.setupConnectionEvents=function(){var a=this;this.connection.on("frame",function(b){a.processFrame(b)});this.on(this.frameEventName,function(b){a.processFinishedFrame(b)});var f=function(){if(5>a.connection.opts.requestProtocolVersion&&0==a.streamingCount){a.streamingCount=1;var b={attached:!0,streaming:!0,
type:"unknown",id:"Lx00000000000"};a.devices[b.id]=b;a.emit("deviceAttached",b);a.emit("deviceStreaming",b);a.emit("streamingStarted",b);a.connection.removeListener("frame",f)}},b=function(){if(0<a.streamingCount){for(var b in a.devices)a.emit("deviceStopped",a.devices[b]),a.emit("deviceRemoved",a.devices[b]);a.emit("streamingStopped",a.devices[b]);a.streamingCount=0;for(b in a.devices)delete a.devices[b]}};this.connection.on("focus",function(){a.loopWhileDisconnected&&a.startAnimationLoop();a.emit("focus")});
this.connection.on("blur",function(){a.emit("blur")});this.connection.on("protocol",function(b){b.on("beforeFrameCreated",function(b){a.emit("beforeFrameCreated",b)});b.on("afterFrameCreated",function(b,d){a.emit("afterFrameCreated",b,d)});a.emit("protocol",b)});this.connection.on("ready",function(){a.checkVersion&&!a.inNode&&a.checkOutOfDate();a.emit("ready")});this.connection.on("connect",function(){a.emit("connect");a.connection.removeListener("frame",f);a.connection.on("frame",f)});this.connection.on("disconnect",
function(){a.emit("disconnect");b()});this.connection.on("deviceConnect",function(d){d.state?(a.emit("deviceConnected"),a.connection.removeListener("frame",f),a.connection.on("frame",f)):(a.emit("deviceDisconnected"),b())});this.connection.on("deviceEvent",function(b){b=b.state;var d=a.devices[b.id],f={},c;for(c in b)d&&d.hasOwnProperty(c)&&d[c]==b[c]||(f[c]=!0);a.devices[b.id]=b;f.attached&&a.emit(b.attached?"deviceAttached":"deviceRemoved",b);f.streaming&&(b.streaming?(a.streamingCount++,a.emit("deviceStreaming",
b),1==a.streamingCount&&a.emit("streamingStarted",b),f.attached||a.emit("deviceConnected")):f.attached&&b.attached||(a.streamingCount--,a.emit("deviceStopped",b),0==a.streamingCount&&a.emit("streamingStopped",b),a.emit("deviceDisconnected")))});this.on("newListener",function(b,f){"deviceConnected"!=b&&"deviceDisconnected"!=b||console.warn(b+" events are depricated.  Consider using 'streamingStarted/streamingStopped' or 'deviceStreaming/deviceStopped' instead")})};r.prototype.checkOutOfDate=function(){console.assert(this.connection&&
this.connection.protocol);var a=this.connection.protocol.serviceVersion,f=this.connection.protocol.version,b=this.connectionType.defaultProtocolVersion;return b>f?(console.warn("Your Protocol Version is v"+f+", this app was designed for v"+b),q.warnOutOfDate({sV:a,pV:f}),!0):!1};r._pluginFactories={};r.plugin=function(a,f){this._pluginFactories[a]&&console.warn('Plugin "'+a+'" already registered');return this._pluginFactories[a]=f};r.plugins=function(){return t.keys(this._pluginFactories)};r.prototype.use=
function(a,f){var b;var d="function"==typeof a?a:r._pluginFactories[a];if(!d)throw"Leap Plugin "+a+" not found.";f||(f={});if(this.plugins[a])return t.extend(this.plugins[a],f),this;this.plugins[a]=f;f=d.call(this,f);for(b in f)if(d=f[b],"function"===typeof d){var g=a,u=b;if(-1!=["beforeFrameCreated","afterFrameCreated"].indexOf(u))this.on(u,d);else this.pipeline||(this.pipeline=new C(this)),this._pluginPipelineSteps[g]||(this._pluginPipelineSteps[g]=[]),this._pluginPipelineSteps[g].push(this.pipeline.addWrappedStep(u,
d))}else{g=a;u=b;this._pluginExtendedMethods[g]||(this._pluginExtendedMethods[g]=[]);switch(u){case "frame":u=e;break;case "hand":u=h;break;case "pointable":u=n;t.extend(l.prototype,d);t.extend(l.Invalid,d);break;case "finger":u=l;break;default:throw g+' specifies invalid object type "'+u+'" for prototypical extension';}t.extend(u.prototype,d);t.extend(u.Invalid,d);this._pluginExtendedMethods[g].push([u,d])}return this};r.prototype.stopUsing=function(a){var f=this._pluginPipelineSteps[a],b=this._pluginExtendedMethods[a],
d;if(this.plugins[a]){if(f)for(d=0;d<f.length;d++)this.pipeline.removeStep(f[d]);if(b)for(d=0;d<b.length;d++){f=b[d][0];var g=b[d][1];for(var u in g)delete f.prototype[u],delete f.Invalid[u]}delete this.plugins[a];return this}};r.prototype.useRegisteredPlugins=function(){for(var a in r._pluginFactories)this.use(a)};t.extend(r.prototype,w.prototype)}).call(this)}).call(this,a("_process"))},{"./circular_buffer":3,"./connection/browser":5,"./connection/node":6,"./dialog":8,"./finger":9,"./frame":10,
"./gesture":11,"./hand":12,"./pipeline":14,"./pointable":15,_process:23,events:1,underscore:24}],8:[function(a,c,l){(function(a){(function(){var e=c.exports=function(a,c){this.options=c||{};this.message=a;this.createElement()};e.prototype.createElement=function(){this.element=document.createElement("div");this.element.className="leapjs-dialog";this.element.style.position="fixed";this.element.style.top="8px";this.element.style.left=0;this.element.style.right=0;this.element.style.textAlign="center";
this.element.style.zIndex=1E3;var a=document.createElement("div");this.element.appendChild(a);a.style.className="leapjs-dialog";a.style.display="inline-block";a.style.margin="auto";a.style.padding="8px";a.style.color="#222";a.style.background="#eee";a.style.borderRadius="4px";a.style.border="1px solid #999";a.style.textAlign="left";a.style.cursor="pointer";a.style.whiteSpace="nowrap";a.style.transition="box-shadow 1s linear";a.innerHTML=this.message;this.options.onclick&&a.addEventListener("click",
this.options.onclick);this.options.onmouseover&&a.addEventListener("mouseover",this.options.onmouseover);this.options.onmouseout&&a.addEventListener("mouseout",this.options.onmouseout);this.options.onmousemove&&a.addEventListener("mousemove",this.options.onmousemove)};e.prototype.show=function(){document.body.appendChild(this.element);return this};e.prototype.hide=function(){document.body.removeChild(this.element);return this};e.warnOutOfDate=function(a){a||(a={});var c="http://developer.leapmotion.com?";
a.returnTo=window.location.href;for(var h in a)c+=h+"="+encodeURIComponent(a[h])+"&";var k=new e("This site requires Leap Motion Tracking V2.<button id='leapjs-accept-upgrade'  style='color: #444; transition: box-shadow 100ms linear; cursor: pointer; vertical-align: baseline; margin-left: 16px;'>Upgrade</button><button id='leapjs-decline-upgrade' style='color: #444; transition: box-shadow 100ms linear; cursor: pointer; vertical-align: baseline; margin-left: 8px; '>Not Now</button>",{onclick:function(a){"leapjs-decline-upgrade"!=
a.target.id&&(a=window.open(c,"_blank","height=800,width=1000,location=1,menubar=1,resizable=1,status=1,toolbar=1,scrollbars=1"),window.focus&&a.focus());k.hide();return!0},onmousemove:function(a){a.target==document.getElementById("leapjs-decline-upgrade")?(document.getElementById("leapjs-decline-upgrade").style.color="#000",document.getElementById("leapjs-decline-upgrade").style.boxShadow="0px 0px 2px #5daa00",document.getElementById("leapjs-accept-upgrade").style.color="#444",document.getElementById("leapjs-accept-upgrade").style.boxShadow=
"none"):(document.getElementById("leapjs-accept-upgrade").style.color="#000",document.getElementById("leapjs-accept-upgrade").style.boxShadow="0px 0px 2px #5daa00",document.getElementById("leapjs-decline-upgrade").style.color="#444",document.getElementById("leapjs-decline-upgrade").style.boxShadow="none")},onmouseout:function(){document.getElementById("leapjs-decline-upgrade").style.color="#444";document.getElementById("leapjs-decline-upgrade").style.boxShadow="none";document.getElementById("leapjs-accept-upgrade").style.color=
"#444";document.getElementById("leapjs-accept-upgrade").style.boxShadow="none"}});return k.show()};e.hasWarnedBones=!1;e.warnBones=function(){this.hasWarnedBones||(this.hasWarnedBones=!0,console.warn("Your Leap Service is out of date"),"undefined"!==typeof a&&a.versions&&a.versions.node||this.warnOutOfDate({reason:"bones"}))}}).call(this)}).call(this,a("_process"))},{_process:23}],9:[function(a,c,l){var k=a("./pointable"),e=a("./bone"),h=a("./dialog");a=a("underscore");c=c.exports=function(a){k.call(this,
a);this.dipPosition=a.dipPosition;this.pipPosition=a.pipPosition;this.mcpPosition=a.mcpPosition;this.carpPosition=a.carpPosition;this.extended=a.extended;this.type=a.type;this.finger=!0;this.positions=[this.carpPosition,this.mcpPosition,this.pipPosition,this.dipPosition,this.tipPosition];a.bases?this.addBones(a):h.warnBones()};a.extend(c.prototype,k.prototype);c.prototype.addBones=function(a){this.metacarpal=new e(this,{type:0,width:this.width,prevJoint:this.carpPosition,nextJoint:this.mcpPosition,
basis:a.bases[0]});this.proximal=new e(this,{type:1,width:this.width,prevJoint:this.mcpPosition,nextJoint:this.pipPosition,basis:a.bases[1]});this.medial=new e(this,{type:2,width:this.width,prevJoint:this.pipPosition,nextJoint:this.dipPosition,basis:a.bases[2]});this.distal=new e(this,{type:3,width:this.width,prevJoint:this.dipPosition,nextJoint:a.btipPosition,basis:a.bases[3]});this.bones=[this.metacarpal,this.proximal,this.medial,this.distal]};c.prototype.toString=function(){return"Finger [ id:"+
this.id+" "+this.length+"mmx | width:"+this.width+"mm | direction:"+this.direction+" ]"};c.Invalid={valid:!1}},{"./bone":2,"./dialog":8,"./pointable":15,underscore:24}],10:[function(a,c,l){var k=a("./hand"),e=a("./pointable"),h=a("./gesture").createGesture;l=a("gl-matrix");var n=l.mat3,B=l.vec3,v=a("./interaction_box"),C=a("./finger"),w=a("underscore");a=c.exports=function(a){this.valid=!0;this.id=a.id;this.timestamp=a.timestamp;this.hands=[];this.handsMap={};this.pointables=[];this.tools=[];this.fingers=
[];a.interactionBox&&(this.interactionBox=new v(a.interactionBox));this.gestures=[];this.pointablesMap={};this._translation=a.t;this._rotation=w.flatten(a.r);this._scaleFactor=a.s;this.data=a;this.type="frame";this.currentFrameRate=a.currentFrameRate;if(a.gestures)for(var c=0,e=a.gestures.length;c!=e;c++)this.gestures.push(h(a.gestures[c]));this.postprocessData(a)};a.prototype.postprocessData=function(a){a||(a=this.data);for(var c=0,h=a.hands.length;c!=h;c++){var n=new k(a.hands[c]);n.frame=this;
this.hands.push(n);this.handsMap[n.id]=n}a.pointables=w.sortBy(a.pointables,function(a){return a.id});c=0;for(h=a.pointables.length;c!=h;c++)n=a.pointables[c],n=n.dipPosition?new C(n):new e(n),n.frame=this,this.addPointable(n)};a.prototype.addPointable=function(a){this.pointables.push(a);this.pointablesMap[a.id]=a;(a.tool?this.tools:this.fingers).push(a);if(void 0!==a.handId&&this.handsMap.hasOwnProperty(a.handId)){var c=this.handsMap[a.handId];c.pointables.push(a);(a.tool?c.tools:c.fingers).push(a);
switch(a.type){case 0:c.thumb=a;break;case 1:c.indexFinger=a;break;case 2:c.middleFinger=a;break;case 3:c.ringFinger=a;break;case 4:c.pinky=a}}};a.prototype.tool=function(a){a=this.pointable(a);return a.tool?a:e.Invalid};a.prototype.pointable=function(a){return this.pointablesMap[a]||e.Invalid};a.prototype.finger=function(a){a=this.pointable(a);return a.tool?e.Invalid:a};a.prototype.hand=function(a){return this.handsMap[a]||k.Invalid};a.prototype.rotationAngle=function(a,c){if(!this.valid||!a.valid)return 0;
var e=this.rotationMatrix(a);e=Math.acos(.5*(e[0]+e[4]+e[8]-1));e=isNaN(e)?0:e;void 0!==c&&(a=this.rotationAxis(a),e*=B.dot(a,B.normalize(B.create(),c)));return e};a.prototype.rotationAxis=function(a){return this.valid&&a.valid?B.normalize(B.create(),[this._rotation[7]-a._rotation[5],this._rotation[2]-a._rotation[6],this._rotation[3]-a._rotation[1]]):B.create()};a.prototype.rotationMatrix=function(a){if(!this.valid||!a.valid)return n.create();var c=n.transpose(n.create(),this._rotation);return n.multiply(n.create(),
a._rotation,c)};a.prototype.scaleFactor=function(a){return this.valid&&a.valid?Math.exp(this._scaleFactor-a._scaleFactor):1};a.prototype.translation=function(a){return this.valid&&a.valid?B.subtract(B.create(),this._translation,a._translation):B.create()};a.prototype.toString=function(){var a="Frame [ id:"+this.id+" | timestamp:"+this.timestamp+" | Hand count:("+this.hands.length+") | Pointable count:("+this.pointables.length+")";this.gestures&&(a+=" | Gesture count:("+this.gestures.length+")");return a+
" ]"};a.prototype.dump=function(){var a="Frame Info:<br/>"+this.toString();a+="<br/><br/>Hands:<br/>";for(var c=0,e=this.hands.length;c!=e;c++)a+="  "+this.hands[c].toString()+"<br/>";a+="<br/><br/>Pointables:<br/>";c=0;for(e=this.pointables.length;c!=e;c++)a+="  "+this.pointables[c].toString()+"<br/>";if(this.gestures)for(a+="<br/><br/>Gestures:<br/>",c=0,e=this.gestures.length;c!=e;c++)a+="  "+this.gestures[c].toString()+"<br/>";return a=a+"<br/><br/>Raw JSON:<br/>"+JSON.stringify(this.data)};a.Invalid=
{valid:!1,hands:[],fingers:[],tools:[],gestures:[],pointables:[],pointable:function(){return e.Invalid},finger:function(){return e.Invalid},hand:function(){return k.Invalid},toString:function(){return"invalid frame"},dump:function(){return this.toString()},rotationAngle:function(){return 0},rotationMatrix:function(){return n.create()},rotationAxis:function(){return B.create()},scaleFactor:function(){return 1},translation:function(){return B.create()}}},{"./finger":9,"./gesture":11,"./hand":12,"./interaction_box":13,
"./pointable":15,"gl-matrix":21,underscore:24}],11:[function(a,c,l){var k=a("gl-matrix").vec3;c=a("events").EventEmitter;var e=a("underscore");l.createGesture=function(a){switch(a.type){case "circle":var c=new n(a);break;case "swipe":c=new B(a);break;case "screenTap":c=new v(a);break;case "keyTap":c=new C(a);break;default:throw"unknown gesture type";}c.id=a.id;c.handIds=a.handIds.slice();c.pointableIds=a.pointableIds.slice();c.duration=a.duration;c.state=a.state;c.type=a.type;return c};l.gestureListener=
function(a,c){var n={},k={};a.on("gesture",function(a,f){if(a.type==c){if(("start"==a.state||"stop"==a.state)&&void 0===k[a.id]){var b=new h(a,f);k[a.id]=b;e.each(n,function(d,f){b.on(f,d)})}k[a.id].update(a,f);"stop"==a.state&&delete k[a.id]}});var v={start:function(a){n.start=a;return v},stop:function(a){n.stop=a;return v},complete:function(a){n.stop=a;return v},update:function(a){n.update=a;return v}};return v};var h=l.Gesture=function(a,c){this.gestures=[a];this.frames=[c]};h.prototype.update=
function(a,c){this.lastGesture=a;this.lastFrame=c;this.gestures.push(a);this.frames.push(c);this.emit(a.state,this)};h.prototype.translation=function(){return k.subtract(k.create(),this.lastGesture.startPosition,this.lastGesture.position)};e.extend(h.prototype,c.prototype);var n=function(a){this.center=a.center;this.normal=a.normal;this.progress=a.progress;this.radius=a.radius};n.prototype.toString=function(){return"CircleGesture ["+JSON.stringify(this)+"]"};var B=function(a){this.startPosition=a.startPosition;
this.position=a.position;this.direction=a.direction;this.speed=a.speed};B.prototype.toString=function(){return"SwipeGesture ["+JSON.stringify(this)+"]"};var v=function(a){this.position=a.position;this.direction=a.direction;this.progress=a.progress};v.prototype.toString=function(){return"ScreenTapGesture ["+JSON.stringify(this)+"]"};var C=function(a){this.position=a.position;this.direction=a.direction;this.progress=a.progress};C.prototype.toString=function(){return"KeyTapGesture ["+JSON.stringify(this)+
"]"}},{events:1,"gl-matrix":21,underscore:24}],12:[function(a,c,l){var k=a("./pointable"),e=a("./bone");l=a("gl-matrix");var h=l.mat3,n=l.vec3,B=a("underscore");a=c.exports=function(a){this.id=a.id;this.palmPosition=a.palmPosition;this.direction=a.direction;this.palmVelocity=a.palmVelocity;this.palmNormal=a.palmNormal;this.sphereCenter=a.sphereCenter;this.sphereRadius=a.sphereRadius;this.valid=!0;this.pointables=[];this.fingers=[];this.arm=a.armBasis?new e(this,{type:4,width:a.armWidth,prevJoint:a.elbow,
nextJoint:a.wrist,basis:a.armBasis}):null;this.tools=[];this._translation=a.t;this._rotation=B.flatten(a.r);this._scaleFactor=a.s;this.timeVisible=a.timeVisible;this.stabilizedPalmPosition=a.stabilizedPalmPosition;this.type=a.type;this.grabStrength=a.grabStrength;this.pinchStrength=a.pinchStrength;this.confidence=a.confidence};a.prototype.finger=function(a){return(a=this.frame.finger(a))&&a.handId==this.id?a:k.Invalid};a.prototype.rotationAngle=function(a,c){if(!this.valid||!a.valid||!a.hand(this.id).valid)return 0;
var e=this.rotationMatrix(a);e=Math.acos(.5*(e[0]+e[4]+e[8]-1));e=isNaN(e)?0:e;void 0!==c&&(a=this.rotationAxis(a),e*=n.dot(a,n.normalize(n.create(),c)));return e};a.prototype.rotationAxis=function(a){if(!this.valid||!a.valid)return n.create();a=a.hand(this.id);return a.valid?n.normalize(n.create(),[this._rotation[7]-a._rotation[5],this._rotation[2]-a._rotation[6],this._rotation[3]-a._rotation[1]]):n.create()};a.prototype.rotationMatrix=function(a){if(!this.valid||!a.valid)return h.create();a=a.hand(this.id);
if(!a.valid)return h.create();var c=h.transpose(h.create(),this._rotation);return h.multiply(h.create(),a._rotation,c)};a.prototype.scaleFactor=function(a){if(!this.valid||!a.valid)return 1;a=a.hand(this.id);return a.valid?Math.exp(this._scaleFactor-a._scaleFactor):1};a.prototype.translation=function(a){if(!this.valid||!a.valid)return n.create();a=a.hand(this.id);return a.valid?[this._translation[0]-a._translation[0],this._translation[1]-a._translation[1],this._translation[2]-a._translation[2]]:n.create()};
a.prototype.toString=function(){return"Hand ("+this.type+") [ id: "+this.id+" | palm velocity:"+this.palmVelocity+" | sphere center:"+this.sphereCenter+" ] "};a.prototype.pitch=function(){return Math.atan2(this.direction[1],-this.direction[2])};a.prototype.yaw=function(){return Math.atan2(this.direction[0],-this.direction[2])};a.prototype.roll=function(){return Math.atan2(this.palmNormal[0],-this.palmNormal[1])};a.Invalid={valid:!1,fingers:[],tools:[],pointables:[],left:!1,pointable:function(){return k.Invalid},
finger:function(){return k.Invalid},toString:function(){return"invalid frame"},dump:function(){return this.toString()},rotationAngle:function(){return 0},rotationMatrix:function(){return h.create()},rotationAxis:function(){return n.create()},scaleFactor:function(){return 1},translation:function(){return n.create()}}},{"./bone":2,"./pointable":15,"gl-matrix":21,underscore:24}],13:[function(a,c,l){var k=a("gl-matrix").vec3;a=c.exports=function(a){this.valid=!0;this.center=a.center;this.size=a.size;
this.width=a.size[0];this.height=a.size[1];this.depth=a.size[2]};a.prototype.denormalizePoint=function(a){return k.fromValues((a[0]-.5)*this.size[0]+this.center[0],(a[1]-.5)*this.size[1]+this.center[1],(a[2]-.5)*this.size[2]+this.center[2])};a.prototype.normalizePoint=function(a,c){a=k.fromValues((a[0]-this.center[0])/this.size[0]+.5,(a[1]-this.center[1])/this.size[1]+.5,(a[2]-this.center[2])/this.size[2]+.5);c&&(a[0]=Math.min(Math.max(a[0],0),1),a[1]=Math.min(Math.max(a[1],0),1),a[2]=Math.min(Math.max(a[2],
0),1));return a};a.prototype.toString=function(){return"InteractionBox [ width:"+this.width+" | height:"+this.height+" | depth:"+this.depth+" ]"};a.Invalid={valid:!1}},{"gl-matrix":21}],14:[function(a,c,l){a=c.exports=function(a){this.steps=[];this.controller=a};a.prototype.addStep=function(a){this.steps.push(a)};a.prototype.run=function(a){for(var c=this.steps.length,h=0;h!=c&&a;h++)a=this.steps[h](a);return a};a.prototype.removeStep=function(a){a=this.steps.indexOf(a);if(-1===a)throw"Step not found in pipeline";
this.steps.splice(a,1)};a.prototype.addWrappedStep=function(a,c){var e=this.controller,n=function(h){var n;var k="frame"==a?[h]:h[a+"s"]||[];var l=0;for(n=k.length;l<n;l++)c.call(e,k[l]);return h};this.addStep(n);return n}},{}],15:[function(a,c,l){a("gl-matrix");a=c.exports=function(a){this.valid=!0;this.id=a.id;this.handId=a.handId;this.length=a.length;this.tool=a.tool;this.width=a.width;this.direction=a.direction;this.stabilizedTipPosition=a.stabilizedTipPosition;this.tipPosition=a.tipPosition;
this.tipVelocity=a.tipVelocity;this.touchZone=a.touchZone;this.touchDistance=a.touchDistance;this.timeVisible=a.timeVisible};a.prototype.toString=function(){return"Pointable [ id:"+this.id+" "+this.length+"mmx | width:"+this.width+"mm | direction:"+this.direction+" ]"};a.prototype.hand=function(){return this.frame.hand(this.handId)};a.Invalid={valid:!1}},{"gl-matrix":21}],16:[function(a,c,l){var k=a("./frame");a("./hand");a("./pointable");a("./finger");var e=a("underscore"),h=a("events").EventEmitter,
n=function(a){this.type=a.type;this.state=a.state};l.chooseProtocol=function(a){switch(a.version){case 1:case 2:case 3:case 4:case 5:case 6:var c=B(a);c.sendBackground=function(a,e){a.send(c.encode({background:e}))};c.sendFocused=function(a,e){a.send(c.encode({focused:e}))};c.sendOptimizeHMD=function(a,e){a.send(c.encode({optimizeHMD:e}))};break;default:throw"unrecognized version";}return c};var B=l.JSONProtocol=function(a){var c=function(a){if(a.event)return new n(a.event);c.emit("beforeFrameCreated",
a);var e=new k(a);c.emit("afterFrameCreated",e,a);return e};c.encode=function(a){return JSON.stringify(a)};c.version=a.version;c.serviceVersion=a.serviceVersion;c.versionLong="Version "+a.version;c.type="protocol";e.extend(c,h.prototype);return c}},{"./finger":9,"./frame":10,"./hand":12,"./pointable":15,events:1,underscore:24}],17:[function(a,c,l){l.UI={Region:a("./ui/region"),Cursor:a("./ui/cursor")}},{"./ui/cursor":18,"./ui/region":19}],18:[function(a,c,l){c.exports=function(){return function(a){var c=
a.pointables.sort(function(a,c){return a.z-c.z})[0];c&&c.valid&&(a.cursorPosition=c.tipPosition);return a}}},{}],19:[function(a,c,l){l=a("events").EventEmitter;a=a("underscore");var k=c.exports=function(a,c){this.start=new Vector(a);this.end=new Vector(c);this.enteredFrame=null};k.prototype.hasPointables=function(a){for(var c=0;c!=a.pointables.length;c++){var e=a.pointables[c].tipPosition;if(e.x>=this.start.x&&e.x<=this.end.x&&e.y>=this.start.y&&e.y<=this.end.y&&e.z>=this.start.z&&e.z<=this.end.z)return!0}return!1};
k.prototype.listener=function(a){var c=this;a&&a.nearThreshold&&this.setupNearRegion(a.nearThreshold);return function(a){return c.updatePosition(a)}};k.prototype.clipper=function(){var a=this;return function(c){a.updatePosition(c);return a.enteredFrame?c:null}};k.prototype.setupNearRegion=function(a){a=this.nearRegion=new k([this.start.x-a,this.start.y-a,this.start.z-a],[this.end.x+a,this.end.y+a,this.end.z+a]);var c=this;a.on("enter",function(a){c.emit("near",a)});a.on("exit",function(a){c.emit("far",
a)});c.on("exit",function(a){c.emit("near",a)})};k.prototype.updatePosition=function(a){this.nearRegion&&this.nearRegion.updatePosition(a);this.hasPointables(a)&&null==this.enteredFrame?(this.enteredFrame=a,this.emit("enter",this.enteredFrame)):this.hasPointables(a)||null==this.enteredFrame||(this.enteredFrame=null,this.emit("exit",this.enteredFrame));return a};k.prototype.normalize=function(a){return new Vector([(a.x-this.start.x)/(this.end.x-this.start.x),(a.y-this.start.y)/(this.end.y-this.start.y),
(a.z-this.start.z)/(this.end.z-this.start.z)])};k.prototype.mapToXY=function(a,c,n){a=this.normalize(a);var e=a.x,h=a.y;1<e?e=1:-1>e&&(e=-1);1<h?h=1:-1>h&&(h=-1);return[(e+1)/2*c,(1-h)/2*n,a.z]};a.extend(k.prototype,l.prototype)},{events:1,underscore:24}],20:[function(a,c,l){c.exports={full:"0.6.4",major:0,minor:6,dot:4}},{}],21:[function(a,c,l){(function(a){(function(a){if(!c)var c=1E-6;if(!e)var e="undefined"!==typeof Float32Array?Float32Array:Array;if(!k)var k=Math.random;var l={setMatrixArrayType:function(a){e=
a}};"undefined"!==typeof a&&(a.glMatrix=l);var C=Math.PI/180;l.toRadian=function(a){return a*C};var w={create:function(){var a=new e(2);a[0]=0;a[1]=0;return a},clone:function(a){var b=new e(2);b[0]=a[0];b[1]=a[1];return b},fromValues:function(a,b){var d=new e(2);d[0]=a;d[1]=b;return d},copy:function(a,b){a[0]=b[0];a[1]=b[1];return a},set:function(a,b,d){a[0]=b;a[1]=d;return a},add:function(a,b,d){a[0]=b[0]+d[0];a[1]=b[1]+d[1];return a},subtract:function(a,b,d){a[0]=b[0]-d[0];a[1]=b[1]-d[1];return a}};
w.sub=w.subtract;w.multiply=function(a,b,d){a[0]=b[0]*d[0];a[1]=b[1]*d[1];return a};w.mul=w.multiply;w.divide=function(a,b,d){a[0]=b[0]/d[0];a[1]=b[1]/d[1];return a};w.div=w.divide;w.min=function(a,b,d){a[0]=Math.min(b[0],d[0]);a[1]=Math.min(b[1],d[1]);return a};w.max=function(a,b,d){a[0]=Math.max(b[0],d[0]);a[1]=Math.max(b[1],d[1]);return a};w.scale=function(a,b,d){a[0]=b[0]*d;a[1]=b[1]*d;return a};w.scaleAndAdd=function(a,b,d,g){a[0]=b[0]+d[0]*g;a[1]=b[1]+d[1]*g;return a};w.distance=function(a,
b){var d=b[0]-a[0];a=b[1]-a[1];return Math.sqrt(d*d+a*a)};w.dist=w.distance;w.squaredDistance=function(a,b){var d=b[0]-a[0];a=b[1]-a[1];return d*d+a*a};w.sqrDist=w.squaredDistance;w.length=function(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)};w.len=w.length;w.squaredLength=function(a){var b=a[0];a=a[1];return b*b+a*a};w.sqrLen=w.squaredLength;w.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];return a};w.normalize=function(a,b){var d=b[0],f=b[1];d=d*d+f*f;0<d&&(d=1/Math.sqrt(d),a[0]=b[0]*d,a[1]=b[1]*
d);return a};w.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]};w.cross=function(a,b,d){b=b[0]*d[1]-b[1]*d[0];a[0]=a[1]=0;a[2]=b;return a};w.lerp=function(a,b,d,g){var f=b[0];b=b[1];a[0]=f+g*(d[0]-f);a[1]=b+g*(d[1]-b);return a};w.random=function(a,b){b=b||1;var d=2*k()*Math.PI;a[0]=Math.cos(d)*b;a[1]=Math.sin(d)*b;return a};w.transformMat2=function(a,b,d){var f=b[0];b=b[1];a[0]=d[0]*f+d[2]*b;a[1]=d[1]*f+d[3]*b;return a};w.transformMat2d=function(a,b,d){var f=b[0];b=b[1];a[0]=d[0]*f+d[2]*b+d[4];a[1]=
d[1]*f+d[3]*b+d[5];return a};w.transformMat3=function(a,b,d){var f=b[0];b=b[1];a[0]=d[0]*f+d[3]*b+d[6];a[1]=d[1]*f+d[4]*b+d[7];return a};w.transformMat4=function(a,b,d){var f=b[0];b=b[1];a[0]=d[0]*f+d[4]*b+d[12];a[1]=d[1]*f+d[5]*b+d[13];return a};w.forEach=function(){var a=w.create();return function(b,d,f,u,c,e){d||(d=2);f||(f=0);for(u=u?Math.min(u*d+f,b.length):b.length;f<u;f+=d)a[0]=b[f],a[1]=b[f+1],c(a,a,e),b[f]=a[0],b[f+1]=a[1];return b}}();w.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};
"undefined"!==typeof a&&(a.vec2=w);var p={create:function(){var a=new e(3);a[0]=0;a[1]=0;a[2]=0;return a},clone:function(a){var b=new e(3);b[0]=a[0];b[1]=a[1];b[2]=a[2];return b},fromValues:function(a,b,d){var f=new e(3);f[0]=a;f[1]=b;f[2]=d;return f},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];return a},set:function(a,b,d,g){a[0]=b;a[1]=d;a[2]=g;return a},add:function(a,b,d){a[0]=b[0]+d[0];a[1]=b[1]+d[1];a[2]=b[2]+d[2];return a},subtract:function(a,b,d){a[0]=b[0]-d[0];a[1]=b[1]-d[1];a[2]=b[2]-
d[2];return a}};p.sub=p.subtract;p.multiply=function(a,b,d){a[0]=b[0]*d[0];a[1]=b[1]*d[1];a[2]=b[2]*d[2];return a};p.mul=p.multiply;p.divide=function(a,b,d){a[0]=b[0]/d[0];a[1]=b[1]/d[1];a[2]=b[2]/d[2];return a};p.div=p.divide;p.min=function(a,b,d){a[0]=Math.min(b[0],d[0]);a[1]=Math.min(b[1],d[1]);a[2]=Math.min(b[2],d[2]);return a};p.max=function(a,b,d){a[0]=Math.max(b[0],d[0]);a[1]=Math.max(b[1],d[1]);a[2]=Math.max(b[2],d[2]);return a};p.scale=function(a,b,d){a[0]=b[0]*d;a[1]=b[1]*d;a[2]=b[2]*d;
return a};p.scaleAndAdd=function(a,b,d,g){a[0]=b[0]+d[0]*g;a[1]=b[1]+d[1]*g;a[2]=b[2]+d[2]*g;return a};p.distance=function(a,b){var d=b[0]-a[0],f=b[1]-a[1];a=b[2]-a[2];return Math.sqrt(d*d+f*f+a*a)};p.dist=p.distance;p.squaredDistance=function(a,b){var d=b[0]-a[0],f=b[1]-a[1];a=b[2]-a[2];return d*d+f*f+a*a};p.sqrDist=p.squaredDistance;p.length=function(a){var b=a[0],d=a[1];a=a[2];return Math.sqrt(b*b+d*d+a*a)};p.len=p.length;p.squaredLength=function(a){var b=a[0],d=a[1];a=a[2];return b*b+d*d+a*a};
p.sqrLen=p.squaredLength;p.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];return a};p.normalize=function(a,b){var d=b[0],f=b[1],u=b[2];d=d*d+f*f+u*u;0<d&&(d=1/Math.sqrt(d),a[0]=b[0]*d,a[1]=b[1]*d,a[2]=b[2]*d);return a};p.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]};p.cross=function(a,b,d){var f=b[0],u=b[1];b=b[2];var c=d[0],e=d[1];d=d[2];a[0]=u*d-b*e;a[1]=b*c-f*d;a[2]=f*e-u*c;return a};p.lerp=function(a,b,d,g){var f=b[0],c=b[1];b=b[2];a[0]=f+g*(d[0]-f);a[1]=c+g*(d[1]-c);a[2]=b+g*
(d[2]-b);return a};p.random=function(a,b){b=b||1;var d=2*k()*Math.PI,f=2*k()-1,u=Math.sqrt(1-f*f)*b;a[0]=Math.cos(d)*u;a[1]=Math.sin(d)*u;a[2]=f*b;return a};p.transformMat4=function(a,b,d){var f=b[0],u=b[1];b=b[2];a[0]=d[0]*f+d[4]*u+d[8]*b+d[12];a[1]=d[1]*f+d[5]*u+d[9]*b+d[13];a[2]=d[2]*f+d[6]*u+d[10]*b+d[14];return a};p.transformMat3=function(a,b,d){var f=b[0],u=b[1];b=b[2];a[0]=f*d[0]+u*d[3]+b*d[6];a[1]=f*d[1]+u*d[4]+b*d[7];a[2]=f*d[2]+u*d[5]+b*d[8];return a};p.transformQuat=function(a,b,d){var f=
b[0],u=b[1],c=b[2];b=d[0];var e=d[1],h=d[2];d=d[3];var m=d*f+e*c-h*u,k=d*u+h*f-b*c,n=d*c+b*u-e*f;f=-b*f-e*u-h*c;a[0]=m*d+f*-b+k*-h-n*-e;a[1]=k*d+f*-e+n*-b-m*-h;a[2]=n*d+f*-h+m*-e-k*-b;return a};p.rotateX=function(a,b,d,g){var f=[],c=[];f[0]=b[0]-d[0];f[1]=b[1]-d[1];f[2]=b[2]-d[2];c[0]=f[0];c[1]=f[1]*Math.cos(g)-f[2]*Math.sin(g);c[2]=f[1]*Math.sin(g)+f[2]*Math.cos(g);a[0]=c[0]+d[0];a[1]=c[1]+d[1];a[2]=c[2]+d[2];return a};p.rotateY=function(a,b,d,g){var f=[],c=[];f[0]=b[0]-d[0];f[1]=b[1]-d[1];f[2]=
b[2]-d[2];c[0]=f[2]*Math.sin(g)+f[0]*Math.cos(g);c[1]=f[1];c[2]=f[2]*Math.cos(g)-f[0]*Math.sin(g);a[0]=c[0]+d[0];a[1]=c[1]+d[1];a[2]=c[2]+d[2];return a};p.rotateZ=function(a,b,d,g){var f=[],c=[];f[0]=b[0]-d[0];f[1]=b[1]-d[1];f[2]=b[2]-d[2];c[0]=f[0]*Math.cos(g)-f[1]*Math.sin(g);c[1]=f[0]*Math.sin(g)+f[1]*Math.cos(g);c[2]=f[2];a[0]=c[0]+d[0];a[1]=c[1]+d[1];a[2]=c[2]+d[2];return a};p.forEach=function(){var a=p.create();return function(b,d,f,u,c,e){d||(d=3);f||(f=0);for(u=u?Math.min(u*d+f,b.length):
b.length;f<u;f+=d)a[0]=b[f],a[1]=b[f+1],a[2]=b[f+2],c(a,a,e),b[f]=a[0],b[f+1]=a[1],b[f+2]=a[2];return b}}();p.str=function(a){return"vec3("+a[0]+", "+a[1]+", "+a[2]+")"};"undefined"!==typeof a&&(a.vec3=p);var q={create:function(){var a=new e(4);a[0]=0;a[1]=0;a[2]=0;a[3]=0;return a},clone:function(a){var b=new e(4);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},fromValues:function(a,b,d,g){var f=new e(4);f[0]=a;f[1]=b;f[2]=d;f[3]=g;return f},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=
b[3];return a},set:function(a,b,d,g,u){a[0]=b;a[1]=d;a[2]=g;a[3]=u;return a},add:function(a,b,d){a[0]=b[0]+d[0];a[1]=b[1]+d[1];a[2]=b[2]+d[2];a[3]=b[3]+d[3];return a},subtract:function(a,b,d){a[0]=b[0]-d[0];a[1]=b[1]-d[1];a[2]=b[2]-d[2];a[3]=b[3]-d[3];return a}};q.sub=q.subtract;q.multiply=function(a,b,d){a[0]=b[0]*d[0];a[1]=b[1]*d[1];a[2]=b[2]*d[2];a[3]=b[3]*d[3];return a};q.mul=q.multiply;q.divide=function(a,b,d){a[0]=b[0]/d[0];a[1]=b[1]/d[1];a[2]=b[2]/d[2];a[3]=b[3]/d[3];return a};q.div=q.divide;
q.min=function(a,b,d){a[0]=Math.min(b[0],d[0]);a[1]=Math.min(b[1],d[1]);a[2]=Math.min(b[2],d[2]);a[3]=Math.min(b[3],d[3]);return a};q.max=function(a,b,d){a[0]=Math.max(b[0],d[0]);a[1]=Math.max(b[1],d[1]);a[2]=Math.max(b[2],d[2]);a[3]=Math.max(b[3],d[3]);return a};q.scale=function(a,b,d){a[0]=b[0]*d;a[1]=b[1]*d;a[2]=b[2]*d;a[3]=b[3]*d;return a};q.scaleAndAdd=function(a,b,d,g){a[0]=b[0]+d[0]*g;a[1]=b[1]+d[1]*g;a[2]=b[2]+d[2]*g;a[3]=b[3]+d[3]*g;return a};q.distance=function(a,b){var d=b[0]-a[0],f=b[1]-
a[1],u=b[2]-a[2];a=b[3]-a[3];return Math.sqrt(d*d+f*f+u*u+a*a)};q.dist=q.distance;q.squaredDistance=function(a,b){var d=b[0]-a[0],f=b[1]-a[1],u=b[2]-a[2];a=b[3]-a[3];return d*d+f*f+u*u+a*a};q.sqrDist=q.squaredDistance;q.length=function(a){var b=a[0],d=a[1],f=a[2];a=a[3];return Math.sqrt(b*b+d*d+f*f+a*a)};q.len=q.length;q.squaredLength=function(a){var b=a[0],d=a[1],f=a[2];a=a[3];return b*b+d*d+f*f+a*a};q.sqrLen=q.squaredLength;q.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];a[3]=-b[3];return a};
q.normalize=function(a,b){var d=b[0],f=b[1],u=b[2],c=b[3];d=d*d+f*f+u*u+c*c;0<d&&(d=1/Math.sqrt(d),a[0]=b[0]*d,a[1]=b[1]*d,a[2]=b[2]*d,a[3]=b[3]*d);return a};q.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]};q.lerp=function(a,b,d,g){var f=b[0],c=b[1],e=b[2];b=b[3];a[0]=f+g*(d[0]-f);a[1]=c+g*(d[1]-c);a[2]=e+g*(d[2]-e);a[3]=b+g*(d[3]-b);return a};q.random=function(a,b){b=b||1;a[0]=k();a[1]=k();a[2]=k();a[3]=k();q.normalize(a,a);q.scale(a,a,b);return a};q.transformMat4=function(a,b,
d){var f=b[0],c=b[1],D=b[2];b=b[3];a[0]=d[0]*f+d[4]*c+d[8]*D+d[12]*b;a[1]=d[1]*f+d[5]*c+d[9]*D+d[13]*b;a[2]=d[2]*f+d[6]*c+d[10]*D+d[14]*b;a[3]=d[3]*f+d[7]*c+d[11]*D+d[15]*b;return a};q.transformQuat=function(a,b,d){var f=b[0],c=b[1],D=b[2];b=d[0];var e=d[1],h=d[2];d=d[3];var m=d*f+e*D-h*c,k=d*c+h*f-b*D,n=d*D+b*c-e*f;f=-b*f-e*c-h*D;a[0]=m*d+f*-b+k*-h-n*-e;a[1]=k*d+f*-e+n*-b-m*-h;a[2]=n*d+f*-h+m*-e-k*-b;return a};q.forEach=function(){var a=q.create();return function(b,d,f,c,D,e){d||(d=4);f||(f=0);for(c=
c?Math.min(c*d+f,b.length):b.length;f<c;f+=d)a[0]=b[f],a[1]=b[f+1],a[2]=b[f+2],a[3]=b[f+3],D(a,a,e),b[f]=a[0],b[f+1]=a[1],b[f+2]=a[2],b[f+3]=a[3];return b}}();q.str=function(a){return"vec4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};"undefined"!==typeof a&&(a.vec4=q);l={create:function(){var a=new e(4);a[0]=1;a[1]=0;a[2]=0;a[3]=1;return a},clone:function(a){var b=new e(4);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];return a},identity:function(a){a[0]=
1;a[1]=0;a[2]=0;a[3]=1;return a},transpose:function(a,b){if(a===b){var d=b[1];a[1]=b[2];a[2]=d}else a[0]=b[0],a[1]=b[2],a[2]=b[1],a[3]=b[3];return a},invert:function(a,b){var d=b[0],f=b[1],c=b[2];b=b[3];var D=d*b-c*f;if(!D)return null;D=1/D;a[0]=b*D;a[1]=-f*D;a[2]=-c*D;a[3]=d*D;return a},adjoint:function(a,b){var d=b[0];a[0]=b[3];a[1]=-b[1];a[2]=-b[2];a[3]=d;return a},determinant:function(a){return a[0]*a[3]-a[2]*a[1]},multiply:function(a,b,d){var f=b[0],c=b[1],D=b[2];b=b[3];var e=d[0],h=d[1],m=d[2];
d=d[3];a[0]=f*e+D*h;a[1]=c*e+b*h;a[2]=f*m+D*d;a[3]=c*m+b*d;return a}};l.mul=l.multiply;l.rotate=function(a,b,d){var f=b[0],c=b[1],D=b[2];b=b[3];var e=Math.sin(d);d=Math.cos(d);a[0]=f*d+D*e;a[1]=c*d+b*e;a[2]=f*-e+D*d;a[3]=c*-e+b*d;return a};l.scale=function(a,b,d){var f=b[1],c=b[2],D=b[3],e=d[0];d=d[1];a[0]=b[0]*e;a[1]=f*e;a[2]=c*d;a[3]=D*d;return a};l.str=function(a){return"mat2("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};l.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],
2)+Math.pow(a[3],2))};l.LDU=function(a,b,d,g){a[2]=g[2]/g[0];d[0]=g[0];d[1]=g[1];d[3]=g[3]-a[2]*d[1];return[a,b,d]};"undefined"!==typeof a&&(a.mat2=l);l={create:function(){var a=new e(6);a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a},clone:function(a){var b=new e(6);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];return b},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a},
invert:function(a,b){var d=b[0],f=b[1],c=b[2],D=b[3],e=b[4];b=b[5];var h=d*D-f*c;if(!h)return null;h=1/h;a[0]=D*h;a[1]=-f*h;a[2]=-c*h;a[3]=d*h;a[4]=(c*b-D*e)*h;a[5]=(f*e-d*b)*h;return a},determinant:function(a){return a[0]*a[3]-a[1]*a[2]},multiply:function(a,b,d){var f=b[0],c=b[1],D=b[2],e=b[3],h=b[4];b=b[5];var m=d[0],k=d[1],n=d[2],l=d[3],r=d[4];d=d[5];a[0]=f*m+D*k;a[1]=c*m+e*k;a[2]=f*n+D*l;a[3]=c*n+e*l;a[4]=f*r+D*d+h;a[5]=c*r+e*d+b;return a}};l.mul=l.multiply;l.rotate=function(a,b,d){var f=b[0],
c=b[1],D=b[2],e=b[3],h=b[4];b=b[5];var m=Math.sin(d);d=Math.cos(d);a[0]=f*d+D*m;a[1]=c*d+e*m;a[2]=f*-m+D*d;a[3]=c*-m+e*d;a[4]=h;a[5]=b;return a};l.scale=function(a,b,d){var f=b[1],c=b[2],D=b[3],e=b[4],h=b[5],m=d[0];d=d[1];a[0]=b[0]*m;a[1]=f*m;a[2]=c*d;a[3]=D*d;a[4]=e;a[5]=h;return a};l.translate=function(a,b,d){var f=b[0],c=b[1],D=b[2],e=b[3],h=b[4];b=b[5];var m=d[0];d=d[1];a[0]=f;a[1]=c;a[2]=D;a[3]=e;a[4]=f*m+D*d+h;a[5]=c*m+e*d+b;return a};l.str=function(a){return"mat2d("+a[0]+", "+a[1]+", "+a[2]+
", "+a[3]+", "+a[4]+", "+a[5]+")"};l.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+1)};"undefined"!==typeof a&&(a.mat2d=l);var t={create:function(){var a=new e(9);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a},fromMat4:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[4];a[4]=b[5];a[5]=b[6];a[6]=b[8];a[7]=b[9];a[8]=b[10];return a},clone:function(a){var b=new e(9);b[0]=a[0];b[1]=a[1];
b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return b},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a},transpose:function(a,b){if(a===b){var d=b[1],f=b[2],c=b[5];a[1]=b[3];a[2]=b[6];a[3]=d;a[5]=b[7];a[6]=f;a[7]=c}else a[0]=b[0],a[1]=b[3],a[2]=b[6],a[3]=b[1],a[4]=b[4],a[5]=b[7],a[6]=b[2],a[7]=b[5],a[8]=b[8];return a},
invert:function(a,b){var d=b[0],f=b[1],c=b[2],D=b[3],e=b[4],h=b[5],m=b[6],k=b[7];b=b[8];var n=b*e-h*k,l=-b*D+h*m,r=k*D-e*m,p=d*n+f*l+c*r;if(!p)return null;p=1/p;a[0]=n*p;a[1]=(-b*f+c*k)*p;a[2]=(h*f-c*e)*p;a[3]=l*p;a[4]=(b*d-c*m)*p;a[5]=(-h*d+c*D)*p;a[6]=r*p;a[7]=(-k*d+f*m)*p;a[8]=(e*d-f*D)*p;return a},adjoint:function(a,b){var d=b[0],f=b[1],c=b[2],D=b[3],e=b[4],h=b[5],m=b[6],k=b[7];b=b[8];a[0]=e*b-h*k;a[1]=c*k-f*b;a[2]=f*h-c*e;a[3]=h*m-D*b;a[4]=d*b-c*m;a[5]=c*D-d*h;a[6]=D*k-e*m;a[7]=f*m-d*k;a[8]=
d*e-f*D;return a},determinant:function(a){var b=a[3],d=a[4],f=a[5],c=a[6],D=a[7],e=a[8];return a[0]*(e*d-f*D)+a[1]*(-e*b+f*c)+a[2]*(D*b-d*c)},multiply:function(a,b,d){var f=b[0],c=b[1],D=b[2],e=b[3],h=b[4],m=b[5],k=b[6],n=b[7];b=b[8];var l=d[0],r=d[1],p=d[2],v=d[3],q=d[4],B=d[5],t=d[6],w=d[7];d=d[8];a[0]=l*f+r*e+p*k;a[1]=l*c+r*h+p*n;a[2]=l*D+r*m+p*b;a[3]=v*f+q*e+B*k;a[4]=v*c+q*h+B*n;a[5]=v*D+q*m+B*b;a[6]=t*f+w*e+d*k;a[7]=t*c+w*h+d*n;a[8]=t*D+w*m+d*b;return a}};t.mul=t.multiply;t.translate=function(a,
b,d){var f=b[0],c=b[1],e=b[2],h=b[3],k=b[4],m=b[5],n=b[6],l=b[7];b=b[8];var r=d[0];d=d[1];a[0]=f;a[1]=c;a[2]=e;a[3]=h;a[4]=k;a[5]=m;a[6]=r*f+d*h+n;a[7]=r*c+d*k+l;a[8]=r*e+d*m+b;return a};t.rotate=function(a,b,d){var f=b[0],c=b[1],e=b[2],h=b[3],k=b[4],m=b[5],n=b[6],l=b[7];b=b[8];var r=Math.sin(d);d=Math.cos(d);a[0]=d*f+r*h;a[1]=d*c+r*k;a[2]=d*e+r*m;a[3]=d*h-r*f;a[4]=d*k-r*c;a[5]=d*m-r*e;a[6]=n;a[7]=l;a[8]=b;return a};t.scale=function(a,b,d){var g=d[0];d=d[1];a[0]=g*b[0];a[1]=g*b[1];a[2]=g*b[2];a[3]=
d*b[3];a[4]=d*b[4];a[5]=d*b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];return a};t.fromMat2d=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=0;a[3]=b[2];a[4]=b[3];a[5]=0;a[6]=b[4];a[7]=b[5];a[8]=1;return a};t.fromQuat=function(a,b){var d=b[0],g=b[1],f=b[2];b=b[3];var c=d+d,e=g+g,h=f+f;d*=c;var m=g*c;g*=e;var k=f*c,n=f*e;f*=h;c*=b;e*=b;b*=h;a[0]=1-g-f;a[3]=m-b;a[6]=k+e;a[1]=m+b;a[4]=1-d-f;a[7]=n-c;a[2]=k-e;a[5]=n+c;a[8]=1-d-g;return a};t.normalFromMat4=function(a,b){var d=b[0],g=b[1],f=b[2],c=b[3],e=b[4],h=b[5],m=b[6],
k=b[7],n=b[8],l=b[9],r=b[10],p=b[11],v=b[12],q=b[13],B=b[14];b=b[15];var t=d*h-g*e,w=d*m-f*e,A=d*k-c*e,C=g*m-f*h,E=g*k-c*h,F=f*k-c*m,I=n*q-l*v,H=n*B-r*v;n=n*b-p*v;var G=l*B-r*q;l=l*b-p*q;r=r*b-p*B;p=t*r-w*l+A*G+C*n-E*H+F*I;if(!p)return null;p=1/p;a[0]=(h*r-m*l+k*G)*p;a[1]=(m*n-e*r-k*H)*p;a[2]=(e*l-h*n+k*I)*p;a[3]=(f*l-g*r-c*G)*p;a[4]=(d*r-f*n+c*H)*p;a[5]=(g*n-d*l-c*I)*p;a[6]=(q*F-B*E+b*C)*p;a[7]=(B*A-v*F-b*w)*p;a[8]=(v*E-q*A+b*t)*p;return a};t.str=function(a){return"mat3("+a[0]+", "+a[1]+", "+a[2]+
", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"};t.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2))};"undefined"!==typeof a&&(a.mat3=t);var r={create:function(){var a=new e(16);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a},clone:function(a){var b=new e(16);b[0]=a[0];
b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=
0;a[15]=1;return a},transpose:function(a,b){if(a===b){var d=b[1],g=b[2],f=b[3],c=b[6],e=b[7],h=b[11];a[1]=b[4];a[2]=b[8];a[3]=b[12];a[4]=d;a[6]=b[9];a[7]=b[13];a[8]=g;a[9]=c;a[11]=b[14];a[12]=f;a[13]=e;a[14]=h}else a[0]=b[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=b[10],a[11]=b[14],a[12]=b[3],a[13]=b[7],a[14]=b[11],a[15]=b[15];return a},invert:function(a,b){var d=b[0],g=b[1],c=b[2],f=b[3],e=b[4],h=b[5],m=b[6],k=b[7],n=b[8],l=b[9],r=b[10],p=
b[11],v=b[12],q=b[13],B=b[14];b=b[15];var t=d*h-g*e,w=d*m-c*e,A=d*k-f*e,C=g*m-c*h,E=g*k-f*h,F=c*k-f*m,I=n*q-l*v,H=n*B-r*v,G=n*b-p*v,L=l*B-r*q,N=l*b-p*q,P=r*b-p*B,J=t*P-w*N+A*L+C*G-E*H+F*I;if(!J)return null;J=1/J;a[0]=(h*P-m*N+k*L)*J;a[1]=(c*N-g*P-f*L)*J;a[2]=(q*F-B*E+b*C)*J;a[3]=(r*E-l*F-p*C)*J;a[4]=(m*G-e*P-k*H)*J;a[5]=(d*P-c*G+f*H)*J;a[6]=(B*A-v*F-b*w)*J;a[7]=(n*F-r*A+p*w)*J;a[8]=(e*N-h*G+k*I)*J;a[9]=(g*G-d*N-f*I)*J;a[10]=(v*E-q*A+b*t)*J;a[11]=(l*A-n*E-p*t)*J;a[12]=(h*H-e*L-m*I)*J;a[13]=(d*L-g*
H+c*I)*J;a[14]=(q*w-v*C-B*t)*J;a[15]=(n*C-l*w+r*t)*J;return a},adjoint:function(a,b){var d=b[0],g=b[1],c=b[2],f=b[3],e=b[4],h=b[5],m=b[6],k=b[7],n=b[8],l=b[9],r=b[10],p=b[11],v=b[12],q=b[13],B=b[14];b=b[15];a[0]=h*(r*b-p*B)-l*(m*b-k*B)+q*(m*p-k*r);a[1]=-(g*(r*b-p*B)-l*(c*b-f*B)+q*(c*p-f*r));a[2]=g*(m*b-k*B)-h*(c*b-f*B)+q*(c*k-f*m);a[3]=-(g*(m*p-k*r)-h*(c*p-f*r)+l*(c*k-f*m));a[4]=-(e*(r*b-p*B)-n*(m*b-k*B)+v*(m*p-k*r));a[5]=d*(r*b-p*B)-n*(c*b-f*B)+v*(c*p-f*r);a[6]=-(d*(m*b-k*B)-e*(c*b-f*B)+v*(c*k-f*
m));a[7]=d*(m*p-k*r)-e*(c*p-f*r)+n*(c*k-f*m);a[8]=e*(l*b-p*q)-n*(h*b-k*q)+v*(h*p-k*l);a[9]=-(d*(l*b-p*q)-n*(g*b-f*q)+v*(g*p-f*l));a[10]=d*(h*b-k*q)-e*(g*b-f*q)+v*(g*k-f*h);a[11]=-(d*(h*p-k*l)-e*(g*p-f*l)+n*(g*k-f*h));a[12]=-(e*(l*B-r*q)-n*(h*B-m*q)+v*(h*r-m*l));a[13]=d*(l*B-r*q)-n*(g*B-c*q)+v*(g*r-c*l);a[14]=-(d*(h*B-m*q)-e*(g*B-c*q)+v*(g*m-c*h));a[15]=d*(h*r-m*l)-e*(g*r-c*l)+n*(g*m-c*h);return a},determinant:function(a){var b=a[0],d=a[1],g=a[2],c=a[3],f=a[4],e=a[5],h=a[6],m=a[7],k=a[8],n=a[9],l=
a[10],r=a[11],p=a[12],q=a[13],v=a[14];a=a[15];return(b*e-d*f)*(l*a-r*v)-(b*h-g*f)*(n*a-r*q)+(b*m-c*f)*(n*v-l*q)+(d*h-g*e)*(k*a-r*p)-(d*m-c*e)*(k*v-l*p)+(g*m-c*h)*(k*q-n*p)},multiply:function(a,b,d){var g=b[0],c=b[1],f=b[2],e=b[3],h=b[4],m=b[5],k=b[6],n=b[7],l=b[8],r=b[9],p=b[10],q=b[11],v=b[12],B=b[13],t=b[14];b=b[15];var w=d[0],A=d[1],C=d[2],E=d[3];a[0]=w*g+A*h+C*l+E*v;a[1]=w*c+A*m+C*r+E*B;a[2]=w*f+A*k+C*p+E*t;a[3]=w*e+A*n+C*q+E*b;w=d[4];A=d[5];C=d[6];E=d[7];a[4]=w*g+A*h+C*l+E*v;a[5]=w*c+A*m+C*r+
E*B;a[6]=w*f+A*k+C*p+E*t;a[7]=w*e+A*n+C*q+E*b;w=d[8];A=d[9];C=d[10];E=d[11];a[8]=w*g+A*h+C*l+E*v;a[9]=w*c+A*m+C*r+E*B;a[10]=w*f+A*k+C*p+E*t;a[11]=w*e+A*n+C*q+E*b;w=d[12];A=d[13];C=d[14];E=d[15];a[12]=w*g+A*h+C*l+E*v;a[13]=w*c+A*m+C*r+E*B;a[14]=w*f+A*k+C*p+E*t;a[15]=w*e+A*n+C*q+E*b;return a}};r.mul=r.multiply;r.translate=function(a,b,d){var g=d[0],c=d[1];d=d[2];if(b===a)a[12]=b[0]*g+b[4]*c+b[8]*d+b[12],a[13]=b[1]*g+b[5]*c+b[9]*d+b[13],a[14]=b[2]*g+b[6]*c+b[10]*d+b[14],a[15]=b[3]*g+b[7]*c+b[11]*d+b[15];
else{var f=b[0];var e=b[1];var h=b[2];var m=b[3];var k=b[4];var n=b[5];var l=b[6];var r=b[7];var p=b[8];var q=b[9];var v=b[10];var B=b[11];a[0]=f;a[1]=e;a[2]=h;a[3]=m;a[4]=k;a[5]=n;a[6]=l;a[7]=r;a[8]=p;a[9]=q;a[10]=v;a[11]=B;a[12]=f*g+k*c+p*d+b[12];a[13]=e*g+n*c+q*d+b[13];a[14]=h*g+l*c+v*d+b[14];a[15]=m*g+r*c+B*d+b[15]}return a};r.scale=function(a,b,d){var g=d[0],c=d[1];d=d[2];a[0]=b[0]*g;a[1]=b[1]*g;a[2]=b[2]*g;a[3]=b[3]*g;a[4]=b[4]*c;a[5]=b[5]*c;a[6]=b[6]*c;a[7]=b[7]*c;a[8]=b[8]*d;a[9]=b[9]*d;a[10]=
b[10]*d;a[11]=b[11]*d;a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a};r.rotate=function(a,b,d,g){var f=g[0],e=g[1];g=g[2];var h=Math.sqrt(f*f+e*e+g*g);if(Math.abs(h)<c)return null;h=1/h;f*=h;e*=h;g*=h;var k=Math.sin(d);var m=Math.cos(d);var n=1-m;d=b[0];h=b[1];var l=b[2];var r=b[3];var p=b[4];var q=b[5];var v=b[6];var B=b[7];var w=b[8];var A=b[9];var t=b[10];var C=b[11];var S=f*f*n+m;var E=e*f*n+g*k;var F=g*f*n-e*k;var I=f*e*n-g*k;var H=e*e*n+m;var G=g*e*n+f*k;var L=f*g*n+e*k;f=e*g*n-f*
k;e=g*g*n+m;a[0]=d*S+p*E+w*F;a[1]=h*S+q*E+A*F;a[2]=l*S+v*E+t*F;a[3]=r*S+B*E+C*F;a[4]=d*I+p*H+w*G;a[5]=h*I+q*H+A*G;a[6]=l*I+v*H+t*G;a[7]=r*I+B*H+C*G;a[8]=d*L+p*f+w*e;a[9]=h*L+q*f+A*e;a[10]=l*L+v*f+t*e;a[11]=r*L+B*f+C*e;b!==a&&(a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);return a};r.rotateX=function(a,b,d){var g=Math.sin(d);d=Math.cos(d);var c=b[4],f=b[5],e=b[6],h=b[7],m=b[8],k=b[9],n=b[10],l=b[11];b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);
a[4]=c*d+m*g;a[5]=f*d+k*g;a[6]=e*d+n*g;a[7]=h*d+l*g;a[8]=m*d-c*g;a[9]=k*d-f*g;a[10]=n*d-e*g;a[11]=l*d-h*g;return a};r.rotateY=function(a,b,d){var g=Math.sin(d);d=Math.cos(d);var c=b[0],f=b[1],e=b[2],h=b[3],m=b[8],k=b[9],n=b[10],l=b[11];b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=c*d-m*g;a[1]=f*d-k*g;a[2]=e*d-n*g;a[3]=h*d-l*g;a[8]=c*g+m*d;a[9]=f*g+k*d;a[10]=e*g+n*d;a[11]=h*g+l*d;return a};r.rotateZ=function(a,b,d){var g=Math.sin(d);d=Math.cos(d);
var c=b[0],f=b[1],e=b[2],h=b[3],m=b[4],k=b[5],n=b[6],l=b[7];b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=c*d+m*g;a[1]=f*d+k*g;a[2]=e*d+n*g;a[3]=h*d+l*g;a[4]=m*d-c*g;a[5]=k*d-f*g;a[6]=n*d-e*g;a[7]=l*d-h*g;return a};r.fromRotationTranslation=function(a,b,d){var g=b[0],c=b[1],f=b[2],e=b[3],h=g+g,m=c+c,k=f+f;b=g*h;var n=g*m;g*=k;var l=c*m;c*=k;f*=k;h*=e;m*=e;e*=k;a[0]=1-(l+f);a[1]=n+e;a[2]=g-m;a[3]=0;a[4]=n-e;a[5]=1-(b+f);a[6]=c+h;a[7]=0;a[8]=
g+m;a[9]=c-h;a[10]=1-(b+l);a[11]=0;a[12]=d[0];a[13]=d[1];a[14]=d[2];a[15]=1;return a};r.fromQuat=function(a,b){var d=b[0],g=b[1],c=b[2];b=b[3];var f=d+d,e=g+g,h=c+c;d*=f;var m=g*f;g*=e;var k=c*f,n=c*e;c*=h;f*=b;e*=b;b*=h;a[0]=1-g-c;a[1]=m+b;a[2]=k-e;a[3]=0;a[4]=m-b;a[5]=1-d-c;a[6]=n+f;a[7]=0;a[8]=k+e;a[9]=n-f;a[10]=1-d-g;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};r.frustum=function(a,b,d,g,c,e,h){var f=1/(d-b),u=1/(c-g),D=1/(e-h);a[0]=2*e*f;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*e*u;a[6]=0;a[7]=
0;a[8]=(d+b)*f;a[9]=(c+g)*u;a[10]=(h+e)*D;a[11]=-1;a[12]=0;a[13]=0;a[14]=h*e*2*D;a[15]=0;return a};r.perspective=function(a,b,d,g,c){b=1/Math.tan(b/2);var f=1/(g-c);a[0]=b/d;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(c+g)*f;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*c*g*f;a[15]=0;return a};r.ortho=function(a,b,d,g,c,e,h){var f=1/(b-d),u=1/(g-c),D=1/(e-h);a[0]=-2*f;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*u;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*D;a[11]=0;a[12]=(b+d)*f;a[13]=(c+g)*u;a[14]=
(h+e)*D;a[15]=1;return a};r.lookAt=function(a,b,d,g){var f=b[0],e=b[1];b=b[2];var h=g[0];var k=g[1];var m=g[2];var n=d[0];g=d[1];var l=d[2];if(Math.abs(f-n)<c&&Math.abs(e-g)<c&&Math.abs(b-l)<c)return r.identity(a);d=f-n;g=e-g;n=b-l;var p=1/Math.sqrt(d*d+g*g+n*n);d*=p;g*=p;n*=p;l=k*n-m*g;m=m*d-h*n;h=h*g-k*d;(p=Math.sqrt(l*l+m*m+h*h))?(p=1/p,l*=p,m*=p,h*=p):h=m=l=0;k=g*h-n*m;var q=n*l-d*h;var v=d*m-g*l;(p=Math.sqrt(k*k+q*q+v*v))?(p=1/p,k*=p,q*=p,v*=p):v=q=k=0;a[0]=l;a[1]=k;a[2]=d;a[3]=0;a[4]=m;a[5]=
q;a[6]=g;a[7]=0;a[8]=h;a[9]=v;a[10]=n;a[11]=0;a[12]=-(l*f+m*e+h*b);a[13]=-(k*f+q*e+v*b);a[14]=-(d*f+g*e+n*b);a[15]=1;return a};r.str=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"};r.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[6],2)+Math.pow(a[7],
2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))};"undefined"!==typeof a&&(a.mat4=r);var A={create:function(){var a=new e(4);a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a}};A.rotationTo=function(){var a=p.create(),b=p.fromValues(1,0,0),d=p.fromValues(0,1,0);return function(g,c,e){var f=p.dot(c,e);if(-.999999>f)return p.cross(a,b,c),1E-6>p.length(a)&&p.cross(a,d,c),p.normalize(a,a),A.setAxisAngle(g,a,Math.PI),g;
if(.999999<f)return g[0]=0,g[1]=0,g[2]=0,g[3]=1,g;p.cross(a,c,e);g[0]=a[0];g[1]=a[1];g[2]=a[2];g[3]=1+f;return A.normalize(g,g)}}();A.setAxes=function(){var a=t.create();return function(b,d,g,c){a[0]=g[0];a[3]=g[1];a[6]=g[2];a[1]=c[0];a[4]=c[1];a[7]=c[2];a[2]=-d[0];a[5]=-d[1];a[8]=-d[2];return A.normalize(b,A.fromMat3(b,a))}}();A.clone=q.clone;A.fromValues=q.fromValues;A.copy=q.copy;A.set=q.set;A.identity=function(a){a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a};A.setAxisAngle=function(a,b,d){d*=.5;var g=
Math.sin(d);a[0]=g*b[0];a[1]=g*b[1];a[2]=g*b[2];a[3]=Math.cos(d);return a};A.add=q.add;A.multiply=function(a,b,d){var g=b[0],c=b[1],e=b[2];b=b[3];var f=d[0],h=d[1],m=d[2];d=d[3];a[0]=g*d+b*f+c*m-e*h;a[1]=c*d+b*h+e*f-g*m;a[2]=e*d+b*m+g*h-c*f;a[3]=b*d-g*f-c*h-e*m;return a};A.mul=A.multiply;A.scale=q.scale;A.rotateX=function(a,b,d){d*=.5;var g=b[0],c=b[1],e=b[2];b=b[3];var f=Math.sin(d);d=Math.cos(d);a[0]=g*d+b*f;a[1]=c*d+e*f;a[2]=e*d-c*f;a[3]=b*d-g*f;return a};A.rotateY=function(a,b,d){d*=.5;var g=
b[0],c=b[1],e=b[2];b=b[3];var f=Math.sin(d);d=Math.cos(d);a[0]=g*d-e*f;a[1]=c*d+b*f;a[2]=e*d+g*f;a[3]=b*d-c*f;return a};A.rotateZ=function(a,b,d){d*=.5;var g=b[0],c=b[1],e=b[2];b=b[3];var f=Math.sin(d);d=Math.cos(d);a[0]=g*d+c*f;a[1]=c*d-g*f;a[2]=e*d+b*f;a[3]=b*d-e*f;return a};A.calculateW=function(a,b){var d=b[0],g=b[1];b=b[2];a[0]=d;a[1]=g;a[2]=b;a[3]=-Math.sqrt(Math.abs(1-d*d-g*g-b*b));return a};A.dot=q.dot;A.lerp=q.lerp;A.slerp=function(a,b,d,g){var c=b[0],e=b[1],f=b[2];b=b[3];var h=d[0],m=d[1],
k=d[2];d=d[3];var n=c*h+e*m+f*k+b*d;0>n&&(n=-n,h=-h,m=-m,k=-k,d=-d);if(1E-6<1-n){var l=Math.acos(n);var p=Math.sin(l);n=Math.sin((1-g)*l)/p;g=Math.sin(g*l)/p}else n=1-g;a[0]=n*c+g*h;a[1]=n*e+g*m;a[2]=n*f+g*k;a[3]=n*b+g*d;return a};A.invert=function(a,b){var d=b[0],g=b[1],c=b[2];b=b[3];var e=d*d+g*g+c*c+b*b;e=e?1/e:0;a[0]=-d*e;a[1]=-g*e;a[2]=-c*e;a[3]=b*e;return a};A.conjugate=function(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];a[3]=b[3];return a};A.length=q.length;A.len=A.length;A.squaredLength=q.squaredLength;
A.sqrLen=A.squaredLength;A.normalize=q.normalize;A.fromMat3=function(a,b){var d=b[0]+b[4]+b[8];if(0<d)d=Math.sqrt(d+1),a[3]=.5*d,d=.5/d,a[0]=(b[7]-b[5])*d,a[1]=(b[2]-b[6])*d,a[2]=(b[3]-b[1])*d;else{var g=0;b[4]>b[0]&&(g=1);b[8]>b[3*g+g]&&(g=2);var c=(g+1)%3,e=(g+2)%3;d=Math.sqrt(b[3*g+g]-b[3*c+c]-b[3*e+e]+1);a[g]=.5*d;d=.5/d;a[3]=(b[3*e+c]-b[3*c+e])*d;a[c]=(b[3*c+g]+b[3*g+c])*d;a[e]=(b[3*e+g]+b[3*g+e])*d}return a};A.str=function(a){return"quat("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};"undefined"!==
typeof a&&(a.quat=A)})("undefined"===typeof l?"undefined"!==typeof window?window:a:l)})(this)},{}],22:[function(a,c,l){c.exports=function(){throw Error("ws does not work in the browser. Browser clients must use the native WebSocket object");}},{}],23:[function(a,c,l){function k(){throw Error("setTimeout has not been defined");}function e(){throw Error("clearTimeout has not been defined");}function h(a){if(p===setTimeout)return setTimeout(a,0);if((p===k||!p)&&setTimeout)return p=setTimeout,setTimeout(a,
0);try{return p(a,0)}catch(d){try{return p.call(null,a,0)}catch(g){return p.call(this,a,0)}}}function n(a){if(q===clearTimeout)return clearTimeout(a);if((q===e||!q)&&clearTimeout)return q=clearTimeout,clearTimeout(a);try{return q(a)}catch(d){try{return q.call(null,a)}catch(g){return q.call(this,a)}}}function B(){r&&A&&(r=!1,A.length?t=A.concat(t):f=-1,t.length&&v())}function v(){if(!r){var a=h(B);r=!0;for(var d=t.length;d;){A=t;for(t=[];++f<d;)A&&A[f].run();f=-1;d=t.length}A=null;r=!1;n(a)}}function C(a,
d){this.fun=a;this.array=d}function w(){}a=c.exports={};try{var p="function"===typeof setTimeout?setTimeout:k}catch(b){p=k}try{var q="function"===typeof clearTimeout?clearTimeout:e}catch(b){q=e}var t=[],r=!1,A,f=-1;a.nextTick=function(a){var b=Array(arguments.length-1);if(1<arguments.length)for(var g=1;g<arguments.length;g++)b[g-1]=arguments[g];t.push(new C(a,b));1!==t.length||r||h(v)};C.prototype.run=function(){this.fun.apply(null,this.array)};a.title="browser";a.browser=!0;a.env={};a.argv=[];a.version=
"";a.versions={};a.on=w;a.addListener=w;a.once=w;a.off=w;a.removeListener=w;a.removeAllListeners=w;a.emit=w;a.prependListener=w;a.prependOnceListener=w;a.listeners=function(a){return[]};a.binding=function(a){throw Error("process.binding is not supported");};a.cwd=function(){return"/"};a.chdir=function(a){throw Error("process.chdir is not supported");};a.umask=function(){return 0}},{}],24:[function(a,c,l){(function(a){(function(){(function(a,h){"object"===typeof l&&"undefined"!==typeof c?c.exports=
h():(a=a||self,function(){var c=a._,e=a._=h();e.noConflict=function(){a._=c;return e}}())})(this,function(){function c(a,b){b=null==b?a.length-1:+b;return function(){for(var d=Math.max(arguments.length-b,0),g=Array(d),c=0;c<d;c++)g[c]=arguments[c+b];switch(b){case 0:return a.call(this,g);case 1:return a.call(this,arguments[0],g);case 2:return a.call(this,arguments[0],arguments[1],g)}d=Array(b+1);for(c=0;c<b;c++)d[c]=arguments[c];d[b]=g;return a.apply(this,d)}}function h(a){var b=typeof a;return"function"===
b||"object"===b&&!!a}function k(a){return void 0===a}function l(a){return!0===a||!1===a||"[object Boolean]"===ka.call(a)}function v(a){var b="[object "+a+"]";return function(a){return ka.call(a)===b}}function C(a){return null!=a&&O(a.getInt8)&&Oa(a.buffer)}function w(a,b){return null!=a&&Bb.call(a,b)}function p(a){return Pa(a)&&Cb(a)}function q(a){return function(){return a}}function t(a){return function(b){b=a(b);return"number"==typeof b&&0<=b&&b<=Db}}function r(a){return function(b){return null==
b?void 0:b[a]}}function A(a){return Qa?Qa(a)&&!qa(a):Eb(a)&&Fb.test(ka.call(a))}function f(a){for(var b={},d=a.length,g=0;g<d;++g)b[a[g]]=!0;return{contains:function(a){return b[a]},push:function(d){b[d]=!0;return a.push(d)}}}function b(a,b){b=f(b);var d=Ra.length,g=a.constructor;g=O(g)&&g.prototype||va;var c="constructor";for(w(a,c)&&!b.contains(c)&&b.push(c);d--;)c=Ra[d],c in a&&a[c]!==g[c]&&!b.contains(c)&&b.push(c)}function d(a){if(!h(a))return[];if(Sa)return Sa(a);var d=[],g;for(g in a)w(a,g)&&
d.push(g);Ta&&b(a,d);return d}function g(a,b){var g=d(b),c=g.length;if(null==a)return!c;a=Object(a);for(var e=0;e<c;e++){var f=g[e];if(b[f]!==a[f]||!(f in a))return!1}return!0}function u(a){if(a instanceof u)return a;if(!(this instanceof u))return new u(a);this._wrapped=a}function D(a,b,d,g){if(a===b)return 0!==a||1/a===1/b;if(null==a||null==b)return!1;if(a!==a)return b!==b;var c=typeof a;return"function"!==c&&"object"!==c&&"object"!=typeof b?!1:na(a,b,d,g)}function na(a,b,g,c){a instanceof u&&(a=
a._wrapped);b instanceof u&&(b=b._wrapped);var e=ka.call(a);if(e!==ka.call(b))return!1;if(Ua&&"[object Object]"==e&&qa(a)){if(!qa(b))return!1;e="[object DataView]"}switch(e){case "[object RegExp]":case "[object String]":return""+a===""+b;case "[object Number]":return+a!==+a?+b!==+b:0===+a?1/+a===1/b:+a===+b;case "[object Date]":case "[object Boolean]":return+a===+b;case "[object Symbol]":return Va.valueOf.call(a)===Va.valueOf.call(b);case "[object ArrayBuffer]":case "[object DataView]":return na(new Uint8Array(a.buffer||
a,a.byteOffset||0,la(a)),new Uint8Array(b.buffer||b,b.byteOffset||0,la(b)),g,c)}e="[object Array]"===e;if(!e&&Wa(a)){if(la(a)!==la(b))return!1;if(a.buffer===b.buffer&&a.byteOffset===b.byteOffset)return!0;e=!0}if(!e){if("object"!=typeof a||"object"!=typeof b)return!1;var f=a.constructor,h=b.constructor;if(f!==h&&!(O(f)&&f instanceof f&&O(h)&&h instanceof h)&&"constructor"in a&&"constructor"in b)return!1}g=g||[];c=c||[];for(f=g.length;f--;)if(g[f]===a)return c[f]===b;g.push(a);c.push(b);if(e){f=a.length;
if(f!==b.length)return!1;for(;f--;)if(!D(a[f],b[f],g,c))return!1}else{e=d(a);f=e.length;if(d(b).length!==f)return!1;for(;f--;)if(h=e[f],!w(b,h)||!D(a[h],b[h],g,c))return!1}g.pop();c.pop();return!0}function T(a){if(!h(a))return[];var d=[],g;for(g in a)d.push(g);Ta&&b(a,d);return d}function m(a){var b=Q(a);return function(d){if(null==d)return!1;var g=T(d);if(Q(g))return!1;for(g=0;g<b;g++)if(!O(d[a[g]]))return!1;return a!==Ya||!O(d[wa])}}function K(a){for(var b=d(a),g=b.length,c=Array(g),e=0;e<g;e++)c[e]=
a[b[e]];return c}function ha(a){for(var b={},g=d(a),c=0,e=g.length;c<e;c++)b[a[g[c]]]=g[c];return b}function X(a){var b=[],d;for(d in a)O(a[d])&&b.push(d);return b.sort()}function ba(a,b){return function(d){var g=arguments.length;b&&(d=Object(d));if(2>g||null==d)return d;for(var c=1;c<g;c++)for(var e=arguments[c],f=a(e),u=f.length,h=0;h<u;h++){var m=f[h];b&&void 0!==d[m]||(d[m]=e[m])}return d}}function oa(){return function(){}}function ca(a){if(!h(a))return{};if(Za)return Za(a);var b=oa();b.prototype=
a;a=new b;b.prototype=null;return a}function W(a){return h(a)?Y(a)?a.slice():$a({},a):a}function pa(a){return Y(a)?a:[a]}function ia(a,b){for(var d=b.length,g=0;g<d;g++){if(null==a)return;a=a[b[g]]}return d?a:void 0}function da(a,b,d){a=ia(a,u.toPath(b));return k(a)?d:a}function ja(a){return a}function S(a){a=ra({},a);return function(b){return g(b,a)}}function E(a){a=u.toPath(a);return function(b){return ia(b,a)}}function F(a,b,d){if(void 0===b)return a;switch(null==d?3:d){case 1:return function(d){return a.call(b,
d)};case 3:return function(d,g,c){return a.call(b,d,g,c)};case 4:return function(d,g,c,e){return a.call(b,d,g,c,e)}}return function(){return a.apply(b,arguments)}}function I(a,b,d){return null==a?ja:O(a)?F(a,b,d):h(a)&&!Y(a)?S(a):E(a)}function H(a,b){return I(a,b,Infinity)}function G(a,b,d){return u.iteratee!==H?u.iteratee(a,b):I(a,b,d)}function L(){}function N(a,b){null==b&&(b=a,a=0);return a+Math.floor(Math.random()*(b-a+1))}function P(a){var b=function(b){return a[b]},g="(?:"+d(a).join("|")+")",
c=RegExp(g),e=RegExp(g,"g");return function(a){a=null==a?"":""+a;return c.test(a)?a.replace(e,b):a}}function J(a){return"\\"+Gb[a]}function M(a,b,d,g,c){if(!(g instanceof b))return a.apply(d,c);b=ca(a.prototype);a=a.apply(b,c);return h(a)?a:b}function Z(a,b,d,g){g=g||[];if(!b&&0!==b)b=Infinity;else if(0>=b)return g.concat(a);for(var c=g.length,e=0,f=Q(a);e<f;e++){var u=a[e];if(R(u)&&(Y(u)||xa(u)))if(1<b)Z(u,b-1,d,g),c=g.length;else for(var h=0,m=u.length;h<m;)g[c++]=u[h++];else d||(g[c++]=u)}return g}
function ya(a){return function(){return!a.apply(this,arguments)}}function ab(a,b){var d;return function(){0<--a&&(d=b.apply(this,arguments));1>=a&&(b=null);return d}}function bb(a,b,g){b=G(b,g);g=d(a);for(var c,e=0,f=g.length;e<f;e++)if(c=g[e],b(a[c],c,a))return c}function cb(a){return function(b,d,g){d=G(d,g);g=Q(b);for(var c=0<a?0:g-1;0<=c&&c<g;c+=a)if(d(b[c],c,b))return c;return-1}}function db(a,b,d,g){d=G(d,g,1);b=d(b);g=0;for(var c=Q(a);g<c;){var e=Math.floor((g+c)/2);d(a[e])<b?g=e+1:c=e}return g}
function eb(a,b,d){return function(g,c,e){var f=0,u=Q(g);if("number"==typeof e)0<a?f=0<=e?e:Math.max(e+u,f):u=0<=e?Math.min(e+1,u):e+u+1;else if(d&&e&&u)return e=d(g,c),g[e]===c?e:-1;if(c!==c)return e=b(ma.call(g,f,u),p),0<=e?e+f:-1;for(e=0<a?f:u-1;0<=e&&e<u;e+=a)if(g[e]===c)return e;return-1}}function za(a,b,d){b=(R(a)?Aa:bb)(a,b,d);if(void 0!==b&&-1!==b)return a[b]}function U(a,b,g){b=F(b,g);var c;if(R(a))for(g=0,c=a.length;g<c;g++)b(a[g],g,a);else{var e=d(a);g=0;for(c=e.length;g<c;g++)b(a[e[g]],
e[g],a)}return a}function aa(a,b,g){b=G(b,g);g=!R(a)&&d(a);for(var c=(g||a).length,e=Array(c),f=0;f<c;f++){var u=g?g[f]:f;e[f]=b(a[u],u,a)}return e}function fb(a){return function(b,g,c,e){var f=3<=arguments.length,u=F(g,e,4),h=c,m=!R(b)&&d(b),k=(m||b).length,n=0<a?0:k-1;f||(h=b[m?m[n]:n],n+=a);for(;0<=n&&n<k;n+=a)f=m?m[n]:n,h=u(h,b[f],f,b);return h}}function ea(a,b,d){var g=[];b=G(b,d);U(a,function(a,d,c){b(a,d,c)&&g.push(a)});return g}function gb(a,b,g){b=G(b,g);g=!R(a)&&d(a);for(var c=(g||a).length,
e=0;e<c;e++){var f=g?g[e]:e;if(!b(a[f],f,a))return!1}return!0}function hb(a,b,g){b=G(b,g);g=!R(a)&&d(a);for(var c=(g||a).length,e=0;e<c;e++){var f=g?g[e]:e;if(b(a[f],f,a))return!0}return!1}function V(a,b,d,g){R(a)||(a=K(a));if("number"!=typeof d||g)d=0;return 0<=ib(a,b,d)}function Ba(a,b){return aa(a,E(b))}function jb(a,b,d){var g=-Infinity,c=-Infinity,e;if(null==b||"number"==typeof b&&"object"!=typeof a[0]&&null!=a){a=R(a)?a:K(a);for(var f=0,u=a.length;f<u;f++)d=a[f],null!=d&&d>g&&(g=d)}else b=G(b,
d),U(a,function(a,d,f){e=b(a,d,f);if(e>c||-Infinity===e&&-Infinity===g)g=a,c=e});return g}function kb(a,b,d){if(null==b||d)return R(a)||(a=K(a)),a[N(a.length-1)];a=R(a)?W(a):K(a);d=Q(a);b=Math.max(Math.min(b,d),0);--d;for(var g=0;g<b;g++){var c=N(g,d),e=a[g];a[g]=a[c];a[c]=e}return a.slice(0,b)}function sa(a,b){return function(d,g,c){var e=b?[[],[]]:{};g=G(g,c);U(d,function(b,c){c=g(b,c,d);a(e,b,c)});return e}}function Hb(a,b,d){return b in d}function lb(a,b,d){return ma.call(a,0,Math.max(0,a.length-
(null==b||d?1:b)))}function Ca(a,b,d){return null==a||1>a.length?null==b||d?void 0:[]:null==b||d?a[0]:lb(a,a.length-b)}function ta(a,b,d){return ma.call(a,null==b||d?1:b)}function Da(a,b,d,g){l(b)||(g=d,d=b,b=!1);null!=d&&(d=G(d,g));g=[];for(var c=[],e=0,f=Q(a);e<f;e++){var u=a[e],h=d?d(u,e,a):u;b&&!d?(e&&c===h||g.push(u),c=h):d?V(c,h)||(c.push(h),g.push(u)):V(g,u)||g.push(u)}return g}function Ea(a){for(var b=a&&jb(a,Q).length||0,d=Array(b),g=0;g<b;g++)d[g]=Ba(a,g);return d}function Fa(a,b){return a._chain?
u(b).chain():b}function mb(a){U(X(a),function(b){var d=u[b]=a[b];u.prototype[b]=function(){var a=[this._wrapped];Ib.apply(a,arguments);return Fa(this,d.apply(u,a))}});return u}var nb="object"==typeof self&&self.self===self&&self||"object"==typeof a&&a.global===a&&a||Function("return this")()||{},ua=Array.prototype,va=Object.prototype,Va="undefined"!==typeof Symbol?Symbol.prototype:null,Ib=ua.push,ma=ua.slice,ka=va.toString,Bb=va.hasOwnProperty,ob="undefined"!==typeof ArrayBuffer,Jb="undefined"!==
typeof DataView,Kb=Array.isArray,Sa=Object.keys,Za=Object.create,Qa=ob&&ArrayBuffer.isView,Cb=isNaN,Lb=isFinite,Ta=!{toString:null}.propertyIsEnumerable("toString"),Ra="valueOf isPrototypeOf toString propertyIsEnumerable hasOwnProperty toLocaleString".split(" "),Db=Math.pow(2,53)-1,Ga=v("String"),Pa=v("Number"),Mb=v("Date"),Nb=v("RegExp"),Ob=v("Error"),pb=v("Symbol"),Oa=v("ArrayBuffer"),qb=v("Function"),Pb=nb.document&&nb.document.childNodes;"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=
typeof Pb&&(qb=function(a){return"function"==typeof a||!1});var O=qb,rb=v("Object"),Ua=Jb&&rb(new DataView(new ArrayBuffer(8))),Ha="undefined"!==typeof Map&&rb(new Map),Qb=v("DataView"),qa=Ua?C:Qb,Y=Kb||v("Array"),Ia=v("Arguments");(function(){Ia(arguments)||(Ia=function(a){return w(a,"callee")})})();var xa=Ia,la=r("byteLength"),Eb=t(la),Fb=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/,Wa=ob?A:q(!1),Q=r("length");u.VERSION="1.12.0";u.prototype.value=function(){return this._wrapped};
u.prototype.valueOf=u.prototype.toJSON=u.prototype.value;u.prototype.toString=function(){return String(this._wrapped)};var wa="forEach",Ja=["clear","delete"],sb=["get","has","set"],Rb=Ja.concat(wa,sb),Ya=Ja.concat(sb),Sb=["add"].concat(Ja,wa,"has"),Tb=Ha?m(Rb):v("Map"),Ub=Ha?m(Ya):v("WeakMap"),Vb=Ha?m(Sb):v("Set"),Wb=v("WeakSet"),$a=ba(T),ra=ba(d),tb=ba(T,!0);u.toPath=pa;u.iteratee=H;var Ka=Date.now||function(){return(new Date).getTime()},ub={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;",
"`":"&#x60;"},Xb=P(ub),Yb=ha(ub),Zb=P(Yb),$b=u.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},La=/(.)^/,Gb={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},ac=/\\|'|\r|\n|\u2028|\u2029/g,bc=0,fa=c(function(a,b){var d=fa.placeholder,g=function(){for(var c=0,e=b.length,f=Array(e),u=0;u<e;u++)f[u]=b[u]===d?arguments[c++]:b[u];for(;c<arguments.length;)f.push(arguments[c++]);return M(a,g,this,this,f)};return g});fa.placeholder=
u;var vb=c(function(a,b,d){if(!O(a))throw new TypeError("Bind must be called on a function");var g=c(function(c){return M(a,g,b,this,d.concat(c))});return g}),R=t(Q),cc=c(function(a,b){b=Z(b,!1,!1);var d=b.length;if(1>d)throw Error("bindAll must be passed function names");for(;d--;){var g=b[d];a[g]=vb(a[g],a)}return a}),Ma=c(function(a,b,d){return setTimeout(function(){return a.apply(null,d)},b)}),dc=fa(Ma,u,1),ec=fa(ab,2),Aa=cb(1),wb=cb(-1),ib=eb(1,Aa,db),fc=eb(-1,wb),Na=fb(1),xb=fb(-1),gc=c(function(a,
b,d){if(O(b))var g=b;else{b=u.toPath(b);var c=b.slice(0,-1);b=b[b.length-1]}return aa(a,function(a){var e=g;if(!e){c&&c.length&&(a=ia(a,c));if(null==a)return;e=a[b]}return null==e?e:e.apply(a,d)})}),hc=sa(function(a,b,d){w(a,d)?a[d].push(b):a[d]=[b]}),ic=sa(function(a,b,d){a[d]=b}),jc=sa(function(a,b,d){w(a,d)?a[d]++:a[d]=1}),kc=sa(function(a,b,d){a[d?0:1].push(b)},!0),lc=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g,yb=c(function(a,b){var d={},g=b[0];if(null==a)return d;O(g)?
(1<b.length&&(g=F(g,b[1])),b=T(a)):(g=Hb,b=Z(b,!1,!1),a=Object(a));for(var c=0,e=b.length;c<e;c++){var f=b[c],u=a[f];g(u,f,a)&&(d[f]=u)}return d}),mc=c(function(a,b){var d=b[0],g;O(d)?(d=ya(d),1<b.length&&(g=b[1])):(b=aa(Z(b,!1,!1),String),d=function(a,d){return!V(b,d)});return yb(a,d,g)}),zb=c(function(a,b){b=Z(b,!0,!0);return ea(a,function(a){return!V(b,a)})}),nc=c(function(a,b){return zb(a,b)}),oc=c(function(a){return Da(Z(a,!0,!0))}),pc=c(Ea);U("pop push reverse shift sort splice unshift".split(" "),
function(a){var b=ua[a];u.prototype[a]=function(){var d=this._wrapped;null!=d&&(b.apply(d,arguments),"shift"!==a&&"splice"!==a||0!==d.length||delete d[0]);return Fa(this,d)}});U(["concat","join","slice"],function(a){var b=ua[a];u.prototype[a]=function(){var a=this._wrapped;null!=a&&(a=b.apply(a,arguments));return Fa(this,a)}});var Ab=mb({__proto__:null,VERSION:"1.12.0",restArguments:c,isObject:h,isNull:function(a){return null===a},isUndefined:k,isBoolean:l,isElement:function(a){return!(!a||1!==a.nodeType)},
isString:Ga,isNumber:Pa,isDate:Mb,isRegExp:Nb,isError:Ob,isSymbol:pb,isArrayBuffer:Oa,isDataView:qa,isArray:Y,isFunction:O,isArguments:xa,isFinite:function(a){return!pb(a)&&Lb(a)&&!isNaN(parseFloat(a))},isNaN:p,isTypedArray:Wa,isEmpty:function(a){if(null==a)return!0;var b=Q(a);return"number"==typeof b&&(Y(a)||Ga(a)||xa(a))?0===b:0===Q(d(a))},isMatch:g,isEqual:function(a,b){return D(a,b)},isMap:Tb,isWeakMap:Ub,isSet:Vb,isWeakSet:Wb,keys:d,allKeys:T,values:K,pairs:function(a){for(var b=d(a),g=b.length,
c=Array(g),e=0;e<g;e++)c[e]=[b[e],a[b[e]]];return c},invert:ha,functions:X,methods:X,extend:$a,extendOwn:ra,assign:ra,defaults:tb,create:function(a,b){a=ca(a);b&&ra(a,b);return a},clone:W,tap:function(a,b){b(a);return a},get:da,has:function(a,b){b=u.toPath(b);for(var d=b.length,g=0;g<d;g++){var c=b[g];if(!w(a,c))return!1;a=a[c]}return!!d},mapObject:function(a,b,g){b=G(b,g);g=d(a);for(var c=g.length,e={},f=0;f<c;f++){var u=g[f];e[u]=b(a[u],u,a)}return e},identity:ja,constant:q,noop:L,toPath:pa,property:E,
propertyOf:function(a){return null==a?L:function(b){return da(a,b)}},matcher:S,matches:S,times:function(a,b,d){var g=Array(Math.max(0,a));b=F(b,d,1);for(d=0;d<a;d++)g[d]=b(d);return g},random:N,now:Ka,escape:Xb,unescape:Zb,templateSettings:$b,template:function(a,b,d){!b&&d&&(b=d);b=tb({},b,u.templateSettings);d=RegExp([(b.escape||La).source,(b.interpolate||La).source,(b.evaluate||La).source].join("|")+"|$","g");var g=0,c="__p+='";a.replace(d,function(b,d,e,f,u){c+=a.slice(g,u).replace(ac,J);g=u+b.length;
d?c+="'+\n((__t=("+d+"))==null?'':_.escape(__t))+\n'":e?c+="'+\n((__t=("+e+"))==null?'':__t)+\n'":f&&(c+="';\n"+f+"\n__p+='");return b});c+="';\n";b.variable||(c="with(obj||{}){\n"+c+"}\n");c="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+c+"return __p;\n";try{var e=new Function(b.variable||"obj","_",c)}catch(Xa){throw Xa.source=c,Xa;}d=function(a){return e.call(this,a,u)};d.source="function("+(b.variable||"obj")+"){\n"+c+"}";return d},result:function(a,
b,d){b=u.toPath(b);var g=b.length;if(!g)return O(d)?d.call(a):d;for(var c=0;c<g;c++){var e=null==a?void 0:a[b[c]];void 0===e&&(e=d,c=g);a=O(e)?e.call(a):e}return a},uniqueId:function(a){var b=++bc+"";return a?a+b:b},chain:function(a){a=u(a);a._chain=!0;return a},iteratee:H,partial:fa,bind:vb,bindAll:cc,memoize:function(a,b){var d=function(g){var c=d.cache,e=""+(b?b.apply(this,arguments):g);w(c,e)||(c[e]=a.apply(this,arguments));return c[e]};d.cache={};return d},delay:Ma,defer:dc,throttle:function(a,
b,d){var g,c,e,f,u=0;d||(d={});var h=function(){u=!1===d.leading?0:Ka();g=null;f=a.apply(c,e);g||(c=e=null)},m=function(){var m=Ka();u||!1!==d.leading||(u=m);var k=b-(m-u);c=this;e=arguments;0>=k||k>b?(g&&(clearTimeout(g),g=null),u=m,f=a.apply(c,e),g||(c=e=null)):g||!1===d.trailing||(g=setTimeout(h,k));return f};m.cancel=function(){clearTimeout(g);u=0;g=c=e=null};return m},debounce:function(a,b,d){var g,e,f=function(b,d){g=null;d&&(e=a.apply(b,d))},u=c(function(c){g&&clearTimeout(g);if(d){var u=!g;
g=setTimeout(f,b);u&&(e=a.apply(this,c))}else g=Ma(f,b,this,c);return e});u.cancel=function(){clearTimeout(g);g=null};return u},wrap:function(a,b){return fa(b,a)},negate:ya,compose:function(){var a=arguments,b=a.length-1;return function(){for(var d=b,g=a[b].apply(this,arguments);d--;)g=a[d].call(this,g);return g}},after:function(a,b){return function(){if(1>--a)return b.apply(this,arguments)}},before:ab,once:ec,findKey:bb,findIndex:Aa,findLastIndex:wb,sortedIndex:db,indexOf:ib,lastIndexOf:fc,find:za,
detect:za,findWhere:function(a,b){return za(a,S(b))},each:U,forEach:U,map:aa,collect:aa,reduce:Na,foldl:Na,inject:Na,reduceRight:xb,foldr:xb,filter:ea,select:ea,reject:function(a,b,d){return ea(a,ya(G(b)),d)},every:gb,all:gb,some:hb,any:hb,contains:V,includes:V,include:V,invoke:gc,pluck:Ba,where:function(a,b){return ea(a,S(b))},max:jb,min:function(a,b,d){var g=Infinity,c=Infinity,e;if(null==b||"number"==typeof b&&"object"!=typeof a[0]&&null!=a){a=R(a)?a:K(a);for(var f=0,u=a.length;f<u;f++)d=a[f],
null!=d&&d<g&&(g=d)}else b=G(b,d),U(a,function(a,d,f){e=b(a,d,f);if(e<c||Infinity===e&&Infinity===g)g=a,c=e});return g},shuffle:function(a){return kb(a,Infinity)},sample:kb,sortBy:function(a,b,d){var g=0;b=G(b,d);return Ba(aa(a,function(a,d,c){return{value:a,index:g++,criteria:b(a,d,c)}}).sort(function(a,b){var d=a.criteria,g=b.criteria;if(d!==g){if(d>g||void 0===d)return 1;if(d<g||void 0===g)return-1}return a.index-b.index}),"value")},groupBy:hc,indexBy:ic,countBy:jc,partition:kc,toArray:function(a){return a?
Y(a)?ma.call(a):Ga(a)?a.match(lc):R(a)?aa(a,ja):K(a):[]},size:function(a){return null==a?0:R(a)?a.length:d(a).length},pick:yb,omit:mc,first:Ca,head:Ca,take:Ca,initial:lb,last:function(a,b,d){return null==a||1>a.length?null==b||d?void 0:[]:null==b||d?a[a.length-1]:ta(a,Math.max(0,a.length-b))},rest:ta,tail:ta,drop:ta,compact:function(a){return ea(a,Boolean)},flatten:function(a,b){return Z(a,b,!1)},without:nc,uniq:Da,unique:Da,union:oc,intersection:function(a){for(var b=[],d=arguments.length,g=0,c=
Q(a);g<c;g++){var e=a[g];if(!V(b,e)){var f;for(f=1;f<d&&V(arguments[f],e);f++);f===d&&b.push(e)}}return b},difference:zb,unzip:Ea,transpose:Ea,zip:pc,object:function(a,b){for(var d={},g=0,c=Q(a);g<c;g++)b?d[a[g]]=b[g]:d[a[g][0]]=a[g][1];return d},range:function(a,b,d){null==b&&(b=a||0,a=0);d||(d=b<a?-1:1);b=Math.max(Math.ceil((b-a)/d),0);for(var g=Array(b),c=0;c<b;c++,a+=d)g[c]=a;return g},chunk:function(a,b){if(null==b||1>b)return[];for(var d=[],g=0,c=a.length;g<c;)d.push(ma.call(a,g,g+=b));return d},
mixin:mb,"default":u});return Ab._=Ab})}).call(this)}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],25:[function(a,c,l){c.exports={Controller:a("./controller"),Frame:a("./frame"),Gesture:a("./gesture"),Hand:a("./hand"),Pointable:a("./pointable"),Finger:a("./finger"),InteractionBox:a("./interaction_box"),CircularBuffer:a("./circular_buffer"),UI:a("./ui"),JSONProtocol:a("./protocol").JSONProtocol,glMatrix:a("gl-matrix"),mat3:a("gl-matrix").mat3,
vec3:a("gl-matrix").vec3,loopController:void 0,version:a("./version.js"),_:a("underscore"),EventEmitter:a("events").EventEmitter,loop:function(a,c){a&&void 0===c&&"[object Function]"==={}.toString.call(a)&&(c=a,a={});this.loopController?a&&this.loopController.setupFrameEvents(a):this.loopController=new this.Controller(a);this.loopController.loop(c);return this.loopController},plugin:function(a,c){this.Controller.plugin(a,c)}}},{"./circular_buffer":3,"./controller":7,"./finger":9,"./frame":10,"./gesture":11,
"./hand":12,"./interaction_box":13,"./pointable":15,"./protocol":16,"./ui":17,"./version.js":20,events:1,"gl-matrix":21,underscore:24}]},{},[25])(25)});var CindyLeap=function(a){function c(a,c){var e,h;for(e in a)(h=c[e])?h(k(a[e])):console.log("Modifier "+e+" not supported")}var l=a.nada,k=a.evaluate,e=a.defineFunction;e("initleapmotion",0,function(e,k){var h=!1;c(k,{enablegestures:function(a){return h=coerce.toBool(a,!1)},usehandtransformcdy3d:function(a){return setManipulateSceneTransformActive(coerce.toBool(a,!1))},rotationfactor:function(a){return setLeapMotionRotationFactor(coerce.toReal(a,2))},translationfactor:function(a){return setLeapMotionTranslationFactor(coerce.toReal(a,
1))}});initLeapMotion(a,h);return l});e("leapdebugprinthands",0,function(a,c){a=getLeapHandsData();0<a.length&&console.log(a);return l});e("leapdebugprintgestures",0,function(a,c){a=getLeapGestureData();0<a.length&&console.log(a);return l});e("leapnormalizeposition",1,function(c,e){c=a.evaluate(c[0]).value;c=leapNormalizePosition([c[0].value.real,c[1].value.real,c[2].value.real]);return nestedArrayToCSList(c)});e("getleaphandsdata",0,function(a,c){a=new Set(["frame"]);c=getLeapHandsData();return convertObjectToCindyDict(c,
a,new Map)});e("getleapgesturedata",0,function(a,c){a=new Set(["frame"]);c=getLeapGestureData();return convertObjectToCindyDict(c,a,new Map)});e("getleapmotionmodelmatrix",0,function(a,c){a=getLeapMotionModelMatrix();return nestedArrayToCSList([[a[0],a[1],a[2],a[3]],[a[4],a[5],a[6],a[7]],[a[8],a[9],a[10],a[11]],[a[12],a[13],a[14],a[15]]])});e("getleapmotionrotationmatrix",0,function(a,c){a=getLeapMotionModelMatrix();return nestedArrayToCSList([[a[0],a[1],a[2]],[a[4],a[5],a[6]],[a[8],a[9],a[10]]])});
e("getleapmotiontranslationvector",0,function(a,c){a=getLeapMotionModelMatrix();return nestedArrayToCSList([a[3]+1E-6,a[7],a[11]])});e("getleapmotiontransformhaschanged",0,function(a,c){return{ctype:"boolean",value:getLeapMotionTransformHasChanged()}})};CindyLeap.leapPreRender=leapPreRender;CindyLeap.leapPostRender=leapPostRender;CindyJS.registerPlugin(1,"CindyLeap",CindyLeap);var modelMatrixTmp,mvMatrixTmp,leapMotionModelMatrixInternal=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],leapMotionRotationMatrixInternal=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],leapMotionTransformHasChanged=!1,leapMotionRotationFactor=2,leapMotionTranslationFactor=1,lastLeapFrame=null,manipulateSceneTransformActive=!1,gesturesEnabled=!1;
function leapPreRender(a){if(manipulateSceneTransformActive){modelMatrixTmp=a.modelMatrix.slice();mvMatrixTmp=a.mvMatrix.slice();var c=getLeapMotionModelMatrix();a.modelMatrix=mul4mm(c,a.modelMatrix);a.mvMatrix=mul4mm(a.viewMatrix,a.modelMatrix)}}function leapPostRender(a){manipulateSceneTransformActive&&(a.modelMatrix=modelMatrixTmp.slice(),a.mvMatrix=mvMatrixTmp.slice())}
function initLeapMotion(a,c){gesturesEnabled=c;var l=new Leap.Controller({enableGestures:c});l.on("frame",function(c){onLeapMotionControllerFrame(a,l,c)});l.connect()}
function onLeapMotionControllerFrame(a,c,l){if(0<l.hands.length){lastLeapFrame=l;var k=l.hands[0];c=c.frame(1);k.rotationMatrix(c);l=l.interactionBox.normalizePoint(k.palmPosition,!0);c=k.palmNormal;var e=k.direction;c=[c[1]*e[2]-c[2]*e[1],c[2]*e[0]-c[0]*e[2],c[0]*e[1]-c[1]*e[0]];leapMotionRotationMatrixInternal=[c[0],c[1],c[2],0,k.palmNormal[0],k.palmNormal[1],k.palmNormal[2],0,k.direction[0],k.direction[1],k.direction[2],0,0,0,0,1];leapMotionRotationMatrixInternal=transpose4(mul4mm([1,0,0,0,0,-1,
0,0,0,0,-1,0,0,0,0,1],leapMotionRotationMatrixInternal));2==leapMotionRotationFactor?leapMotionRotationMatrixInternal=mul4mm(leapMotionRotationMatrixInternal,leapMotionRotationMatrixInternal):1!=leapMotionRotationFactor&&(k=axisAngleFromRotationMatrix(leapMotionRotationMatrixInternal),leapMotionRotationMatrixInternal=rotationMatrixFromAxisAngle(k[0],leapMotionRotationFactor*k[1]));leapMotionModelMatrixInternal=leapMotionRotationMatrixInternal.slice();leapMotionModelMatrixInternal[3]=leapMotionTranslationFactor*
(2*l[0]-1);leapMotionModelMatrixInternal[7]=leapMotionTranslationFactor*(2*l[1]-1);leapMotionModelMatrixInternal[11]=leapMotionTranslationFactor*(2*l[2]-1);leapMotionTransformHasChanged=!0;a.scheduleUpdate()}}function setManipulateSceneTransformActive(a){manipulateSceneTransformActive=a}function getLeapHandsData(){return null!=lastLeapFrame?lastLeapFrame.hands:[]}function getLeapGestureData(){return null!=lastLeapFrame&&gesturesEnabled?lastLeapFrame.gestures:[]}
function leapNormalizePosition(a){return null!=lastLeapFrame?(a=lastLeapFrame.interactionBox.normalizePoint(a,!0),[leapMotionTranslationFactor*(2*a[0]-1),leapMotionTranslationFactor*(2*a[1]-1),leapMotionTranslationFactor*(2*a[2]-1)]):a}function rotationMatrixFromAxisAngle(a,c){var l=Math.sin(c);c=Math.cos(c);var k=1-c;return[c+a[0]*a[0]*k,a[0]*a[1]*k-a[2]*l,a[0]*a[2]*k+a[1]*l,0,a[1]*a[0]*k+a[2]*l,c+a[1]*a[1]*k,a[1]*a[2]*k-a[0]*l,0,a[2]*a[0]*k-a[1]*l,a[2]*a[1]*k+a[0]*l,c+a[2]*a[2]*k,0,0,0,0,1]}
function axisAngleFromRotationMatrix(a){var c=function(a){return a*a};if(.001>Math.abs(a[1]-a[4])&&.001>Math.abs(a[2]-a[8])&&.001>Math.abs(a[6]-a[9])){if(.001>Math.abs(a[1]+a[4])&&.01>Math.abs(a[2]+a[8])&&.01>Math.abs(a[6]+a[9])&&.01>Math.abs(a[0]+a[5]+a[10]-3))return[[1,0,0],0];c=(a[0]+1)/2;var l=(a[5]+1)/2,k=(a[10]+1)/2,e=(a[1]+a[4])/4,h=(a[2]+a[8])/4;a=(a[6]+a[9])/4;var n=1/Math.sqrt(2);c>l&&c>k?.001>c?(x=0,z=y=n):(x=Math.sqrt(c),y=e/x,z=h/x):l>k?.001>l?(x=n,y=0,z=n):(y=Math.sqrt(l),x=e/y,z=a/
y):.001>k?(y=x=n,z=0):(z=Math.sqrt(k),x=h/z,y=a/z);return[[0,0,0],Math.PI]}c=Math.sqrt(c(a[9]-a[6])+c(a[2]-a[8])+c(a[4]-a[1]));return[[(a[9]-a[6])/c,(a[2]-a[8])/c,(a[4]-a[1])/c],Math.acos((a[0]+a[5]+a[10]-1)/2)]}function getLeapMotionModelMatrix(){return leapMotionModelMatrixInternal}function getLeapMotionTransformHasChanged(){return leapMotionTransformHasChanged?(leapMotionTransformHasChanged=!1,!0):!1}function setLeapMotionRotationFactor(a){leapMotionRotationFactor=a}
function setLeapMotionTranslationFactor(a){leapMotionTranslationFactor=a};/*
 LeapJS v0.6.4                                                  
 http://github.com/leapmotion/leapjs/                                        

 Copyright 2013 LeapMotion, Inc. and other contributors                      
 Released under the Apache-2.0 license                                     
 http://github.com/leapmotion/leapjs/blob/master/LICENSE.txt                 
*/
(function(a,c,l){function k(h,l){if(!c[h]){if(!a[h]){var n="function"==typeof require&&require;if(!l&&n)return n(h,!0);if(e)return e(h,!0);throw Error("Cannot find module '"+h+"'");}l=c[h]={exports:{}};a[h][0].call(l.exports,function(c){var e=a[h][1][c];return k(e?e:c)},l,l.exports)}return c[h].exports}for(var e="function"==typeof require&&require,h=0;h<l.length;h++)k(l[h]);return k})({1:[function(a,c,l){a("./pointable");l=a("gl-matrix");var k=l.vec3,e=l.mat3,h=l.mat4;a("underscore");a=c.exports=
function(a,c){this.finger=a;this._matrix=this._center=null;this.type=c.type;this.prevJoint=c.prevJoint;this.nextJoint=c.nextJoint;this.width=c.width;a=Array(3);k.sub(a,c.nextJoint,c.prevJoint);this.length=k.length(a);this.basis=c.basis};a.prototype.left=function(){return this._left?this._left:this._left=0>e.determinant(this.basis[0].concat(this.basis[1]).concat(this.basis[2]))};a.prototype.matrix=function(){if(this._matrix)return this._matrix;var a=this.basis,c=this._matrix=h.create();c[0]=a[0][0];
c[1]=a[0][1];c[2]=a[0][2];c[4]=a[1][0];c[5]=a[1][1];c[6]=a[1][2];c[8]=a[2][0];c[9]=a[2][1];c[10]=a[2][2];c[3]=this.center()[0];c[7]=this.center()[1];c[11]=this.center()[2];this.left()&&(c[0]*=-1,c[1]*=-1,c[2]*=-1);return this._matrix};a.prototype.lerp=function(a,c){k.lerp(a,this.prevJoint,this.nextJoint,c)};a.prototype.center=function(){if(this._center)return this._center;var a=k.create();this.lerp(a,.5);return this._center=a};a.prototype.direction=function(){return[-1*this.basis[2][0],-1*this.basis[2][1],
-1*this.basis[2][2]]}},{"./pointable":14,"gl-matrix":23,underscore:24}],2:[function(a,c,l){a=c.exports=function(a){this.pos=0;this._buf=[];this.size=a};a.prototype.get=function(a){void 0==a&&(a=0);if(!(a>=this.size||a>=this._buf.length))return this._buf[(this.pos-a-1)%this.size]};a.prototype.push=function(a){this._buf[this.pos%this.size]=a;return this.pos++}},{}],3:[function(a,c,l){var k=a("../protocol").chooseProtocol;l=a("events").EventEmitter;var e=a("underscore"),h=c.exports=function(a){this.opts=
e.defaults(a||{},{host:"127.0.0.1",enableGestures:!1,scheme:this.getScheme(),port:this.getPort(),background:!1,optimizeHMD:!1,requestProtocolVersion:h.defaultProtocolVersion});this.host=this.opts.host;this.port=this.opts.port;this.scheme=this.opts.scheme;this.protocolVersionVerified=!1;this.optimizeHMD=this.background=null;this.on("ready",function(){this.enableGestures(this.opts.enableGestures);this.setBackground(this.opts.background);this.setOptimizeHMD(this.opts.optimizeHMD);this.opts.optimizeHMD?
console.log("Optimized for head mounted display usage."):console.log("Optimized for desktop usage.")})};h.defaultProtocolVersion=6;h.prototype.getUrl=function(){return this.scheme+"//"+this.host+":"+this.port+"/v"+this.opts.requestProtocolVersion+".json"};h.prototype.getScheme=function(){return"ws:"};h.prototype.getPort=function(){return 6437};h.prototype.setBackground=function(a){this.opts.background=a;this.protocol&&this.protocol.sendBackground&&this.background!==this.opts.background&&(this.background=
this.opts.background,this.protocol.sendBackground(this,this.opts.background))};h.prototype.setOptimizeHMD=function(a){this.opts.optimizeHMD=a;this.protocol&&this.protocol.sendOptimizeHMD&&this.optimizeHMD!==this.opts.optimizeHMD&&(this.optimizeHMD=this.opts.optimizeHMD,this.protocol.sendOptimizeHMD(this,this.opts.optimizeHMD))};h.prototype.handleOpen=function(){this.connected||(this.connected=!0,this.emit("connect"))};h.prototype.enableGestures=function(a){this.gesturesEnabled=a?!0:!1;this.send(this.protocol.encode({enableGestures:this.gesturesEnabled}))};
h.prototype.handleClose=function(a,c){this.connected&&(this.disconnect(),1001===a&&1<this.opts.requestProtocolVersion&&(this.protocolVersionVerified?this.protocolVersionVerified=!1:this.opts.requestProtocolVersion--),this.startReconnection())};h.prototype.startReconnection=function(){var a=this;this.reconnectionTimer||(this.reconnectionTimer=setInterval(function(){a.reconnect()},500))};h.prototype.stopReconnection=function(){this.reconnectionTimer=clearInterval(this.reconnectionTimer)};h.prototype.disconnect=
function(a){a||this.stopReconnection();if(this.socket)return this.socket.close(),delete this.socket,delete this.protocol,delete this.background,delete this.optimizeHMD,delete this.focusedState,this.connected&&(this.connected=!1,this.emit("disconnect")),!0};h.prototype.reconnect=function(){this.connected?this.stopReconnection():(this.disconnect(!0),this.connect())};h.prototype.handleData=function(a){a=JSON.parse(a);void 0===this.protocol?(a=this.protocol=k(a),this.protocolVersionVerified=!0,this.emit("ready")):
a=this.protocol(a);this.emit(a.type,a)};h.prototype.connect=function(){if(!this.socket)return this.socket=this.setupSocket(),!0};h.prototype.send=function(a){this.socket.send(a)};h.prototype.reportFocus=function(a){this.connected&&this.focusedState!==a&&(this.focusedState=a,this.emit(this.focusedState?"focus":"blur"),this.protocol&&this.protocol.sendFocused&&this.protocol.sendFocused(this,this.focusedState))};e.extend(h.prototype,l.prototype)},{"../protocol":15,events:21,underscore:24}],4:[function(a,
c,l){var k=c.exports=a("./base");a=a("underscore");c=c.exports=function(a){k.call(this,a);var c=this;this.on("ready",function(){c.startFocusLoop()});this.on("disconnect",function(){c.stopFocusLoop()})};a.extend(c.prototype,k.prototype);c.__proto__=k;c.prototype.useSecure=function(){return"https:"===location.protocol};c.prototype.getScheme=function(){return this.useSecure()?"wss:":"ws:"};c.prototype.getPort=function(){return this.useSecure()?6436:6437};c.prototype.setupSocket=function(){var a=this,
c=new WebSocket(this.getUrl());c.onopen=function(){a.handleOpen()};c.onclose=function(c){a.handleClose(c.code,c.reason)};c.onmessage=function(c){a.handleData(c.data)};c.onerror=function(c){a.useSecure()&&"wss:"===a.scheme?(a.scheme="ws:",a.port=6437,a.disconnect(),a.connect()):confirm("Leap Motion controller driver (V2) not found. Please download the driver from the following website and check that the port 6437 is open.")&&(window.location.href="https://developer.leapmotion.com/sdk/v2")};return c};
c.prototype.startFocusLoop=function(){if(!this.focusDetectorTimer){var a=this,c=null;c="undefined"!==typeof document.hidden?"hidden":"undefined"!==typeof document.mozHidden?"mozHidden":"undefined"!==typeof document.msHidden?"msHidden":"undefined"!==typeof document.webkitHidden?"webkitHidden":void 0;void 0===a.windowVisible&&(a.windowVisible=void 0===c?!0:!1===document[c]);var k=window.addEventListener("focus",function(c){a.windowVisible=!0;v()}),l=window.addEventListener("blur",function(c){a.windowVisible=
!1;v()});this.on("disconnect",function(){window.removeEventListener("focus",k);window.removeEventListener("blur",l)});var v=function(){a.reportFocus((void 0===c?!0:!1===document[c])&&a.windowVisible)};v();this.focusDetectorTimer=setInterval(v,100)}};c.prototype.stopFocusLoop=function(){this.focusDetectorTimer&&(clearTimeout(this.focusDetectorTimer),delete this.focusDetectorTimer)}},{"./base":3,underscore:24}],5:[function(a,c,l){var k=a("__browserify_process"),e=a("./frame"),h=a("./hand"),n=a("./pointable"),
B=a("./finger"),v=a("./circular_buffer"),C=a("./pipeline");l=a("events").EventEmitter;var w=a("./gesture").gestureListener,p=a("./dialog"),q=a("underscore"),t=c.exports=function(c){var h=this;c=q.defaults(c||{},{inNode:"undefined"!==typeof k&&k.versions&&k.versions.node});this.inNode=c.inNode;c=q.defaults(c||{},{frameEventName:this.useAnimationLoop()?"animationFrame":"deviceFrame",suppressAnimationLoop:!this.useAnimationLoop(),loopWhileDisconnected:!0,useAllPlugins:!1,checkVersion:!0});this.animationFrameRequested=
!1;this.onAnimationFrame=function(a){h.lastConnectionFrame.valid&&h.emit("animationFrame",h.lastConnectionFrame);h.emit("frameEnd",a);h.loopWhileDisconnected&&(!1!==h.connection.focusedState||h.connection.opts.background)?window.requestAnimationFrame(h.onAnimationFrame):h.animationFrameRequested=!1};this.suppressAnimationLoop=c.suppressAnimationLoop;this.loopWhileDisconnected=c.loopWhileDisconnected;this.frameEventName=c.frameEventName;this.useAllPlugins=c.useAllPlugins;this.history=new v(200);this.lastConnectionFrame=
this.lastValidFrame=this.lastFrame=e.Invalid;this.accumulatedGestures=[];this.checkVersion=c.checkVersion;this.connectionType=void 0===c.connectionType?this.inBrowser()?a("./connection/browser"):a("./connection/node"):c.connectionType;this.connection=new this.connectionType(c);this.streamingCount=0;this.devices={};this.plugins={};this._pluginPipelineSteps={};this._pluginExtendedMethods={};c.useAllPlugins&&this.useRegisteredPlugins();this.setupFrameEvents(c);this.setupConnectionEvents();this.startAnimationLoop()};
t.prototype.gesture=function(a,c){a=w(this,a);void 0!==c&&a.stop(c);return a};t.prototype.setBackground=function(a){this.connection.setBackground(a);return this};t.prototype.setOptimizeHMD=function(a){this.connection.setOptimizeHMD(a);return this};t.prototype.inBrowser=function(){return!this.inNode};t.prototype.useAnimationLoop=function(){return this.inBrowser()&&!this.inBackgroundPage()};t.prototype.inBackgroundPage=function(){return"undefined"!==typeof chrome&&chrome.extension&&chrome.extension.getBackgroundPage&&
chrome.extension.getBackgroundPage()===window};t.prototype.connect=function(){this.connection.connect();return this};t.prototype.streaming=function(){return 0<this.streamingCount};t.prototype.connected=function(){return!!this.connection.connected};t.prototype.startAnimationLoop=function(){this.suppressAnimationLoop||this.animationFrameRequested||(this.animationFrameRequested=!0,window.requestAnimationFrame(this.onAnimationFrame))};t.prototype.disconnect=function(){this.connection.disconnect();return this};
t.prototype.frame=function(a){return this.history.get(a)||e.Invalid};t.prototype.loop=function(a){if(a)if("function"===typeof a)this.on(this.frameEventName,a);else this.setupFrameEvents(a);return this.connect()};t.prototype.addStep=function(a){this.pipeline||(this.pipeline=new C(this));this.pipeline.addStep(a)};t.prototype.processFrame=function(a){a.gestures&&(this.accumulatedGestures=this.accumulatedGestures.concat(a.gestures));this.lastConnectionFrame=a;this.startAnimationLoop();this.emit("deviceFrame",
a)};t.prototype.processFinishedFrame=function(a){this.lastFrame=a;a.valid&&(this.lastValidFrame=a);a.controller=this;a.historyIdx=this.history.push(a);if(a.gestures){a.gestures=this.accumulatedGestures;this.accumulatedGestures=[];for(var c=0;c!=a.gestures.length;c++)this.emit("gesture",a.gestures[c],a)}this.pipeline&&(a=this.pipeline.run(a),a||(a=e.Invalid));this.emit("frame",a);this.emitHandEvents(a)};t.prototype.emitHandEvents=function(a){for(var c=0;c<a.hands.length;c++)this.emit("hand",a.hands[c])};
t.prototype.setupFrameEvents=function(a){if(a.frame)this.on("frame",a.frame);if(a.hand)this.on("hand",a.hand)};t.prototype.setupConnectionEvents=function(){var a=this;this.connection.on("frame",function(b){a.processFrame(b)});this.on(this.frameEventName,function(b){a.processFinishedFrame(b)});var c=function(){if(5>a.connection.opts.requestProtocolVersion&&0==a.streamingCount){a.streamingCount=1;var b={attached:!0,streaming:!0,type:"unknown",id:"Lx00000000000"};a.devices[b.id]=b;a.emit("deviceAttached",
b);a.emit("deviceStreaming",b);a.emit("streamingStarted",b);a.connection.removeListener("frame",c)}},e=function(){if(0<a.streamingCount){for(var b in a.devices)a.emit("deviceStopped",a.devices[b]),a.emit("deviceRemoved",a.devices[b]);a.emit("streamingStopped",a.devices[b]);a.streamingCount=0;for(b in a.devices)delete a.devices[b]}};this.connection.on("focus",function(){a.loopWhileDisconnected&&a.startAnimationLoop();a.emit("focus")});this.connection.on("blur",function(){a.emit("blur")});this.connection.on("protocol",
function(b){b.on("beforeFrameCreated",function(b){a.emit("beforeFrameCreated",b)});b.on("afterFrameCreated",function(b,c){a.emit("afterFrameCreated",b,c)});a.emit("protocol",b)});this.connection.on("ready",function(){a.checkVersion&&!a.inNode&&a.checkOutOfDate();a.emit("ready")});this.connection.on("connect",function(){a.emit("connect");a.connection.removeListener("frame",c);a.connection.on("frame",c)});this.connection.on("disconnect",function(){a.emit("disconnect");e()});this.connection.on("deviceConnect",
function(b){b.state?(a.emit("deviceConnected"),a.connection.removeListener("frame",c),a.connection.on("frame",c)):(a.emit("deviceDisconnected"),e())});this.connection.on("deviceEvent",function(b){b=b.state;var d=a.devices[b.id],c={},e;for(e in b)d&&d.hasOwnProperty(e)&&d[e]==b[e]||(c[e]=!0);a.devices[b.id]=b;c.attached&&a.emit(b.attached?"deviceAttached":"deviceRemoved",b);c.streaming&&(b.streaming?(a.streamingCount++,a.emit("deviceStreaming",b),1==a.streamingCount&&a.emit("streamingStarted",b),c.attached||
a.emit("deviceConnected")):c.attached&&b.attached||(a.streamingCount--,a.emit("deviceStopped",b),0==a.streamingCount&&a.emit("streamingStopped",b),a.emit("deviceDisconnected")))});this.on("newListener",function(a,d){"deviceConnected"!=a&&"deviceDisconnected"!=a||console.warn(a+" events are depricated.  Consider using 'streamingStarted/streamingStopped' or 'deviceStreaming/deviceStopped' instead")})};t.prototype.checkOutOfDate=function(){console.assert(this.connection&&this.connection.protocol);var a=
this.connection.protocol.serviceVersion,c=this.connection.protocol.version,e=this.connectionType.defaultProtocolVersion;return e>c?(console.warn("Your Protocol Version is v"+c+", this app was designed for v"+e),p.warnOutOfDate({sV:a,pV:c}),!0):!1};t._pluginFactories={};t.plugin=function(a,c){this._pluginFactories[a]&&console.warn('Plugin "'+a+'" already registered');return this._pluginFactories[a]=c};t.plugins=function(){return q.keys(this._pluginFactories)};t.prototype.use=function(a,c){var f;var b=
"function"==typeof a?a:t._pluginFactories[a];if(!b)throw"Leap Plugin "+a+" not found.";c||(c={});if(this.plugins[a])return q.extend(this.plugins[a],c),this;this.plugins[a]=c;c=b.call(this,c);for(f in c)if(b=c[f],"function"===typeof b){var d=a,g=f;if(-1!==["beforeFrameCreated","afterFrameCreated"].indexOf(g))this.on(g,b);else this.pipeline||(this.pipeline=new C(this)),this._pluginPipelineSteps[d]||(this._pluginPipelineSteps[d]=[]),this._pluginPipelineSteps[d].push(this.pipeline.addWrappedStep(g,b))}else{d=
a;g=f;this._pluginExtendedMethods[d]||(this._pluginExtendedMethods[d]=[]);switch(g){case "frame":g=e;break;case "hand":g=h;break;case "pointable":g=n;q.extend(B.prototype,b);q.extend(B.Invalid,b);break;case "finger":g=B;break;default:throw d+' specifies invalid object type "'+g+'" for prototypical extension';}q.extend(g.prototype,b);q.extend(g.Invalid,b);this._pluginExtendedMethods[d].push([g,b])}return this};t.prototype.stopUsing=function(a){var c=this._pluginPipelineSteps[a],e=this._pluginExtendedMethods[a],
b;if(this.plugins[a]){if(c)for(b=0;b<c.length;b++)this.pipeline.removeStep(c[b]);if(e)for(b=0;b<e.length;b++){c=e[b][0];var d=e[b][1];for(var g in d)delete c.prototype[g],delete c.Invalid[g]}delete this.plugins[a];return this}};t.prototype.useRegisteredPlugins=function(){for(var a in t._pluginFactories)this.use(a)};q.extend(t.prototype,l.prototype)},{"./circular_buffer":2,"./connection/browser":4,"./connection/node":20,"./dialog":6,"./finger":7,"./frame":8,"./gesture":9,"./hand":10,"./pipeline":13,
"./pointable":14,__browserify_process:22,events:21,underscore:24}],6:[function(a,c,l){var k=a("__browserify_process"),e=c.exports=function(a,c){this.options=c||{};this.message=a;this.createElement()};e.prototype.createElement=function(){this.element=document.createElement("div");this.element.className="leapjs-dialog";this.element.style.position="fixed";this.element.style.top="8px";this.element.style.left=0;this.element.style.right=0;this.element.style.textAlign="center";this.element.style.zIndex=
1E3;var a=document.createElement("div");this.element.appendChild(a);a.style.className="leapjs-dialog";a.style.display="inline-block";a.style.margin="auto";a.style.padding="8px";a.style.color="#222";a.style.background="#eee";a.style.borderRadius="4px";a.style.border="1px solid #999";a.style.textAlign="left";a.style.cursor="pointer";a.style.whiteSpace="nowrap";a.style.transition="box-shadow 1s linear";a.innerHTML=this.message;this.options.onclick&&a.addEventListener("click",this.options.onclick);this.options.onmouseover&&
a.addEventListener("mouseover",this.options.onmouseover);this.options.onmouseout&&a.addEventListener("mouseout",this.options.onmouseout);this.options.onmousemove&&a.addEventListener("mousemove",this.options.onmousemove)};e.prototype.show=function(){document.body.appendChild(this.element);return this};e.prototype.hide=function(){document.body.removeChild(this.element);return this};e.warnOutOfDate=function(a){a||(a={});var c="http://developer.leapmotion.com?";a.returnTo=window.location.href;for(var h in a)c+=
h+"="+encodeURIComponent(a[h])+"&";var k=new e("This site requires Leap Motion Tracking V2.<button id='leapjs-accept-upgrade'  style='color: #444; transition: box-shadow 100ms linear; cursor: pointer; vertical-align: baseline; margin-left: 16px;'>Upgrade</button><button id='leapjs-decline-upgrade' style='color: #444; transition: box-shadow 100ms linear; cursor: pointer; vertical-align: baseline; margin-left: 8px; '>Not Now</button>",{onclick:function(a){"leapjs-decline-upgrade"!=a.target.id&&(a=window.open(c,
"_blank","height=800,width=1000,location=1,menubar=1,resizable=1,status=1,toolbar=1,scrollbars=1"),window.focus&&a.focus());k.hide();return!0},onmousemove:function(a){a.target==document.getElementById("leapjs-decline-upgrade")?(document.getElementById("leapjs-decline-upgrade").style.color="#000",document.getElementById("leapjs-decline-upgrade").style.boxShadow="0px 0px 2px #5daa00",document.getElementById("leapjs-accept-upgrade").style.color="#444",document.getElementById("leapjs-accept-upgrade").style.boxShadow=
"none"):(document.getElementById("leapjs-accept-upgrade").style.color="#000",document.getElementById("leapjs-accept-upgrade").style.boxShadow="0px 0px 2px #5daa00",document.getElementById("leapjs-decline-upgrade").style.color="#444",document.getElementById("leapjs-decline-upgrade").style.boxShadow="none")},onmouseout:function(){document.getElementById("leapjs-decline-upgrade").style.color="#444";document.getElementById("leapjs-decline-upgrade").style.boxShadow="none";document.getElementById("leapjs-accept-upgrade").style.color=
"#444";document.getElementById("leapjs-accept-upgrade").style.boxShadow="none"}});return k.show()};e.hasWarnedBones=!1;e.warnBones=function(){this.hasWarnedBones||(this.hasWarnedBones=!0,console.warn("Your Leap Service is out of date"),"undefined"!==typeof k&&k.versions&&k.versions.node||this.warnOutOfDate({reason:"bones"}))}},{__browserify_process:22}],7:[function(a,c,l){var k=a("./pointable"),e=a("./bone"),h=a("./dialog");a=a("underscore");c=c.exports=function(a){k.call(this,a);this.dipPosition=
a.dipPosition;this.pipPosition=a.pipPosition;this.mcpPosition=a.mcpPosition;this.carpPosition=a.carpPosition;this.extended=a.extended;this.type=a.type;this.finger=!0;this.positions=[this.carpPosition,this.mcpPosition,this.pipPosition,this.dipPosition,this.tipPosition];a.bases?this.addBones(a):h.warnBones()};a.extend(c.prototype,k.prototype);c.prototype.addBones=function(a){this.metacarpal=new e(this,{type:0,width:this.width,prevJoint:this.carpPosition,nextJoint:this.mcpPosition,basis:a.bases[0]});
this.proximal=new e(this,{type:1,width:this.width,prevJoint:this.mcpPosition,nextJoint:this.pipPosition,basis:a.bases[1]});this.medial=new e(this,{type:2,width:this.width,prevJoint:this.pipPosition,nextJoint:this.dipPosition,basis:a.bases[2]});this.distal=new e(this,{type:3,width:this.width,prevJoint:this.dipPosition,nextJoint:a.btipPosition,basis:a.bases[3]});this.bones=[this.metacarpal,this.proximal,this.medial,this.distal]};c.prototype.toString=function(){return"Finger [ id:"+this.id+" "+this.length+
"mmx | width:"+this.width+"mm | direction:"+this.direction+" ]"};c.Invalid={valid:!1}},{"./bone":1,"./dialog":6,"./pointable":14,underscore:24}],8:[function(a,c,l){var k=a("./hand"),e=a("./pointable"),h=a("./gesture").createGesture;l=a("gl-matrix");var n=l.mat3,B=l.vec3,v=a("./interaction_box"),C=a("./finger"),w=a("underscore");a=c.exports=function(a){this.valid=!0;this.id=a.id;this.timestamp=a.timestamp;this.hands=[];this.handsMap={};this.pointables=[];this.tools=[];this.fingers=[];a.interactionBox&&
(this.interactionBox=new v(a.interactionBox));this.gestures=[];this.pointablesMap={};this._translation=a.t;this._rotation=w.flatten(a.r);this._scaleFactor=a.s;this.data=a;this.type="frame";this.currentFrameRate=a.currentFrameRate;if(a.gestures)for(var c=0,e=a.gestures.length;c!=e;c++)this.gestures.push(h(a.gestures[c]));this.postprocessData(a)};a.prototype.postprocessData=function(a){a||(a=this.data);for(var c=0,h=a.hands.length;c!=h;c++){var l=new k(a.hands[c]);l.frame=this;this.hands.push(l);this.handsMap[l.id]=
l}a.pointables=w.sortBy(a.pointables,function(a){return a.id});c=0;for(h=a.pointables.length;c!=h;c++)l=a.pointables[c],l=l.dipPosition?new C(l):new e(l),l.frame=this,this.addPointable(l)};a.prototype.addPointable=function(a){this.pointables.push(a);this.pointablesMap[a.id]=a;(a.tool?this.tools:this.fingers).push(a);if(void 0!==a.handId&&this.handsMap.hasOwnProperty(a.handId)){var c=this.handsMap[a.handId];c.pointables.push(a);(a.tool?c.tools:c.fingers).push(a);switch(a.type){case 0:c.thumb=a;break;
case 1:c.indexFinger=a;break;case 2:c.middleFinger=a;break;case 3:c.ringFinger=a;break;case 4:c.pinky=a}}};a.prototype.tool=function(a){a=this.pointable(a);return a.tool?a:e.Invalid};a.prototype.pointable=function(a){return this.pointablesMap[a]||e.Invalid};a.prototype.finger=function(a){a=this.pointable(a);return a.tool?e.Invalid:a};a.prototype.hand=function(a){return this.handsMap[a]||k.Invalid};a.prototype.rotationAngle=function(a,c){if(!this.valid||!a.valid)return 0;var e=this.rotationMatrix(a);
e=Math.acos(.5*(e[0]+e[4]+e[8]-1));e=isNaN(e)?0:e;void 0!==c&&(a=this.rotationAxis(a),e*=B.dot(a,B.normalize(B.create(),c)));return e};a.prototype.rotationAxis=function(a){return this.valid&&a.valid?B.normalize(B.create(),[this._rotation[7]-a._rotation[5],this._rotation[2]-a._rotation[6],this._rotation[3]-a._rotation[1]]):B.create()};a.prototype.rotationMatrix=function(a){if(!this.valid||!a.valid)return n.create();var c=n.transpose(n.create(),this._rotation);return n.multiply(n.create(),a._rotation,
c)};a.prototype.scaleFactor=function(a){return this.valid&&a.valid?Math.exp(this._scaleFactor-a._scaleFactor):1};a.prototype.translation=function(a){return this.valid&&a.valid?B.subtract(B.create(),this._translation,a._translation):B.create()};a.prototype.toString=function(){var a="Frame [ id:"+this.id+" | timestamp:"+this.timestamp+" | Hand count:("+this.hands.length+") | Pointable count:("+this.pointables.length+")";this.gestures&&(a+=" | Gesture count:("+this.gestures.length+")");return a+" ]"};
a.prototype.dump=function(){var a="Frame Info:<br/>"+this.toString();a+="<br/><br/>Hands:<br/>";for(var c=0,e=this.hands.length;c!=e;c++)a+="  "+this.hands[c].toString()+"<br/>";a+="<br/><br/>Pointables:<br/>";c=0;for(e=this.pointables.length;c!=e;c++)a+="  "+this.pointables[c].toString()+"<br/>";if(this.gestures)for(a+="<br/><br/>Gestures:<br/>",c=0,e=this.gestures.length;c!=e;c++)a+="  "+this.gestures[c].toString()+"<br/>";return a=a+"<br/><br/>Raw JSON:<br/>"+JSON.stringify(this.data)};a.Invalid=
{valid:!1,hands:[],fingers:[],tools:[],gestures:[],pointables:[],pointable:function(){return e.Invalid},finger:function(){return e.Invalid},hand:function(){return k.Invalid},toString:function(){return"invalid frame"},dump:function(){return this.toString()},rotationAngle:function(){return 0},rotationMatrix:function(){return n.create()},rotationAxis:function(){return B.create()},scaleFactor:function(){return 1},translation:function(){return B.create()}}},{"./finger":7,"./gesture":9,"./hand":10,"./interaction_box":12,
"./pointable":14,"gl-matrix":23,underscore:24}],9:[function(a,c,l){var k=a("gl-matrix").vec3;c=a("events").EventEmitter;var e=a("underscore");l.createGesture=function(a){switch(a.type){case "circle":var c=new n(a);break;case "swipe":c=new B(a);break;case "screenTap":c=new v(a);break;case "keyTap":c=new C(a);break;default:throw"unknown gesture type";}c.id=a.id;c.handIds=a.handIds.slice();c.pointableIds=a.pointableIds.slice();c.duration=a.duration;c.state=a.state;c.type=a.type;return c};l.gestureListener=
function(a,c){var k={},l={};a.on("gesture",function(a,f){if(a.type==c){if(("start"==a.state||"stop"==a.state)&&void 0===l[a.id]){var b=new h(a,f);l[a.id]=b;e.each(k,function(a,c){b.on(c,a)})}l[a.id].update(a,f);"stop"==a.state&&delete l[a.id]}});var n={start:function(a){k.start=a;return n},stop:function(a){k.stop=a;return n},complete:function(a){k.stop=a;return n},update:function(a){k.update=a;return n}};return n};var h=l.Gesture=function(a,c){this.gestures=[a];this.frames=[c]};h.prototype.update=
function(a,c){this.lastGesture=a;this.lastFrame=c;this.gestures.push(a);this.frames.push(c);this.emit(a.state,this)};h.prototype.translation=function(){return k.subtract(k.create(),this.lastGesture.startPosition,this.lastGesture.position)};e.extend(h.prototype,c.prototype);var n=function(a){this.center=a.center;this.normal=a.normal;this.progress=a.progress;this.radius=a.radius};n.prototype.toString=function(){return"CircleGesture ["+JSON.stringify(this)+"]"};var B=function(a){this.startPosition=a.startPosition;
this.position=a.position;this.direction=a.direction;this.speed=a.speed};B.prototype.toString=function(){return"SwipeGesture ["+JSON.stringify(this)+"]"};var v=function(a){this.position=a.position;this.direction=a.direction;this.progress=a.progress};v.prototype.toString=function(){return"ScreenTapGesture ["+JSON.stringify(this)+"]"};var C=function(a){this.position=a.position;this.direction=a.direction;this.progress=a.progress};C.prototype.toString=function(){return"KeyTapGesture ["+JSON.stringify(this)+
"]"}},{events:21,"gl-matrix":23,underscore:24}],10:[function(a,c,l){var k=a("./pointable"),e=a("./bone");l=a("gl-matrix");var h=l.mat3,n=l.vec3,B=a("underscore");a=c.exports=function(a){this.id=a.id;this.palmPosition=a.palmPosition;this.direction=a.direction;this.palmVelocity=a.palmVelocity;this.palmNormal=a.palmNormal;this.sphereCenter=a.sphereCenter;this.sphereRadius=a.sphereRadius;this.valid=!0;this.pointables=[];this.fingers=[];this.arm=a.armBasis?new e(this,{type:4,width:a.armWidth,prevJoint:a.elbow,
nextJoint:a.wrist,basis:a.armBasis}):null;this.tools=[];this._translation=a.t;this._rotation=B.flatten(a.r);this._scaleFactor=a.s;this.timeVisible=a.timeVisible;this.stabilizedPalmPosition=a.stabilizedPalmPosition;this.type=a.type;this.grabStrength=a.grabStrength;this.pinchStrength=a.pinchStrength;this.confidence=a.confidence};a.prototype.finger=function(a){return(a=this.frame.finger(a))&&a.handId==this.id?a:k.Invalid};a.prototype.rotationAngle=function(a,c){if(!this.valid||!a.valid||!a.hand(this.id).valid)return 0;
var e=this.rotationMatrix(a);e=Math.acos(.5*(e[0]+e[4]+e[8]-1));e=isNaN(e)?0:e;void 0!==c&&(a=this.rotationAxis(a),e*=n.dot(a,n.normalize(n.create(),c)));return e};a.prototype.rotationAxis=function(a){if(!this.valid||!a.valid)return n.create();a=a.hand(this.id);return a.valid?n.normalize(n.create(),[this._rotation[7]-a._rotation[5],this._rotation[2]-a._rotation[6],this._rotation[3]-a._rotation[1]]):n.create()};a.prototype.rotationMatrix=function(a){if(!this.valid||!a.valid)return h.create();a=a.hand(this.id);
if(!a.valid)return h.create();var c=h.transpose(h.create(),this._rotation);return h.multiply(h.create(),a._rotation,c)};a.prototype.scaleFactor=function(a){if(!this.valid||!a.valid)return 1;a=a.hand(this.id);return a.valid?Math.exp(this._scaleFactor-a._scaleFactor):1};a.prototype.translation=function(a){if(!this.valid||!a.valid)return n.create();a=a.hand(this.id);return a.valid?[this._translation[0]-a._translation[0],this._translation[1]-a._translation[1],this._translation[2]-a._translation[2]]:n.create()};
a.prototype.toString=function(){return"Hand ("+this.type+") [ id: "+this.id+" | palm velocity:"+this.palmVelocity+" | sphere center:"+this.sphereCenter+" ] "};a.prototype.pitch=function(){return Math.atan2(this.direction[1],-this.direction[2])};a.prototype.yaw=function(){return Math.atan2(this.direction[0],-this.direction[2])};a.prototype.roll=function(){return Math.atan2(this.palmNormal[0],-this.palmNormal[1])};a.Invalid={valid:!1,fingers:[],tools:[],pointables:[],left:!1,pointable:function(){return k.Invalid},
finger:function(){return k.Invalid},toString:function(){return"invalid frame"},dump:function(){return this.toString()},rotationAngle:function(){return 0},rotationMatrix:function(){return h.create()},rotationAxis:function(){return n.create()},scaleFactor:function(){return 1},translation:function(){return n.create()}}},{"./bone":1,"./pointable":14,"gl-matrix":23,underscore:24}],11:[function(a,c,l){c.exports={Controller:a("./controller"),Frame:a("./frame"),Gesture:a("./gesture"),Hand:a("./hand"),Pointable:a("./pointable"),
Finger:a("./finger"),InteractionBox:a("./interaction_box"),CircularBuffer:a("./circular_buffer"),UI:a("./ui"),JSONProtocol:a("./protocol").JSONProtocol,glMatrix:a("gl-matrix"),mat3:a("gl-matrix").mat3,vec3:a("gl-matrix").vec3,loopController:void 0,version:a("./version.js"),_:a("underscore"),EventEmitter:a("events").EventEmitter,loop:function(a,c){a&&void 0===c&&"[object Function]"==={}.toString.call(a)&&(c=a,a={});this.loopController?a&&this.loopController.setupFrameEvents(a):this.loopController=
new this.Controller(a);this.loopController.loop(c);return this.loopController},plugin:function(a,c){this.Controller.plugin(a,c)}}},{"./circular_buffer":2,"./controller":5,"./finger":7,"./frame":8,"./gesture":9,"./hand":10,"./interaction_box":12,"./pointable":14,"./protocol":15,"./ui":16,"./version.js":19,events:21,"gl-matrix":23,underscore:24}],12:[function(a,c,l){var k=a("gl-matrix").vec3;a=c.exports=function(a){this.valid=!0;this.center=a.center;this.size=a.size;this.width=a.size[0];this.height=
a.size[1];this.depth=a.size[2]};a.prototype.denormalizePoint=function(a){return k.fromValues((a[0]-.5)*this.size[0]+this.center[0],(a[1]-.5)*this.size[1]+this.center[1],(a[2]-.5)*this.size[2]+this.center[2])};a.prototype.normalizePoint=function(a,c){a=k.fromValues((a[0]-this.center[0])/this.size[0]+.5,(a[1]-this.center[1])/this.size[1]+.5,(a[2]-this.center[2])/this.size[2]+.5);c&&(a[0]=Math.min(Math.max(a[0],0),1),a[1]=Math.min(Math.max(a[1],0),1),a[2]=Math.min(Math.max(a[2],0),1));return a};a.prototype.toString=
function(){return"InteractionBox [ width:"+this.width+" | height:"+this.height+" | depth:"+this.depth+" ]"};a.Invalid={valid:!1}},{"gl-matrix":23}],13:[function(a,c,l){a=c.exports=function(a){this.steps=[];this.controller=a};a.prototype.addStep=function(a){this.steps.push(a)};a.prototype.run=function(a){for(var c=this.steps.length,h=0;h!=c&&a;h++)a=this.steps[h](a);return a};a.prototype.removeStep=function(a){a=this.steps.indexOf(a);if(-1===a)throw"Step not found in pipeline";this.steps.splice(a,
1)};a.prototype.addWrappedStep=function(a,c){var e=this.controller,k=function(h){var k;var l="frame"==a?[h]:h[a+"s"]||[];var n=0;for(k=l.length;n<k;n++)c.call(e,l[n]);return h};this.addStep(k);return k}},{}],14:[function(a,c,l){a("gl-matrix");a=c.exports=function(a){this.valid=!0;this.id=a.id;this.handId=a.handId;this.length=a.length;this.tool=a.tool;this.width=a.width;this.direction=a.direction;this.stabilizedTipPosition=a.stabilizedTipPosition;this.tipPosition=a.tipPosition;this.tipVelocity=a.tipVelocity;
this.touchZone=a.touchZone;this.touchDistance=a.touchDistance;this.timeVisible=a.timeVisible};a.prototype.toString=function(){return"Pointable [ id:"+this.id+" "+this.length+"mmx | width:"+this.width+"mm | direction:"+this.direction+" ]"};a.prototype.hand=function(){return this.frame.hand(this.handId)};a.Invalid={valid:!1}},{"gl-matrix":23}],15:[function(a,c,l){var k=a("./frame");a("./hand");a("./pointable");a("./finger");var e=a("underscore"),h=a("events").EventEmitter,n=function(a){this.type=a.type;
this.state=a.state};l.chooseProtocol=function(a){switch(a.version){case 1:case 2:case 3:case 4:case 5:case 6:var c=B(a);c.sendBackground=function(a,e){a.send(c.encode({background:e}))};c.sendFocused=function(a,e){a.send(c.encode({focused:e}))};c.sendOptimizeHMD=function(a,e){a.send(c.encode({optimizeHMD:e}))};break;default:throw"unrecognized version";}return c};var B=l.JSONProtocol=function(a){var c=function(a){if(a.event)return new n(a.event);c.emit("beforeFrameCreated",a);var e=new k(a);c.emit("afterFrameCreated",
e,a);return e};c.encode=function(a){return JSON.stringify(a)};c.version=a.version;c.serviceVersion=a.serviceVersion;c.versionLong="Version "+a.version;c.type="protocol";e.extend(c,h.prototype);return c}},{"./finger":7,"./frame":8,"./hand":10,"./pointable":14,events:21,underscore:24}],16:[function(a,c,l){l.UI={Region:a("./ui/region"),Cursor:a("./ui/cursor")}},{"./ui/cursor":17,"./ui/region":18}],17:[function(a,c,l){c.exports=function(){return function(a){var c=a.pointables.sort(function(a,c){return a.z-
c.z})[0];c&&c.valid&&(a.cursorPosition=c.tipPosition);return a}}},{}],18:[function(a,c,l){l=a("events").EventEmitter;a=a("underscore");var k=c.exports=function(a,c){this.start=new Vector(a);this.end=new Vector(c);this.enteredFrame=null};k.prototype.hasPointables=function(a){for(var c=0;c!=a.pointables.length;c++){var e=a.pointables[c].tipPosition;if(e.x>=this.start.x&&e.x<=this.end.x&&e.y>=this.start.y&&e.y<=this.end.y&&e.z>=this.start.z&&e.z<=this.end.z)return!0}return!1};k.prototype.listener=function(a){var c=
this;a&&a.nearThreshold&&this.setupNearRegion(a.nearThreshold);return function(a){return c.updatePosition(a)}};k.prototype.clipper=function(){var a=this;return function(c){a.updatePosition(c);return a.enteredFrame?c:null}};k.prototype.setupNearRegion=function(a){a=this.nearRegion=new k([this.start.x-a,this.start.y-a,this.start.z-a],[this.end.x+a,this.end.y+a,this.end.z+a]);var c=this;a.on("enter",function(a){c.emit("near",a)});a.on("exit",function(a){c.emit("far",a)});c.on("exit",function(a){c.emit("near",
a)})};k.prototype.updatePosition=function(a){this.nearRegion&&this.nearRegion.updatePosition(a);this.hasPointables(a)&&null==this.enteredFrame?(this.enteredFrame=a,this.emit("enter",this.enteredFrame)):this.hasPointables(a)||null==this.enteredFrame||(this.enteredFrame=null,this.emit("exit",this.enteredFrame));return a};k.prototype.normalize=function(a){return new Vector([(a.x-this.start.x)/(this.end.x-this.start.x),(a.y-this.start.y)/(this.end.y-this.start.y),(a.z-this.start.z)/(this.end.z-this.start.z)])};
k.prototype.mapToXY=function(a,c,k){a=this.normalize(a);var e=a.x,h=a.y;1<e?e=1:-1>e&&(e=-1);1<h?h=1:-1>h&&(h=-1);return[(e+1)/2*c,(1-h)/2*k,a.z]};a.extend(k.prototype,l.prototype)},{events:21,underscore:24}],19:[function(a,c,l){c.exports={full:"0.6.4",major:0,minor:6,dot:4}},{}],20:[function(a,c,l){},{}],21:[function(a,c,l){a=a("__browserify_process");a.EventEmitter||(a.EventEmitter=function(){});l=l.EventEmitter=a.EventEmitter;var k="function"===typeof Array.isArray?Array.isArray:function(a){return"[object Array]"===
Object.prototype.toString.call(a)};l.prototype.setMaxListeners=function(a){this._events||(this._events={});this._events.maxListeners=a};l.prototype.emit=function(a){if("error"===a&&(!this._events||!this._events.error||k(this._events.error)&&!this._events.error.length)){if(arguments[1]instanceof Error)throw arguments[1];throw Error("Uncaught, unspecified 'error' event.");}if(!this._events)return!1;var c=this._events[a];if(!c)return!1;if("function"==typeof c){switch(arguments.length){case 1:c.call(this);
break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:var e=Array.prototype.slice.call(arguments,1);c.apply(this,e)}return!0}if(k(c)){e=Array.prototype.slice.call(arguments,1);c=c.slice();for(var l=0,v=c.length;l<v;l++)c[l].apply(this,e);return!0}return!1};l.prototype.addListener=function(a,c){if("function"!==typeof c)throw Error("addListener only takes instances of Function");this._events||(this._events={});this.emit("newListener",a,c);if(this._events[a])if(k(this._events[a])){if(!this._events[a].warned){var e;
(e=void 0!==this._events.maxListeners?this._events.maxListeners:10)&&0<e&&this._events[a].length>e&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),console.trace())}this._events[a].push(c)}else this._events[a]=[this._events[a],c];else this._events[a]=c;return this};l.prototype.on=l.prototype.addListener;l.prototype.once=function(a,c){var e=this;e.on(a,
function v(){e.removeListener(a,v);c.apply(this,arguments)});return this};l.prototype.removeListener=function(a,c){if("function"!==typeof c)throw Error("removeListener only takes instances of Function");if(!this._events||!this._events[a])return this;var e=this._events[a];if(k(e)){a:if(e.indexOf)c=e.indexOf(c);else{for(var h=0;h<e.length;h++)if(c===e[h]){c=h;break a}c=-1}if(0>c)return this;e.splice(c,1);0==e.length&&delete this._events[a]}else this._events[a]===c&&delete this._events[a];return this};
l.prototype.removeAllListeners=function(a){if(0===arguments.length)return this._events={},this;a&&this._events&&this._events[a]&&(this._events[a]=null);return this};l.prototype.listeners=function(a){this._events||(this._events={});this._events[a]||(this._events[a]=[]);k(this._events[a])||(this._events[a]=[this._events[a]]);return this._events[a]};l.listenerCount=function(a,c){return a._events&&a._events[c]?"function"===typeof a._events[c]?1:a._events[c].length:0}},{__browserify_process:22}],22:[function(a,
c,l){a=c.exports={};a.nextTick=function(){if("undefined"!==typeof window&&window.setImmediate)return function(a){return window.setImmediate(a)};if("undefined"!==typeof window&&window.postMessage&&window.addEventListener){var a=[];window.addEventListener("message",function(c){var e=c.source;e!==window&&null!==e||"process-tick"!==c.data||(c.stopPropagation(),0<a.length&&a.shift()())},!0);return function(c){a.push(c);window.postMessage("process-tick","*")}}return function(a){setTimeout(a,0)}}();a.title=
"browser";a.browser=!0;a.env={};a.argv=[];a.binding=function(a){throw Error("process.binding is not supported");};a.cwd=function(){return"/"};a.chdir=function(a){throw Error("process.chdir is not supported");}},{}],23:[function(a,c,l){(function(a){if("undefined"===typeof l)if("function"==typeof define&&"object"==typeof define.amd&&define.amd){var c={};define(function(){return c})}else c="undefined"!==typeof window?window:a;else c=l;(function(a){if(!c)var c=1E-6;if(!e)var e="undefined"!==typeof Float32Array?
Float32Array:Array;if(!h)var h=Math.random;var k={setMatrixArrayType:function(a){e=a}};"undefined"!==typeof a&&(a.glMatrix=k);var l=Math.PI/180;k.toRadian=function(a){return a*l};var p={create:function(){var a=new e(2);a[0]=0;a[1]=0;return a},clone:function(a){var b=new e(2);b[0]=a[0];b[1]=a[1];return b},fromValues:function(a,d){var b=new e(2);b[0]=a;b[1]=d;return b},copy:function(a,d){a[0]=d[0];a[1]=d[1];return a},set:function(a,d,c){a[0]=d;a[1]=c;return a},add:function(a,d,c){a[0]=d[0]+c[0];a[1]=
d[1]+c[1];return a},subtract:function(a,d,c){a[0]=d[0]-c[0];a[1]=d[1]-c[1];return a}};p.sub=p.subtract;p.multiply=function(a,d,c){a[0]=d[0]*c[0];a[1]=d[1]*c[1];return a};p.mul=p.multiply;p.divide=function(a,d,c){a[0]=d[0]/c[0];a[1]=d[1]/c[1];return a};p.div=p.divide;p.min=function(a,d,c){a[0]=Math.min(d[0],c[0]);a[1]=Math.min(d[1],c[1]);return a};p.max=function(a,d,c){a[0]=Math.max(d[0],c[0]);a[1]=Math.max(d[1],c[1]);return a};p.scale=function(a,d,c){a[0]=d[0]*c;a[1]=d[1]*c;return a};p.scaleAndAdd=
function(a,d,c,e){a[0]=d[0]+c[0]*e;a[1]=d[1]+c[1]*e;return a};p.distance=function(a,d){var b=d[0]-a[0];a=d[1]-a[1];return Math.sqrt(b*b+a*a)};p.dist=p.distance;p.squaredDistance=function(a,d){var b=d[0]-a[0];a=d[1]-a[1];return b*b+a*a};p.sqrDist=p.squaredDistance;p.length=function(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)};p.len=p.length;p.squaredLength=function(a){var b=a[0];a=a[1];return b*b+a*a};p.sqrLen=p.squaredLength;p.negate=function(a,d){a[0]=-d[0];a[1]=-d[1];return a};p.normalize=function(a,
d){var b=d[0],c=d[1];b=b*b+c*c;0<b&&(b=1/Math.sqrt(b),a[0]=d[0]*b,a[1]=d[1]*b);return a};p.dot=function(a,d){return a[0]*d[0]+a[1]*d[1]};p.cross=function(a,d,c){d=d[0]*c[1]-d[1]*c[0];a[0]=a[1]=0;a[2]=d;return a};p.lerp=function(a,d,c,e){var b=d[0];d=d[1];a[0]=b+e*(c[0]-b);a[1]=d+e*(c[1]-d);return a};p.random=function(a,d){d=d||1;var b=2*h()*Math.PI;a[0]=Math.cos(b)*d;a[1]=Math.sin(b)*d;return a};p.transformMat2=function(a,d,c){var b=d[0];d=d[1];a[0]=c[0]*b+c[2]*d;a[1]=c[1]*b+c[3]*d;return a};p.transformMat2d=
function(a,d,c){var b=d[0];d=d[1];a[0]=c[0]*b+c[2]*d+c[4];a[1]=c[1]*b+c[3]*d+c[5];return a};p.transformMat3=function(a,d,c){var b=d[0];d=d[1];a[0]=c[0]*b+c[3]*d+c[6];a[1]=c[1]*b+c[4]*d+c[7];return a};p.transformMat4=function(a,d,c){var b=d[0];d=d[1];a[0]=c[0]*b+c[4]*d+c[12];a[1]=c[1]*b+c[5]*d+c[13];return a};p.forEach=function(){var a=p.create();return function(b,c,e,f,h,k){c||(c=2);e||(e=0);for(f=f?Math.min(f*c+e,b.length):b.length;e<f;e+=c)a[0]=b[e],a[1]=b[e+1],h(a,a,k),b[e]=a[0],b[e+1]=a[1];return b}}();
p.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};"undefined"!==typeof a&&(a.vec2=p);var q={create:function(){var a=new e(3);a[0]=0;a[1]=0;a[2]=0;return a},clone:function(a){var b=new e(3);b[0]=a[0];b[1]=a[1];b[2]=a[2];return b},fromValues:function(a,d,c){var b=new e(3);b[0]=a;b[1]=d;b[2]=c;return b},copy:function(a,d){a[0]=d[0];a[1]=d[1];a[2]=d[2];return a},set:function(a,d,c,e){a[0]=d;a[1]=c;a[2]=e;return a},add:function(a,d,c){a[0]=d[0]+c[0];a[1]=d[1]+c[1];a[2]=d[2]+c[2];return a},subtract:function(a,
d,c){a[0]=d[0]-c[0];a[1]=d[1]-c[1];a[2]=d[2]-c[2];return a}};q.sub=q.subtract;q.multiply=function(a,d,c){a[0]=d[0]*c[0];a[1]=d[1]*c[1];a[2]=d[2]*c[2];return a};q.mul=q.multiply;q.divide=function(a,d,c){a[0]=d[0]/c[0];a[1]=d[1]/c[1];a[2]=d[2]/c[2];return a};q.div=q.divide;q.min=function(a,d,c){a[0]=Math.min(d[0],c[0]);a[1]=Math.min(d[1],c[1]);a[2]=Math.min(d[2],c[2]);return a};q.max=function(a,d,c){a[0]=Math.max(d[0],c[0]);a[1]=Math.max(d[1],c[1]);a[2]=Math.max(d[2],c[2]);return a};q.scale=function(a,
d,c){a[0]=d[0]*c;a[1]=d[1]*c;a[2]=d[2]*c;return a};q.scaleAndAdd=function(a,d,c,e){a[0]=d[0]+c[0]*e;a[1]=d[1]+c[1]*e;a[2]=d[2]+c[2]*e;return a};q.distance=function(a,d){var b=d[0]-a[0],c=d[1]-a[1];a=d[2]-a[2];return Math.sqrt(b*b+c*c+a*a)};q.dist=q.distance;q.squaredDistance=function(a,d){var b=d[0]-a[0],c=d[1]-a[1];a=d[2]-a[2];return b*b+c*c+a*a};q.sqrDist=q.squaredDistance;q.length=function(a){var b=a[0],c=a[1];a=a[2];return Math.sqrt(b*b+c*c+a*a)};q.len=q.length;q.squaredLength=function(a){var b=
a[0],c=a[1];a=a[2];return b*b+c*c+a*a};q.sqrLen=q.squaredLength;q.negate=function(a,d){a[0]=-d[0];a[1]=-d[1];a[2]=-d[2];return a};q.normalize=function(a,d){var b=d[0],c=d[1],e=d[2];b=b*b+c*c+e*e;0<b&&(b=1/Math.sqrt(b),a[0]=d[0]*b,a[1]=d[1]*b,a[2]=d[2]*b);return a};q.dot=function(a,d){return a[0]*d[0]+a[1]*d[1]+a[2]*d[2]};q.cross=function(a,d,c){var b=d[0],g=d[1];d=d[2];var e=c[0],f=c[1];c=c[2];a[0]=g*c-d*f;a[1]=d*e-b*c;a[2]=b*f-g*e;return a};q.lerp=function(a,d,c,e){var b=d[0],g=d[1];d=d[2];a[0]=
b+e*(c[0]-b);a[1]=g+e*(c[1]-g);a[2]=d+e*(c[2]-d);return a};q.random=function(a,d){d=d||1;var b=2*h()*Math.PI,c=2*h()-1,e=Math.sqrt(1-c*c)*d;a[0]=Math.cos(b)*e;a[1]=Math.sin(b)*e;a[2]=c*d;return a};q.transformMat4=function(a,d,c){var b=d[0],g=d[1];d=d[2];a[0]=c[0]*b+c[4]*g+c[8]*d+c[12];a[1]=c[1]*b+c[5]*g+c[9]*d+c[13];a[2]=c[2]*b+c[6]*g+c[10]*d+c[14];return a};q.transformMat3=function(a,d,c){var b=d[0],g=d[1];d=d[2];a[0]=b*c[0]+g*c[3]+d*c[6];a[1]=b*c[1]+g*c[4]+d*c[7];a[2]=b*c[2]+g*c[5]+d*c[8];return a};
q.transformQuat=function(a,d,c){var b=d[0],g=d[1],e=d[2];d=c[0];var f=c[1],m=c[2];c=c[3];var h=c*b+f*e-m*g,k=c*g+m*b-d*e,l=c*e+d*g-f*b;b=-d*b-f*g-m*e;a[0]=h*c+b*-d+k*-m-l*-f;a[1]=k*c+b*-f+l*-d-h*-m;a[2]=l*c+b*-m+h*-f-k*-d;return a};q.rotateX=function(a,d,c,e){var b=[],g=[];b[0]=d[0]-c[0];b[1]=d[1]-c[1];b[2]=d[2]-c[2];g[0]=b[0];g[1]=b[1]*Math.cos(e)-b[2]*Math.sin(e);g[2]=b[1]*Math.sin(e)+b[2]*Math.cos(e);a[0]=g[0]+c[0];a[1]=g[1]+c[1];a[2]=g[2]+c[2];return a};q.rotateY=function(a,d,c,e){var b=[],g=
[];b[0]=d[0]-c[0];b[1]=d[1]-c[1];b[2]=d[2]-c[2];g[0]=b[2]*Math.sin(e)+b[0]*Math.cos(e);g[1]=b[1];g[2]=b[2]*Math.cos(e)-b[0]*Math.sin(e);a[0]=g[0]+c[0];a[1]=g[1]+c[1];a[2]=g[2]+c[2];return a};q.rotateZ=function(a,d,c,e){var b=[],g=[];b[0]=d[0]-c[0];b[1]=d[1]-c[1];b[2]=d[2]-c[2];g[0]=b[0]*Math.cos(e)-b[1]*Math.sin(e);g[1]=b[0]*Math.sin(e)+b[1]*Math.cos(e);g[2]=b[2];a[0]=g[0]+c[0];a[1]=g[1]+c[1];a[2]=g[2]+c[2];return a};q.forEach=function(){var a=q.create();return function(b,c,e,f,h,k){c||(c=3);e||(e=
0);for(f=f?Math.min(f*c+e,b.length):b.length;e<f;e+=c)a[0]=b[e],a[1]=b[e+1],a[2]=b[e+2],h(a,a,k),b[e]=a[0],b[e+1]=a[1],b[e+2]=a[2];return b}}();q.str=function(a){return"vec3("+a[0]+", "+a[1]+", "+a[2]+")"};"undefined"!==typeof a&&(a.vec3=q);var t={create:function(){var a=new e(4);a[0]=0;a[1]=0;a[2]=0;a[3]=0;return a},clone:function(a){var b=new e(4);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},fromValues:function(a,d,c,f){var b=new e(4);b[0]=a;b[1]=d;b[2]=c;b[3]=f;return b},copy:function(a,d){a[0]=
d[0];a[1]=d[1];a[2]=d[2];a[3]=d[3];return a},set:function(a,d,c,e,f){a[0]=d;a[1]=c;a[2]=e;a[3]=f;return a},add:function(a,d,c){a[0]=d[0]+c[0];a[1]=d[1]+c[1];a[2]=d[2]+c[2];a[3]=d[3]+c[3];return a},subtract:function(a,d,c){a[0]=d[0]-c[0];a[1]=d[1]-c[1];a[2]=d[2]-c[2];a[3]=d[3]-c[3];return a}};t.sub=t.subtract;t.multiply=function(a,d,c){a[0]=d[0]*c[0];a[1]=d[1]*c[1];a[2]=d[2]*c[2];a[3]=d[3]*c[3];return a};t.mul=t.multiply;t.divide=function(a,d,c){a[0]=d[0]/c[0];a[1]=d[1]/c[1];a[2]=d[2]/c[2];a[3]=d[3]/
c[3];return a};t.div=t.divide;t.min=function(a,d,c){a[0]=Math.min(d[0],c[0]);a[1]=Math.min(d[1],c[1]);a[2]=Math.min(d[2],c[2]);a[3]=Math.min(d[3],c[3]);return a};t.max=function(a,d,c){a[0]=Math.max(d[0],c[0]);a[1]=Math.max(d[1],c[1]);a[2]=Math.max(d[2],c[2]);a[3]=Math.max(d[3],c[3]);return a};t.scale=function(a,d,c){a[0]=d[0]*c;a[1]=d[1]*c;a[2]=d[2]*c;a[3]=d[3]*c;return a};t.scaleAndAdd=function(a,d,c,e){a[0]=d[0]+c[0]*e;a[1]=d[1]+c[1]*e;a[2]=d[2]+c[2]*e;a[3]=d[3]+c[3]*e;return a};t.distance=function(a,
d){var b=d[0]-a[0],c=d[1]-a[1],e=d[2]-a[2];a=d[3]-a[3];return Math.sqrt(b*b+c*c+e*e+a*a)};t.dist=t.distance;t.squaredDistance=function(a,d){var b=d[0]-a[0],c=d[1]-a[1],e=d[2]-a[2];a=d[3]-a[3];return b*b+c*c+e*e+a*a};t.sqrDist=t.squaredDistance;t.length=function(a){var b=a[0],c=a[1],e=a[2];a=a[3];return Math.sqrt(b*b+c*c+e*e+a*a)};t.len=t.length;t.squaredLength=function(a){var b=a[0],c=a[1],e=a[2];a=a[3];return b*b+c*c+e*e+a*a};t.sqrLen=t.squaredLength;t.negate=function(a,d){a[0]=-d[0];a[1]=-d[1];
a[2]=-d[2];a[3]=-d[3];return a};t.normalize=function(a,d){var b=d[0],c=d[1],e=d[2],f=d[3];b=b*b+c*c+e*e+f*f;0<b&&(b=1/Math.sqrt(b),a[0]=d[0]*b,a[1]=d[1]*b,a[2]=d[2]*b,a[3]=d[3]*b);return a};t.dot=function(a,d){return a[0]*d[0]+a[1]*d[1]+a[2]*d[2]+a[3]*d[3]};t.lerp=function(a,d,c,e){var b=d[0],g=d[1],f=d[2];d=d[3];a[0]=b+e*(c[0]-b);a[1]=g+e*(c[1]-g);a[2]=f+e*(c[2]-f);a[3]=d+e*(c[3]-d);return a};t.random=function(a,d){d=d||1;a[0]=h();a[1]=h();a[2]=h();a[3]=h();t.normalize(a,a);t.scale(a,a,d);return a};
t.transformMat4=function(a,d,c){var b=d[0],g=d[1],e=d[2];d=d[3];a[0]=c[0]*b+c[4]*g+c[8]*e+c[12]*d;a[1]=c[1]*b+c[5]*g+c[9]*e+c[13]*d;a[2]=c[2]*b+c[6]*g+c[10]*e+c[14]*d;a[3]=c[3]*b+c[7]*g+c[11]*e+c[15]*d;return a};t.transformQuat=function(a,d,c){var b=d[0],g=d[1],e=d[2];d=c[0];var f=c[1],m=c[2];c=c[3];var h=c*b+f*e-m*g,k=c*g+m*b-d*e,l=c*e+d*g-f*b;b=-d*b-f*g-m*e;a[0]=h*c+b*-d+k*-m-l*-f;a[1]=k*c+b*-f+l*-d-h*-m;a[2]=l*c+b*-m+h*-f-k*-d;return a};t.forEach=function(){var a=t.create();return function(b,c,
e,f,h,k){c||(c=4);e||(e=0);for(f=f?Math.min(f*c+e,b.length):b.length;e<f;e+=c)a[0]=b[e],a[1]=b[e+1],a[2]=b[e+2],a[3]=b[e+3],h(a,a,k),b[e]=a[0],b[e+1]=a[1],b[e+2]=a[2],b[e+3]=a[3];return b}}();t.str=function(a){return"vec4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};"undefined"!==typeof a&&(a.vec4=t);k={create:function(){var a=new e(4);a[0]=1;a[1]=0;a[2]=0;a[3]=1;return a},clone:function(a){var b=new e(4);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},copy:function(a,d){a[0]=d[0];a[1]=d[1];a[2]=d[2];
a[3]=d[3];return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=1;return a},transpose:function(a,d){if(a===d){var b=d[1];a[1]=d[2];a[2]=b}else a[0]=d[0],a[1]=d[2],a[2]=d[1],a[3]=d[3];return a},invert:function(a,d){var b=d[0],c=d[1],e=d[2];d=d[3];var f=b*d-e*c;if(!f)return null;f=1/f;a[0]=d*f;a[1]=-c*f;a[2]=-e*f;a[3]=b*f;return a},adjoint:function(a,d){var b=d[0];a[0]=d[3];a[1]=-d[1];a[2]=-d[2];a[3]=b;return a},determinant:function(a){return a[0]*a[3]-a[2]*a[1]},multiply:function(a,d,c){var b=d[0],
g=d[1],e=d[2];d=d[3];var f=c[0],m=c[1],h=c[2];c=c[3];a[0]=b*f+e*m;a[1]=g*f+d*m;a[2]=b*h+e*c;a[3]=g*h+d*c;return a}};k.mul=k.multiply;k.rotate=function(a,d,c){var b=d[0],g=d[1],e=d[2];d=d[3];var f=Math.sin(c);c=Math.cos(c);a[0]=b*c+e*f;a[1]=g*c+d*f;a[2]=b*-f+e*c;a[3]=g*-f+d*c;return a};k.scale=function(a,d,c){var b=d[1],g=d[2],e=d[3],f=c[0];c=c[1];a[0]=d[0]*f;a[1]=b*f;a[2]=g*c;a[3]=e*c;return a};k.str=function(a){return"mat2("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};k.frob=function(a){return Math.sqrt(Math.pow(a[0],
2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2))};k.LDU=function(a,d,c,e){a[2]=e[2]/e[0];c[0]=e[0];c[1]=e[1];c[3]=e[3]-a[2]*c[1];return[a,d,c]};"undefined"!==typeof a&&(a.mat2=k);k={create:function(){var a=new e(6);a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a},clone:function(a){var b=new e(6);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];return b},copy:function(a,d){a[0]=d[0];a[1]=d[1];a[2]=d[2];a[3]=d[3];a[4]=d[4];a[5]=d[5];return a},identity:function(a){a[0]=1;a[1]=0;a[2]=
0;a[3]=1;a[4]=0;a[5]=0;return a},invert:function(a,d){var b=d[0],c=d[1],e=d[2],f=d[3],h=d[4];d=d[5];var m=b*f-c*e;if(!m)return null;m=1/m;a[0]=f*m;a[1]=-c*m;a[2]=-e*m;a[3]=b*m;a[4]=(e*d-f*h)*m;a[5]=(c*h-b*d)*m;return a},determinant:function(a){return a[0]*a[3]-a[1]*a[2]},multiply:function(a,d,c){var b=d[0],g=d[1],e=d[2],f=d[3],m=d[4];d=d[5];var h=c[0],k=c[1],l=c[2],n=c[3],p=c[4];c=c[5];a[0]=b*h+e*k;a[1]=g*h+f*k;a[2]=b*l+e*n;a[3]=g*l+f*n;a[4]=b*p+e*c+m;a[5]=g*p+f*c+d;return a}};k.mul=k.multiply;k.rotate=
function(a,d,c){var b=d[0],g=d[1],e=d[2],f=d[3],m=d[4];d=d[5];var h=Math.sin(c);c=Math.cos(c);a[0]=b*c+e*h;a[1]=g*c+f*h;a[2]=b*-h+e*c;a[3]=g*-h+f*c;a[4]=m;a[5]=d;return a};k.scale=function(a,d,c){var b=d[1],g=d[2],e=d[3],f=d[4],m=d[5],h=c[0];c=c[1];a[0]=d[0]*h;a[1]=b*h;a[2]=g*c;a[3]=e*c;a[4]=f;a[5]=m;return a};k.translate=function(a,d,c){var b=d[0],g=d[1],e=d[2],f=d[3],m=d[4];d=d[5];var h=c[0];c=c[1];a[0]=b;a[1]=g;a[2]=e;a[3]=f;a[4]=b*h+e*c+m;a[5]=g*h+f*c+d;return a};k.str=function(a){return"mat2d("+
a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"};k.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+1)};"undefined"!==typeof a&&(a.mat2d=k);var r={create:function(){var a=new e(9);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a},fromMat4:function(a,d){a[0]=d[0];a[1]=d[1];a[2]=d[2];a[3]=d[4];a[4]=d[5];a[5]=d[6];a[6]=d[8];a[7]=d[9];a[8]=d[10];return a},clone:function(a){var b=new e(9);
b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return b},copy:function(a,d){a[0]=d[0];a[1]=d[1];a[2]=d[2];a[3]=d[3];a[4]=d[4];a[5]=d[5];a[6]=d[6];a[7]=d[7];a[8]=d[8];return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a},transpose:function(a,d){if(a===d){var b=d[1],c=d[2],e=d[5];a[1]=d[3];a[2]=d[6];a[3]=b;a[5]=d[7];a[6]=c;a[7]=e}else a[0]=d[0],a[1]=d[3],a[2]=d[6],a[3]=d[1],a[4]=d[4],a[5]=d[7],a[6]=d[2],a[7]=
d[5],a[8]=d[8];return a},invert:function(a,d){var b=d[0],c=d[1],e=d[2],f=d[3],h=d[4],m=d[5],k=d[6],l=d[7];d=d[8];var n=d*h-m*l,p=-d*f+m*k,q=l*f-h*k,r=b*n+c*p+e*q;if(!r)return null;r=1/r;a[0]=n*r;a[1]=(-d*c+e*l)*r;a[2]=(m*c-e*h)*r;a[3]=p*r;a[4]=(d*b-e*k)*r;a[5]=(-m*b+e*f)*r;a[6]=q*r;a[7]=(-l*b+c*k)*r;a[8]=(h*b-c*f)*r;return a},adjoint:function(a,d){var b=d[0],c=d[1],e=d[2],f=d[3],h=d[4],m=d[5],k=d[6],l=d[7];d=d[8];a[0]=h*d-m*l;a[1]=e*l-c*d;a[2]=c*m-e*h;a[3]=m*k-f*d;a[4]=b*d-e*k;a[5]=e*f-b*m;a[6]=f*
l-h*k;a[7]=c*k-b*l;a[8]=b*h-c*f;return a},determinant:function(a){var b=a[3],c=a[4],e=a[5],f=a[6],h=a[7],k=a[8];return a[0]*(k*c-e*h)+a[1]*(-k*b+e*f)+a[2]*(h*b-c*f)},multiply:function(a,d,c){var b=d[0],e=d[1],g=d[2],f=d[3],m=d[4],h=d[5],k=d[6],l=d[7];d=d[8];var n=c[0],p=c[1],q=c[2],r=c[3],t=c[4],v=c[5],w=c[6],B=c[7];c=c[8];a[0]=n*b+p*f+q*k;a[1]=n*e+p*m+q*l;a[2]=n*g+p*h+q*d;a[3]=r*b+t*f+v*k;a[4]=r*e+t*m+v*l;a[5]=r*g+t*h+v*d;a[6]=w*b+B*f+c*k;a[7]=w*e+B*m+c*l;a[8]=w*g+B*h+c*d;return a}};r.mul=r.multiply;
r.translate=function(a,d,c){var b=d[0],e=d[1],g=d[2],f=d[3],m=d[4],h=d[5],k=d[6],l=d[7];d=d[8];var n=c[0];c=c[1];a[0]=b;a[1]=e;a[2]=g;a[3]=f;a[4]=m;a[5]=h;a[6]=n*b+c*f+k;a[7]=n*e+c*m+l;a[8]=n*g+c*h+d;return a};r.rotate=function(a,d,c){var b=d[0],e=d[1],g=d[2],f=d[3],m=d[4],h=d[5],k=d[6],l=d[7];d=d[8];var n=Math.sin(c);c=Math.cos(c);a[0]=c*b+n*f;a[1]=c*e+n*m;a[2]=c*g+n*h;a[3]=c*f-n*b;a[4]=c*m-n*e;a[5]=c*h-n*g;a[6]=k;a[7]=l;a[8]=d;return a};r.scale=function(a,d,c){var b=c[0];c=c[1];a[0]=b*d[0];a[1]=
b*d[1];a[2]=b*d[2];a[3]=c*d[3];a[4]=c*d[4];a[5]=c*d[5];a[6]=d[6];a[7]=d[7];a[8]=d[8];return a};r.fromMat2d=function(a,d){a[0]=d[0];a[1]=d[1];a[2]=0;a[3]=d[2];a[4]=d[3];a[5]=0;a[6]=d[4];a[7]=d[5];a[8]=1;return a};r.fromQuat=function(a,d){var b=d[0],c=d[1],e=d[2];d=d[3];var f=b+b,h=c+c,m=e+e;b*=f;var k=c*f;c*=h;var l=e*f,n=e*h;e*=m;f*=d;h*=d;d*=m;a[0]=1-c-e;a[3]=k-d;a[6]=l+h;a[1]=k+d;a[4]=1-b-e;a[7]=n-f;a[2]=l-h;a[5]=n+f;a[8]=1-b-c;return a};r.normalFromMat4=function(a,d){var b=d[0],c=d[1],e=d[2],f=
d[3],h=d[4],m=d[5],k=d[6],l=d[7],n=d[8],p=d[9],q=d[10],r=d[11],t=d[12],v=d[13],w=d[14];d=d[15];var B=b*m-c*h,A=b*k-e*h,C=b*l-f*h,E=c*k-e*m,F=c*l-f*m,I=e*l-f*k,H=n*v-p*t,G=n*w-q*t;n=n*d-r*t;var L=p*w-q*v;p=p*d-r*v;q=q*d-r*w;r=B*q-A*p+C*L+E*n-F*G+I*H;if(!r)return null;r=1/r;a[0]=(m*q-k*p+l*L)*r;a[1]=(k*n-h*q-l*G)*r;a[2]=(h*p-m*n+l*H)*r;a[3]=(e*p-c*q-f*L)*r;a[4]=(b*q-e*n+f*G)*r;a[5]=(c*n-b*p-f*H)*r;a[6]=(v*I-w*F+d*E)*r;a[7]=(w*C-t*I-d*A)*r;a[8]=(t*F-v*C+d*B)*r;return a};r.str=function(a){return"mat3("+
a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"};r.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2))};"undefined"!==typeof a&&(a.mat3=r);var A={create:function(){var a=new e(16);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a},clone:function(a){var b=
new e(16);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b},copy:function(a,d){a[0]=d[0];a[1]=d[1];a[2]=d[2];a[3]=d[3];a[4]=d[4];a[5]=d[5];a[6]=d[6];a[7]=d[7];a[8]=d[8];a[9]=d[9];a[10]=d[10];a[11]=d[11];a[12]=d[12];a[13]=d[13];a[14]=d[14];a[15]=d[15];return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=
0;a[13]=0;a[14]=0;a[15]=1;return a},transpose:function(a,d){if(a===d){var b=d[1],c=d[2],e=d[3],f=d[6],h=d[7],m=d[11];a[1]=d[4];a[2]=d[8];a[3]=d[12];a[4]=b;a[6]=d[9];a[7]=d[13];a[8]=c;a[9]=f;a[11]=d[14];a[12]=e;a[13]=h;a[14]=m}else a[0]=d[0],a[1]=d[4],a[2]=d[8],a[3]=d[12],a[4]=d[1],a[5]=d[5],a[6]=d[9],a[7]=d[13],a[8]=d[2],a[9]=d[6],a[10]=d[10],a[11]=d[14],a[12]=d[3],a[13]=d[7],a[14]=d[11],a[15]=d[15];return a},invert:function(a,d){var b=d[0],c=d[1],e=d[2],f=d[3],h=d[4],m=d[5],k=d[6],l=d[7],n=d[8],
p=d[9],q=d[10],r=d[11],t=d[12],v=d[13],w=d[14];d=d[15];var B=b*m-c*h,A=b*k-e*h,C=b*l-f*h,E=c*k-e*m,F=c*l-f*m,I=e*l-f*k,H=n*v-p*t,G=n*w-q*t,L=n*d-r*t,N=p*w-q*v,P=p*d-r*v,J=q*d-r*w,M=B*J-A*P+C*N+E*L-F*G+I*H;if(!M)return null;M=1/M;a[0]=(m*J-k*P+l*N)*M;a[1]=(e*P-c*J-f*N)*M;a[2]=(v*I-w*F+d*E)*M;a[3]=(q*F-p*I-r*E)*M;a[4]=(k*L-h*J-l*G)*M;a[5]=(b*J-e*L+f*G)*M;a[6]=(w*C-t*I-d*A)*M;a[7]=(n*I-q*C+r*A)*M;a[8]=(h*P-m*L+l*H)*M;a[9]=(c*L-b*P-f*H)*M;a[10]=(t*F-v*C+d*B)*M;a[11]=(p*C-n*F-r*B)*M;a[12]=(m*G-h*N-k*H)*
M;a[13]=(b*N-c*G+e*H)*M;a[14]=(v*A-t*E-w*B)*M;a[15]=(n*E-p*A+q*B)*M;return a},adjoint:function(a,d){var b=d[0],c=d[1],e=d[2],f=d[3],h=d[4],m=d[5],k=d[6],l=d[7],n=d[8],p=d[9],q=d[10],r=d[11],t=d[12],v=d[13],w=d[14];d=d[15];a[0]=m*(q*d-r*w)-p*(k*d-l*w)+v*(k*r-l*q);a[1]=-(c*(q*d-r*w)-p*(e*d-f*w)+v*(e*r-f*q));a[2]=c*(k*d-l*w)-m*(e*d-f*w)+v*(e*l-f*k);a[3]=-(c*(k*r-l*q)-m*(e*r-f*q)+p*(e*l-f*k));a[4]=-(h*(q*d-r*w)-n*(k*d-l*w)+t*(k*r-l*q));a[5]=b*(q*d-r*w)-n*(e*d-f*w)+t*(e*r-f*q);a[6]=-(b*(k*d-l*w)-h*(e*
d-f*w)+t*(e*l-f*k));a[7]=b*(k*r-l*q)-h*(e*r-f*q)+n*(e*l-f*k);a[8]=h*(p*d-r*v)-n*(m*d-l*v)+t*(m*r-l*p);a[9]=-(b*(p*d-r*v)-n*(c*d-f*v)+t*(c*r-f*p));a[10]=b*(m*d-l*v)-h*(c*d-f*v)+t*(c*l-f*m);a[11]=-(b*(m*r-l*p)-h*(c*r-f*p)+n*(c*l-f*m));a[12]=-(h*(p*w-q*v)-n*(m*w-k*v)+t*(m*q-k*p));a[13]=b*(p*w-q*v)-n*(c*w-e*v)+t*(c*q-e*p);a[14]=-(b*(m*w-k*v)-h*(c*w-e*v)+t*(c*k-e*m));a[15]=b*(m*q-k*p)-h*(c*q-e*p)+n*(c*k-e*m);return a},determinant:function(a){var b=a[0],c=a[1],e=a[2],f=a[3],h=a[4],k=a[5],m=a[6],l=a[7],
n=a[8],p=a[9],q=a[10],r=a[11],t=a[12],v=a[13],w=a[14];a=a[15];return(b*k-c*h)*(q*a-r*w)-(b*m-e*h)*(p*a-r*v)+(b*l-f*h)*(p*w-q*v)+(c*m-e*k)*(n*a-r*t)-(c*l-f*k)*(n*w-q*t)+(e*l-f*m)*(n*v-p*t)},multiply:function(a,d,c){var b=d[0],e=d[1],g=d[2],f=d[3],h=d[4],k=d[5],l=d[6],n=d[7],p=d[8],q=d[9],r=d[10],t=d[11],v=d[12],w=d[13],B=d[14];d=d[15];var A=c[0],C=c[1],E=c[2],F=c[3];a[0]=A*b+C*h+E*p+F*v;a[1]=A*e+C*k+E*q+F*w;a[2]=A*g+C*l+E*r+F*B;a[3]=A*f+C*n+E*t+F*d;A=c[4];C=c[5];E=c[6];F=c[7];a[4]=A*b+C*h+E*p+F*v;
a[5]=A*e+C*k+E*q+F*w;a[6]=A*g+C*l+E*r+F*B;a[7]=A*f+C*n+E*t+F*d;A=c[8];C=c[9];E=c[10];F=c[11];a[8]=A*b+C*h+E*p+F*v;a[9]=A*e+C*k+E*q+F*w;a[10]=A*g+C*l+E*r+F*B;a[11]=A*f+C*n+E*t+F*d;A=c[12];C=c[13];E=c[14];F=c[15];a[12]=A*b+C*h+E*p+F*v;a[13]=A*e+C*k+E*q+F*w;a[14]=A*g+C*l+E*r+F*B;a[15]=A*f+C*n+E*t+F*d;return a}};A.mul=A.multiply;A.translate=function(a,d,c){var b=c[0],e=c[1];c=c[2];if(d===a)a[12]=d[0]*b+d[4]*e+d[8]*c+d[12],a[13]=d[1]*b+d[5]*e+d[9]*c+d[13],a[14]=d[2]*b+d[6]*e+d[10]*c+d[14],a[15]=d[3]*b+
d[7]*e+d[11]*c+d[15];else{var g=d[0];var f=d[1];var h=d[2];var k=d[3];var l=d[4];var n=d[5];var p=d[6];var q=d[7];var r=d[8];var t=d[9];var v=d[10];var w=d[11];a[0]=g;a[1]=f;a[2]=h;a[3]=k;a[4]=l;a[5]=n;a[6]=p;a[7]=q;a[8]=r;a[9]=t;a[10]=v;a[11]=w;a[12]=g*b+l*e+r*c+d[12];a[13]=f*b+n*e+t*c+d[13];a[14]=h*b+p*e+v*c+d[14];a[15]=k*b+q*e+w*c+d[15]}return a};A.scale=function(a,d,c){var b=c[0],e=c[1];c=c[2];a[0]=d[0]*b;a[1]=d[1]*b;a[2]=d[2]*b;a[3]=d[3]*b;a[4]=d[4]*e;a[5]=d[5]*e;a[6]=d[6]*e;a[7]=d[7]*e;a[8]=
d[8]*c;a[9]=d[9]*c;a[10]=d[10]*c;a[11]=d[11]*c;a[12]=d[12];a[13]=d[13];a[14]=d[14];a[15]=d[15];return a};A.rotate=function(a,d,e,f){var b=f[0],g=f[1];f=f[2];var h=Math.sqrt(b*b+g*g+f*f);if(Math.abs(h)<c)return null;h=1/h;b*=h;g*=h;f*=h;var m=Math.sin(e);var k=Math.cos(e);var l=1-k;e=d[0];h=d[1];var n=d[2];var u=d[3];var p=d[4];var q=d[5];var r=d[6];var t=d[7];var v=d[8];var w=d[9];var A=d[10];var B=d[11];var C=b*b*l+k;var F=g*b*l+f*m;var I=f*b*l-g*m;var H=b*g*l-f*m;var G=g*g*l+k;var L=f*g*l+b*m;var N=
b*f*l+g*m;b=g*f*l-b*m;g=f*f*l+k;a[0]=e*C+p*F+v*I;a[1]=h*C+q*F+w*I;a[2]=n*C+r*F+A*I;a[3]=u*C+t*F+B*I;a[4]=e*H+p*G+v*L;a[5]=h*H+q*G+w*L;a[6]=n*H+r*G+A*L;a[7]=u*H+t*G+B*L;a[8]=e*N+p*b+v*g;a[9]=h*N+q*b+w*g;a[10]=n*N+r*b+A*g;a[11]=u*N+t*b+B*g;d!==a&&(a[12]=d[12],a[13]=d[13],a[14]=d[14],a[15]=d[15]);return a};A.rotateX=function(a,d,c){var b=Math.sin(c);c=Math.cos(c);var e=d[4],g=d[5],f=d[6],h=d[7],k=d[8],l=d[9],n=d[10],p=d[11];d!==a&&(a[0]=d[0],a[1]=d[1],a[2]=d[2],a[3]=d[3],a[12]=d[12],a[13]=d[13],a[14]=
d[14],a[15]=d[15]);a[4]=e*c+k*b;a[5]=g*c+l*b;a[6]=f*c+n*b;a[7]=h*c+p*b;a[8]=k*c-e*b;a[9]=l*c-g*b;a[10]=n*c-f*b;a[11]=p*c-h*b;return a};A.rotateY=function(a,d,c){var b=Math.sin(c);c=Math.cos(c);var e=d[0],g=d[1],f=d[2],h=d[3],k=d[8],l=d[9],n=d[10],p=d[11];d!==a&&(a[4]=d[4],a[5]=d[5],a[6]=d[6],a[7]=d[7],a[12]=d[12],a[13]=d[13],a[14]=d[14],a[15]=d[15]);a[0]=e*c-k*b;a[1]=g*c-l*b;a[2]=f*c-n*b;a[3]=h*c-p*b;a[8]=e*b+k*c;a[9]=g*b+l*c;a[10]=f*b+n*c;a[11]=h*b+p*c;return a};A.rotateZ=function(a,d,c){var b=Math.sin(c);
c=Math.cos(c);var e=d[0],g=d[1],f=d[2],h=d[3],k=d[4],l=d[5],n=d[6],p=d[7];d!==a&&(a[8]=d[8],a[9]=d[9],a[10]=d[10],a[11]=d[11],a[12]=d[12],a[13]=d[13],a[14]=d[14],a[15]=d[15]);a[0]=e*c+k*b;a[1]=g*c+l*b;a[2]=f*c+n*b;a[3]=h*c+p*b;a[4]=k*c-e*b;a[5]=l*c-g*b;a[6]=n*c-f*b;a[7]=p*c-h*b;return a};A.fromRotationTranslation=function(a,d,c){var b=d[0],e=d[1],g=d[2],f=d[3],h=b+b,k=e+e,l=g+g;d=b*h;var n=b*k;b*=l;var p=e*k;e*=l;g*=l;h*=f;k*=f;f*=l;a[0]=1-(p+g);a[1]=n+f;a[2]=b-k;a[3]=0;a[4]=n-f;a[5]=1-(d+g);a[6]=
e+h;a[7]=0;a[8]=b+k;a[9]=e-h;a[10]=1-(d+p);a[11]=0;a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;return a};A.fromQuat=function(a,d){var b=d[0],c=d[1],e=d[2];d=d[3];var f=b+b,h=c+c,k=e+e;b*=f;var l=c*f;c*=h;var n=e*f,p=e*h;e*=k;f*=d;h*=d;d*=k;a[0]=1-c-e;a[1]=l+d;a[2]=n-h;a[3]=0;a[4]=l-d;a[5]=1-b-e;a[6]=p+f;a[7]=0;a[8]=n+h;a[9]=p-f;a[10]=1-b-c;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};A.frustum=function(a,d,c,e,f,h,k){var b=1/(c-d),g=1/(f-e),l=1/(h-k);a[0]=2*h*b;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=
2*h*g;a[6]=0;a[7]=0;a[8]=(c+d)*b;a[9]=(f+e)*g;a[10]=(k+h)*l;a[11]=-1;a[12]=0;a[13]=0;a[14]=k*h*2*l;a[15]=0;return a};A.perspective=function(a,d,c,e,f){d=1/Math.tan(d/2);var b=1/(e-f);a[0]=d/c;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=d;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(f+e)*b;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*f*e*b;a[15]=0;return a};A.ortho=function(a,d,c,e,f,h,k){var b=1/(d-c),g=1/(e-f),l=1/(h-k);a[0]=-2*b;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*g;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*l;a[11]=0;a[12]=(d+c)*b;a[13]=
(f+e)*g;a[14]=(k+h)*l;a[15]=1;return a};A.lookAt=function(a,d,e,f){var b=d[0],g=d[1];d=d[2];var h=f[0];var k=f[1];var l=f[2];var n=e[0];f=e[1];var p=e[2];if(Math.abs(b-n)<c&&Math.abs(g-f)<c&&Math.abs(d-p)<c)return A.identity(a);e=b-n;f=g-f;n=d-p;var q=1/Math.sqrt(e*e+f*f+n*n);e*=q;f*=q;n*=q;p=k*n-l*f;l=l*e-h*n;h=h*f-k*e;(q=Math.sqrt(p*p+l*l+h*h))?(q=1/q,p*=q,l*=q,h*=q):h=l=p=0;k=f*h-n*l;var u=n*p-e*h;var r=e*l-f*p;(q=Math.sqrt(k*k+u*u+r*r))?(q=1/q,k*=q,u*=q,r*=q):r=u=k=0;a[0]=p;a[1]=k;a[2]=e;a[3]=
0;a[4]=l;a[5]=u;a[6]=f;a[7]=0;a[8]=h;a[9]=r;a[10]=n;a[11]=0;a[12]=-(p*b+l*g+h*d);a[13]=-(k*b+u*g+r*d);a[14]=-(e*b+f*g+n*d);a[15]=1;return a};A.str=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"};A.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[6],
2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))};"undefined"!==typeof a&&(a.mat4=A);var f={create:function(){var a=new e(4);a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a}};f.rotationTo=function(){var a=q.create(),d=q.fromValues(1,0,0),c=q.fromValues(0,1,0);return function(b,e,g){var h=q.dot(e,g);if(-.999999>h)return q.cross(a,d,e),1E-6>q.length(a)&&q.cross(a,c,e),q.normalize(a,a),f.setAxisAngle(b,
a,Math.PI),b;if(.999999<h)return b[0]=0,b[1]=0,b[2]=0,b[3]=1,b;q.cross(a,e,g);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=1+h;return f.normalize(b,b)}}();f.setAxes=function(){var a=r.create();return function(b,c,e,h){a[0]=e[0];a[3]=e[1];a[6]=e[2];a[1]=h[0];a[4]=h[1];a[7]=h[2];a[2]=-c[0];a[5]=-c[1];a[8]=-c[2];return f.normalize(b,f.fromMat3(b,a))}}();f.clone=t.clone;f.fromValues=t.fromValues;f.copy=t.copy;f.set=t.set;f.identity=function(a){a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a};f.setAxisAngle=function(a,c,e){e*=
.5;var b=Math.sin(e);a[0]=b*c[0];a[1]=b*c[1];a[2]=b*c[2];a[3]=Math.cos(e);return a};f.add=t.add;f.multiply=function(a,c,e){var b=c[0],d=c[1],f=c[2];c=c[3];var g=e[0],h=e[1],k=e[2];e=e[3];a[0]=b*e+c*g+d*k-f*h;a[1]=d*e+c*h+f*g-b*k;a[2]=f*e+c*k+b*h-d*g;a[3]=c*e-b*g-d*h-f*k;return a};f.mul=f.multiply;f.scale=t.scale;f.rotateX=function(a,c,e){e*=.5;var b=c[0],d=c[1],f=c[2];c=c[3];var g=Math.sin(e);e=Math.cos(e);a[0]=b*e+c*g;a[1]=d*e+f*g;a[2]=f*e-d*g;a[3]=c*e-b*g;return a};f.rotateY=function(a,c,e){e*=
.5;var b=c[0],d=c[1],f=c[2];c=c[3];var g=Math.sin(e);e=Math.cos(e);a[0]=b*e-f*g;a[1]=d*e+c*g;a[2]=f*e+b*g;a[3]=c*e-d*g;return a};f.rotateZ=function(a,c,e){e*=.5;var b=c[0],d=c[1],f=c[2];c=c[3];var g=Math.sin(e);e=Math.cos(e);a[0]=b*e+d*g;a[1]=d*e-b*g;a[2]=f*e+c*g;a[3]=c*e-f*g;return a};f.calculateW=function(a,c){var b=c[0],d=c[1];c=c[2];a[0]=b;a[1]=d;a[2]=c;a[3]=-Math.sqrt(Math.abs(1-b*b-d*d-c*c));return a};f.dot=t.dot;f.lerp=t.lerp;f.slerp=function(a,c,e,f){var b=c[0],d=c[1],g=c[2];c=c[3];var h=
e[0],k=e[1],l=e[2];e=e[3];var n=b*h+d*k+g*l+c*e;0>n&&(n=-n,h=-h,k=-k,l=-l,e=-e);if(1E-6<1-n){var p=Math.acos(n);var q=Math.sin(p);n=Math.sin((1-f)*p)/q;f=Math.sin(f*p)/q}else n=1-f;a[0]=n*b+f*h;a[1]=n*d+f*k;a[2]=n*g+f*l;a[3]=n*c+f*e;return a};f.invert=function(a,c){var b=c[0],d=c[1],e=c[2];c=c[3];var f=b*b+d*d+e*e+c*c;f=f?1/f:0;a[0]=-b*f;a[1]=-d*f;a[2]=-e*f;a[3]=c*f;return a};f.conjugate=function(a,c){a[0]=-c[0];a[1]=-c[1];a[2]=-c[2];a[3]=c[3];return a};f.length=t.length;f.len=f.length;f.squaredLength=
t.squaredLength;f.sqrLen=f.squaredLength;f.normalize=t.normalize;f.fromMat3=function(a,c){var b=c[0]+c[4]+c[8];if(0<b)b=Math.sqrt(b+1),a[3]=.5*b,b=.5/b,a[0]=(c[7]-c[5])*b,a[1]=(c[2]-c[6])*b,a[2]=(c[3]-c[1])*b;else{var d=0;c[4]>c[0]&&(d=1);c[8]>c[3*d+d]&&(d=2);var e=(d+1)%3,f=(d+2)%3;b=Math.sqrt(c[3*d+d]-c[3*e+e]-c[3*f+f]+1);a[d]=.5*b;b=.5/b;a[3]=(c[3*f+e]-c[3*e+f])*b;a[e]=(c[3*e+d]+c[3*d+e])*b;a[f]=(c[3*f+d]+c[3*d+f])*b}return a};f.str=function(a){return"quat("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+
")"};"undefined"!==typeof a&&(a.quat=f)})(c)})(this)},{}],24:[function(a,c,l){(function(){var a=this,e=a._,h={},n=Array.prototype,B=Object.prototype,v=n.push,C=n.slice,w=n.concat,p=B.toString,q=B.hasOwnProperty,t=n.forEach,r=n.map,A=n.reduce,f=n.reduceRight,b=n.filter,d=n.every,g=n.some,u=n.indexOf,D=n.lastIndexOf;B=Array.isArray;var na=Object.keys,T=Function.prototype.bind,m=function(a){if(a instanceof m)return a;if(!(this instanceof m))return new m(a);this._wrapped=a};"undefined"!==typeof l?("undefined"!==
typeof c&&c.exports&&(l=c.exports=m),l._=m):a._=m;m.VERSION="1.4.4";var K=m.each=m.forEach=function(a,b,c){if(null!=a)if(t&&a.forEach===t)a.forEach(b,c);else if(a.length===+a.length)for(var d=0,e=a.length;d<e&&b.call(c,a[d],d,a)!==h;d++);else for(d in a)if(m.has(a,d)&&b.call(c,a[d],d,a)===h)break};m.map=m.collect=function(a,b,c){var d=[];if(null==a)return d;if(r&&a.map===r)return a.map(b,c);K(a,function(a,e,f){d[d.length]=b.call(c,a,e,f)});return d};m.reduce=m.foldl=m.inject=function(a,b,c,d){var e=
2<arguments.length;null==a&&(a=[]);if(A&&a.reduce===A)return d&&(b=m.bind(b,d)),e?a.reduce(b,c):a.reduce(b);K(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)});if(!e)throw new TypeError("Reduce of empty array with no initial value");return c};m.reduceRight=m.foldr=function(a,b,c,d){var e=2<arguments.length;null==a&&(a=[]);if(f&&a.reduceRight===f)return d&&(b=m.bind(b,d)),e?a.reduceRight(b,c):a.reduceRight(b);var g=a.length;if(g!==+g){var h=m.keys(a);g=h.length}K(a,function(f,k,l){k=h?h[--g]:--g;
e?c=b.call(d,c,a[k],k,l):(c=a[k],e=!0)});if(!e)throw new TypeError("Reduce of empty array with no initial value");return c};m.find=m.detect=function(a,b,c){var d;ha(a,function(a,e,f){if(b.call(c,a,e,f))return d=a,!0});return d};m.filter=m.select=function(a,c,d){var e=[];if(null==a)return e;if(b&&a.filter===b)return a.filter(c,d);K(a,function(a,b,f){c.call(d,a,b,f)&&(e[e.length]=a)});return e};m.reject=function(a,b,c){return m.filter(a,function(a,d,e){return!b.call(c,a,d,e)},c)};m.every=m.all=function(a,
b,c){b||(b=m.identity);var e=!0;if(null==a)return e;if(d&&a.every===d)return a.every(b,c);K(a,function(a,d,f){if(!(e=e&&b.call(c,a,d,f)))return h});return!!e};var ha=m.some=m.any=function(a,b,c){b||(b=m.identity);var d=!1;if(null==a)return d;if(g&&a.some===g)return a.some(b,c);K(a,function(a,e,f){if(d||(d=b.call(c,a,e,f)))return h});return!!d};m.contains=m.include=function(a,b){return null==a?!1:u&&a.indexOf===u?-1!==a.indexOf(b):ha(a,function(a){return a===b})};m.invoke=function(a,b){var c=C.call(arguments,
2),d=m.isFunction(b);return m.map(a,function(a){return(d?b:a[b]).apply(a,c)})};m.pluck=function(a,b){return m.map(a,function(a){return a[b]})};m.where=function(a,b,c){return m.isEmpty(b)?c?null:[]:m[c?"find":"filter"](a,function(a){for(var c in b)if(b[c]!==a[c])return!1;return!0})};m.findWhere=function(a,b){return m.where(a,b,!0)};m.max=function(a,b,c){if(!b&&m.isArray(a)&&a[0]===+a[0]&&65535>a.length)return Math.max.apply(Math,a);if(!b&&m.isEmpty(a))return-Infinity;var d={computed:-Infinity,value:-Infinity};
K(a,function(a,e,f){e=b?b.call(c,a,e,f):a;e>=d.computed&&(d={value:a,computed:e})});return d.value};m.min=function(a,b,c){if(!b&&m.isArray(a)&&a[0]===+a[0]&&65535>a.length)return Math.min.apply(Math,a);if(!b&&m.isEmpty(a))return Infinity;var d={computed:Infinity,value:Infinity};K(a,function(a,e,f){e=b?b.call(c,a,e,f):a;e<d.computed&&(d={value:a,computed:e})});return d.value};m.shuffle=function(a){var b,c=0,d=[];K(a,function(a){b=m.random(c++);d[c-1]=d[b];d[b]=a});return d};var X=function(a){return m.isFunction(a)?
a:function(b){return b[a]}};m.sortBy=function(a,b,c){var d=X(b);return m.pluck(m.map(a,function(a,b,e){return{value:a,index:b,criteria:d.call(c,a,b,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(c<d||void 0===d)return-1}return a.index<b.index?-1:1}),"value")};var ba=function(a,b,c,d){var e={},f=X(b||m.identity);K(a,function(b,g){g=f.call(c,b,g,a);d(e,g,b)});return e};m.groupBy=function(a,b,c){return ba(a,b,c,function(a,b,c){(m.has(a,b)?a[b]:a[b]=[]).push(c)})};
m.countBy=function(a,b,c){return ba(a,b,c,function(a,b){m.has(a,b)||(a[b]=0);a[b]++})};m.sortedIndex=function(a,b,c,d){c=null==c?m.identity:X(c);b=c.call(d,b);for(var e=0,f=a.length;e<f;){var g=e+f>>>1;c.call(d,a[g])<b?e=g+1:f=g}return e};m.toArray=function(a){return a?m.isArray(a)?C.call(a):a.length===+a.length?m.map(a,m.identity):m.values(a):[]};m.size=function(a){return null==a?0:a.length===+a.length?a.length:m.keys(a).length};m.first=m.head=m.take=function(a,b,c){if(null!=a)return null==b||c?
a[0]:C.call(a,0,b)};m.initial=function(a,b,c){return C.call(a,0,a.length-(null==b||c?1:b))};m.last=function(a,b,c){if(null!=a)return null==b||c?a[a.length-1]:C.call(a,Math.max(a.length-b,0))};m.rest=m.tail=m.drop=function(a,b,c){return C.call(a,null==b||c?1:b)};m.compact=function(a){return m.filter(a,m.identity)};var oa=function(a,b,c){K(a,function(a){m.isArray(a)?b?v.apply(c,a):oa(a,b,c):c.push(a)});return c};m.flatten=function(a,b){return oa(a,b,[])};m.without=function(a){return m.difference(a,
C.call(arguments,1))};m.uniq=m.unique=function(a,b,c,d){m.isFunction(b)&&(d=c,c=b,b=!1);c=c?m.map(a,c,d):a;var e=[],f=[];K(c,function(c,d){(b?d&&f[f.length-1]===c:m.contains(f,c))||(f.push(c),e.push(a[d]))});return e};m.union=function(){return m.uniq(w.apply(n,arguments))};m.intersection=function(a){var b=C.call(arguments,1);return m.filter(m.uniq(a),function(a){return m.every(b,function(b){return 0<=m.indexOf(b,a)})})};m.difference=function(a){var b=w.apply(n,C.call(arguments,1));return m.filter(a,
function(a){return!m.contains(b,a)})};m.zip=function(){for(var a=C.call(arguments),b=m.max(m.pluck(a,"length")),c=Array(b),d=0;d<b;d++)c[d]=m.pluck(a,""+d);return c};m.object=function(a,b){if(null==a)return{};for(var c={},d=0,e=a.length;d<e;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c};m.indexOf=function(a,b,c){if(null==a)return-1;var d=0,e=a.length;if(c)if("number"==typeof c)d=0>c?Math.max(0,e+c):c;else return d=m.sortedIndex(a,b),a[d]===b?d:-1;if(u&&a.indexOf===u)return a.indexOf(b,c);for(;d<
e;d++)if(a[d]===b)return d;return-1};m.lastIndexOf=function(a,b,c){if(null==a)return-1;var d=null!=c;if(D&&a.lastIndexOf===D)return d?a.lastIndexOf(b,c):a.lastIndexOf(b);for(c=d?c:a.length;c--;)if(a[c]===b)return c;return-1};m.range=function(a,b,c){1>=arguments.length&&(b=a||0,a=0);c=arguments[2]||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=Array(d);e<d;)f[e++]=a,a+=c;return f};m.bind=function(a,b){if(a.bind===T&&T)return T.apply(a,C.call(arguments,1));var c=C.call(arguments,2);return function(){return a.apply(b,
c.concat(C.call(arguments)))}};m.partial=function(a){var b=C.call(arguments,1);return function(){return a.apply(this,b.concat(C.call(arguments)))}};m.bindAll=function(a){var b=C.call(arguments,1);0===b.length&&(b=m.functions(a));K(b,function(b){a[b]=m.bind(a[b],a)});return a};m.memoize=function(a,b){var c={};b||(b=m.identity);return function(){var d=b.apply(this,arguments);return m.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}};m.delay=function(a,b){var c=C.call(arguments,2);return setTimeout(function(){return a.apply(null,
c)},b)};m.defer=function(a){return m.delay.apply(m,[a,1].concat(C.call(arguments,1)))};m.throttle=function(a,b){var c,d,e,f,g=0,h=function(){g=new Date;e=null;f=a.apply(c,d)};return function(){var k=new Date,l=b-(k-g);c=this;d=arguments;0>=l?(clearTimeout(e),e=null,g=k,f=a.apply(c,d)):e||(e=setTimeout(h,l));return f}};m.debounce=function(a,b,c){var d,e;return function(){var f=this,g=arguments,h=c&&!d;clearTimeout(d);d=setTimeout(function(){d=null;c||(e=a.apply(f,g))},b);h&&(e=a.apply(f,g));return e}};
m.once=function(a){var b=!1,c;return function(){if(b)return c;b=!0;c=a.apply(this,arguments);a=null;return c}};m.wrap=function(a,b){return function(){var c=[a];v.apply(c,arguments);return b.apply(this,c)}};m.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length-1;0<=c;c--)b=[a[c].apply(this,b)];return b[0]}};m.after=function(a,b){return 0>=a?b():function(){if(1>--a)return b.apply(this,arguments)}};m.keys=na||function(a){if(a!==Object(a))throw new TypeError("Invalid object");
var b=[],c;for(c in a)m.has(a,c)&&(b[b.length]=c);return b};m.values=function(a){var b=[],c;for(c in a)m.has(a,c)&&b.push(a[c]);return b};m.pairs=function(a){var b=[],c;for(c in a)m.has(a,c)&&b.push([c,a[c]]);return b};m.invert=function(a){var b={},c;for(c in a)m.has(a,c)&&(b[a[c]]=c);return b};m.functions=m.methods=function(a){var b=[],c;for(c in a)m.isFunction(a[c])&&b.push(c);return b.sort()};m.extend=function(a){K(C.call(arguments,1),function(b){if(b)for(var c in b)a[c]=b[c]});return a};m.pick=
function(a){var b={},c=w.apply(n,C.call(arguments,1));K(c,function(c){c in a&&(b[c]=a[c])});return b};m.omit=function(a){var b={},c=w.apply(n,C.call(arguments,1)),d;for(d in a)m.contains(c,d)||(b[d]=a[d]);return b};m.defaults=function(a){K(C.call(arguments,1),function(b){if(b)for(var c in b)null==a[c]&&(a[c]=b[c])});return a};m.clone=function(a){return m.isObject(a)?m.isArray(a)?a.slice():m.extend({},a):a};m.tap=function(a,b){b(a);return a};var ca=function(a,b,c,d){if(a===b)return 0!==a||1/a==1/b;
if(null==a||null==b)return a===b;a instanceof m&&(a=a._wrapped);b instanceof m&&(b=b._wrapped);var e=p.call(a);if(e!=p.call(b))return!1;switch(e){case "[object String]":return a==String(b);case "[object Number]":return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case "[object Date]":case "[object Boolean]":return+a==+b;case "[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if("object"!=typeof a||"object"!=typeof b)return!1;for(var f=c.length;f--;)if(c[f]==
a)return d[f]==b;c.push(a);d.push(b);f=0;var g=!0;if("[object Array]"==e){if(f=a.length,g=f==b.length)for(;f--&&(g=ca(a[f],b[f],c,d)););}else{e=a.constructor;var h=b.constructor;if(e!==h&&!(m.isFunction(e)&&e instanceof e&&m.isFunction(h)&&h instanceof h))return!1;for(var k in a)if(m.has(a,k)&&(f++,!(g=m.has(b,k)&&ca(a[k],b[k],c,d))))break;if(g){for(k in b)if(m.has(b,k)&&!f--)break;g=!f}}c.pop();d.pop();return g};m.isEqual=function(a,b){return ca(a,b,[],[])};m.isEmpty=function(a){if(null==a)return!0;
if(m.isArray(a)||m.isString(a))return 0===a.length;for(var b in a)if(m.has(a,b))return!1;return!0};m.isElement=function(a){return!(!a||1!==a.nodeType)};m.isArray=B||function(a){return"[object Array]"==p.call(a)};m.isObject=function(a){return a===Object(a)};K("Arguments Function String Number Date RegExp".split(" "),function(a){m["is"+a]=function(b){return p.call(b)=="[object "+a+"]"}});m.isArguments(arguments)||(m.isArguments=function(a){return!(!a||!m.has(a,"callee"))});"function"!==typeof/./&&(m.isFunction=
function(a){return"function"===typeof a});m.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))};m.isNaN=function(a){return m.isNumber(a)&&a!=+a};m.isBoolean=function(a){return!0===a||!1===a||"[object Boolean]"==p.call(a)};m.isNull=function(a){return null===a};m.isUndefined=function(a){return void 0===a};m.has=function(a,b){return q.call(a,b)};m.noConflict=function(){a._=e;return this};m.identity=function(a){return a};m.times=function(a,b,c){for(var d=Array(a),e=0;e<a;e++)d[e]=b.call(c,
e);return d};m.random=function(a,b){null==b&&(b=a,a=0);return a+Math.floor(Math.random()*(b-a+1))};var W={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};W.unescape=m.invert(W.escape);var pa={escape:new RegExp("["+m.keys(W.escape).join("")+"]","g"),unescape:new RegExp("("+m.keys(W.unescape).join("|")+")","g")};m.each(["escape","unescape"],function(a){m[a]=function(b){return null==b?"":(""+b).replace(pa[a],function(b){return W[a][b]})}});m.result=function(a,b){if(null==
a)return null;b=a[b];return m.isFunction(b)?b.call(a):b};m.mixin=function(a){K(m.functions(a),function(b){var c=m[b]=a[b];m.prototype[b]=function(){var a=[this._wrapped];v.apply(a,arguments);return E.call(this,c.apply(m,a))}})};var ia=0;m.uniqueId=function(a){var b=++ia+"";return a?a+b:b};m.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var da=/(.)^/,ja={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},S=/\\|'|\r|\n|\t|\u2028|\u2029/g;
m.template=function(a,b,c){c=m.defaults({},c,m.templateSettings);var d=new RegExp([(c.escape||da).source,(c.interpolate||da).source,(c.evaluate||da).source].join("|")+"|$","g"),e=0,f="__p+='";a.replace(d,function(b,c,d,g,h){f+=a.slice(e,h).replace(S,function(a){return"\\"+ja[a]});c&&(f+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'");d&&(f+="'+\n((__t=("+d+"))==null?'':__t)+\n'");g&&(f+="';\n"+g+"\n__p+='");e=h+b.length;return b});f+="';\n";c.variable||(f="with(obj||{}){\n"+f+"}\n");f="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+
f+"return __p;\n";try{var g=new Function(c.variable||"obj","_",f)}catch(J){throw J.source=f,J;}if(b)return g(b,m);b=function(a){return g.call(this,a,m)};b.source="function("+(c.variable||"obj")+"){\n"+f+"}";return b};m.chain=function(a){return m(a).chain()};var E=function(a){return this._chain?m(a).chain():a};m.mixin(m);K("pop push reverse shift sort splice unshift".split(" "),function(a){var b=n[a];m.prototype[a]=function(){var c=this._wrapped;b.apply(c,arguments);"shift"!=a&&"splice"!=a||0!==c.length||
delete c[0];return E.call(this,c)}});K(["concat","join","slice"],function(a){var b=n[a];m.prototype[a]=function(){return E.call(this,b.apply(this._wrapped,arguments))}});m.extend(m.prototype,{chain:function(){this._chain=!0;return this},value:function(){return this._wrapped}})}).call(this)},{}],25:[function(a,c,l){"undefined"!==typeof window&&"function"!==typeof window.requestAnimationFrame&&(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||
window.msRequestAnimationFrame||function(a){setTimeout(a,1E3/60)});Leap=a("../lib/index")},{"../lib/index":11}]},{},[25]);
}).call(this);//# sourceMappingURL=CindyLeap.js.map

